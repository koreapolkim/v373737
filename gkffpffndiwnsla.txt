<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover, maximum-scale=1, user-scalable=no">
  <title>í”¼ì‹±ì˜ˆë°©ì²´í—˜</title>

  <style>
    :root{
      --bg1:#EAF6FF;
      --bg2:#FFFFFF;
      --primary:#2F8CFF;
      --primary2:#6DB7FF;
      --ink:#1F2430;
      --muted:#7A8191;
      --card:#FFFFFF;
      --stroke:rgba(25,28,38,.10);
      --radius:18px;

      --sat: env(safe-area-inset-top, 0px);
      --sab: env(safe-area-inset-bottom, 0px);

      /* Kakao-ish */
      --kakao-bg:#BCD3E6;
      --kakao-yellow:#FFE44D;
      --kakao-yellow2:#FFE055;

      /* Bars colors */
      --c-verify:#2F8CFF;
      --c-link:#6A2BD1;
      --c-otp:#12B981;
      --c-urgency:#F59E0B;
      --c-money:#FB7185;
      --c-context:#14B8A6;

      /* ====== ì „ì²´ ê¸€ì”¨ ì˜¬ë¦¬ì 1pt ====== */
      --fontUp: 1pt;
    }

    *{box-sizing:border-box}
    html,body{height:100%}

    body{
      margin:0;
      font-family: ui-sans-serif, system-ui, -apple-system, "Apple SD Gothic Neo", "Noto Sans KR", "Segoe UI", Roboto, Arial, sans-serif;
      color:var(--ink);
      background: linear-gradient(180deg, var(--bg1), var(--bg2));
      overflow:hidden;
      -webkit-text-size-adjust: 100%;
      font-size: calc(16px + var(--fontUp));
    }

    .phone{width:100vw;height: calc(var(--vh, 1vh) * 100);background:#fff;overflow:hidden;position:relative;}
    .app{height:100%;display:flex;flex-direction:column;min-height:0;}

    header{
      /* í—¤ë” ì•½ê°„ ì‘ê²Œ */
      padding: calc(12px + var(--sat)) 14px 10px;
      background: rgba(255,255,255,.92);
      border-bottom:1px solid var(--stroke);
      display:flex;align-items:center;justify-content:space-between;gap:10px;
      position:sticky; top:0; z-index:30;
      backdrop-filter: blur(10px);
    }

    .fullscreen header{display:none}
    .fullscreen main{padding:0; overflow:hidden}
    .fullscreen .app{background:#000}

    .brand{display:flex;align-items:center;gap:10px;min-width:0}
    .logo{white-space:nowrap;font-size: calc(18px + var(--fontUp));letter-spacing:-.02em;display:flex;align-items:baseline;gap:0;}
    .brandStrong{font-weight:950;color:var(--primary);text-shadow: 0 1px 1px rgba(0,0,0,.10);}

    /* ê²½ì°°ê³¼ í•¨ê»˜í•˜ëŠ” ì²´í—˜ ë„¤ì´ë¹„ */
    .brandLight{
      font-size: calc(15px + var(--fontUp)); /* +1pt ë°˜ì˜ */
      font-weight:900;
      color:rgba(11,43,91,.92);
      margin-left:12px;
    }

    .subtitle{
      font-size: calc(14px + var(--fontUp));
      font-weight:950;color:rgba(31,36,48,.92);
      white-space:nowrap;overflow:hidden;text-overflow:ellipsis;
      max-width:260px;letter-spacing:-.01em;
    }

    .iconbtn{
      width:40px;height:40px;border-radius:12px;border:1px solid var(--stroke);
      background:#fff;display:grid;place-items:center;cursor:pointer;user-select:none;
      box-shadow: 0 8px 18px rgba(25,28,38,.08);
      font-size: calc(16px + var(--fontUp));
    }
    .burger{width:18px;height:12px; position:relative}
    .burger::before,.burger::after,.burger span{content:"";position:absolute;left:0;right:0;height:2px;border-radius:2px;background:rgba(31,36,48,.80);}
    .burger::before{top:0}
    .burger span{top:5px}
    .burger::after{bottom:0}

    main{
      flex:1;min-height:0;overflow:auto;
      padding:12px 12px calc(16px + var(--sab));
      -webkit-overflow-scrolling: touch;
      background: transparent;
    }

    .card{background:var(--card);border:1px solid var(--stroke);border-radius: var(--radius);box-shadow: 0 8px 18px rgba(25,28,38,.06);}
    .caseList{display:flex;flex-direction:column;gap:10px}
    .caseItem{padding:14px;display:flex;gap:12px;align-items:flex-start;cursor:pointer}
    .caseBody{flex:1;min-width:0}
    .caseTop{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:8px;
    }
    .caseTitle{font-size: calc(15px + var(--fontUp));font-weight:950;line-height:1.25;margin:0 0 6px;letter-spacing:-.02em;word-break:keep-all}
    .caseSub{margin:0;color:var(--muted);font-size: calc(12.5px + var(--fontUp));line-height:1.35}

    .chip{
      font-size: calc(12px + var(--fontUp));
      font-weight:900;
      padding:6px 12px;
      border-radius:9px;
      border:1px solid rgba(31,36,48,.08);
      background: rgba(79,163,255,.16);
      color:#2D70C9;
      white-space:nowrap;
    }
    .chip.blue{background:rgba(79,163,255,.16); color:#2D70C9}
    .chip.red{background:rgba(255,107,107,.16); color:#D45050}
    .chip.green{background:rgba(43,196,138,.16); color:#1D9A6C}
    .chip.orange{background:rgba(255,183,77,.22); color:#B86B1D}
    .chip.purple{background:rgba(151,71,255,.14); color:#6A2BD1}

    /* í‚¤ì›Œë“œ */
    .kwWord{
      display:inline-block;
      font-weight:950;
      color:rgba(31,36,48,.90);
      margin-right:10px;
      letter-spacing:-.01em;
      font-size: calc(13px + var(--fontUp));
    }

    .detailHead{padding:16px}
    .detailHead h2{margin:0 0 8px;font-size: calc(18px + var(--fontUp));letter-spacing:-.02em}
    .detailHead p{margin:0;color:var(--muted);font-size: calc(13px + var(--fontUp));line-height:1.5}
    .cta{margin-top:14px;display:flex;gap:10px;flex-wrap:wrap}
    .btn{border:none;padding:12px 14px;border-radius:16px;font-weight:950;cursor:pointer;user-select:none;letter-spacing:-.01em;font-size: calc(14px + var(--fontUp));}
    .btn.primary{background: linear-gradient(180deg, var(--primary), var(--primary2));color:#fff;box-shadow: 0 14px 22px rgba(47,140,255,.22);}
    .btn.ghost{background:#fff;border: 1px solid rgba(47,140,255,.28);color: var(--primary);}
    .btn.block{width:100%}

    /* í´ì¼€ì–´ ë²„íŠ¼ ì…ì²´ê°ê³¼ í„°ì¹˜ ì¶•ì†Œ ê¸°ëŠ¥ */
    .btn{transition: transform .06s ease, box-shadow .12s ease, filter .12s ease;}
    .btn.primary{box-shadow: 0 8px 16px rgba(38,134,255,.22);}
    .btn.primary:active{transform: scale(.97);filter: brightness(.98);}

    /* === O / X ì²´í—˜ ë²„íŠ¼ === */
    .btn.ox{
  background: linear-gradient(180deg, rgba(120,220,180,.95), rgba(70,195,145,.95));
  color:#fff;
  border:none;
  box-shadow: 0 10px 18px rgba(70,195,145,.20);
}
    .btn.ox:active{transform: scale(.97);filter: brightness(.98);}

    /* ox í€´ì¦ˆ ìŠ¬ë¼ì´ë“œ í¬ê¸° */
    .overlay.sheet{align-items:flex-end !important;justify-content:center !important;padding: var(--sat) 0 0 !important;}
    .overlay.sheet .modal{
  width:min(560px, 100%) !important;
  border-radius:22px 22px 0 0 !important;
  transform: translateY(0);
  max-height: calc((var(--vh, 1vh) * 100) - (7px + var(--sat) + var(--sab))); 
  display:flex;
  flex-direction:column;
}
    .overlay.sheet.show .modal{animation: sheetUp .18s ease;}
    @keyframes sheetUp{from{ transform: translateY(24px); opacity:0; }to{ transform: translateY(0); opacity:1; }}

/* ìŠ¤í¬ë¡¤ ë‚´ìš©ì´ ê¸¸ì–´ì ¸ë„ ìƒë‹¨ ì‚´ë¦¬ìì‰ */
.overlay.sheet .modalBody{
  flex: 1;
  min-height: 0;
  overflow: auto;
  -webkit-overflow-scrolling: touch;
}
.overlay.sheet .fb{
  overflow: auto;
  max-height: min(320px, 38vh); 
  -webkit-overflow-scrolling: touch;
}

/* O/X í”¼ë“œë°± í™”ë©´ 2 */
#quizOverlay.oxMode .modalBody{
  overflow: hidden !important;
}

#quizOverlay.oxMode .fb{
  overflow: hidden !important;
  max-height: none !important;
}

    .infoBlock{padding:16px;display:flex;flex-direction:column;gap:10px}
    .infoBlock .row{display:flex;gap:12px;align-items:flex-start}
    .infoBlock .k{width:92px;flex:0 0 92px;color:var(--primary);font-weight:950;font-size: calc(13px + var(--fontUp))}
    .infoBlock .v{flex:1;font-size: calc(13px + var(--fontUp));line-height:1.5;color:rgba(31,36,48,.86)}
    .listDots{margin:0;padding-left:0;list-style:none;}
    .listDots li{margin:0px 0}

    /* ====== ìƒë‹¨ ë°°ë„ˆ ====== */
    .banner{
      position:absolute;left:12px; right:12px;top: calc(10px + var(--sat));
      background: rgba(90,90,96,.90);
      color:#fff;border-radius: 18px;
      box-shadow: 0 14px 30px rgba(0,0,0,.22);
      padding:12px 14px;
      display:flex;gap:0px;align-items:flex-start;
      z-index:80;
      opacity:0;transform: translateY(-10px);
      pointer-events:none;
      transition: opacity .22s ease, transform .22s ease;
    }
    .banner{font-family:"Apple SD Gothic Neo","Noto Sans KR",system-ui,sans-serif;}
    .banner.show{opacity:1; transform: translateY(0); pointer-events:auto;}
    .banner .ic{width:34px;height:34px;border-radius:12px;background: rgba(255,255,255,.16);display:grid;place-items:center;flex:0 0 34px;font-weight:1000;}
    .banner .t1{font-weight:1000;font-size: calc(15px + var(--fontUp))}
    .banner .t2{margin-top:2px;font-size: calc(15px + var(--fontUp));color:rgba(255,255,255,.82);line-height:1.35}

    /* ====== ë½(ã…ã…) ====== */
    .pushGate{
      height: calc(var(--vh, 1vh) * 100);
      width:100%;
      overflow:hidden;
      background:
        radial-gradient(900px 520px at 50% -10%, rgba(47,140,255,.28), transparent 55%),
        linear-gradient(180deg, rgba(16,18,22,1), rgba(16,18,22,.92));
      color:#fff;
      position:relative;
      padding: calc(26px + var(--sat)) 16px calc(18px + var(--sab));
      display:flex;flex-direction:column;_attach:;
      justify-content:space-between;
    }
    .pushTop{margin-top: calc(56px + var(--sat)); text-align:center;}
    .pushClock{font-weight:1000;font-size: calc(44px + var(--fontUp));letter-spacing:-.03em}
    .pushDate{margin-top:6px;color:rgba(255,255,255,.70);font-size: calc(20px + var(--fontUp))}
    .pushCards{display:flex;flex-direction:column;gap:10px;margin-top:34px}
    .pushCard{
      background: rgba(255,255,255,.12);
      border:1px solid rgba(255,255,255,.14);
      border-radius: 18px;
      padding:12px 12px;
      backdrop-filter: blur(10px);
      box-shadow: 0 12px 26px rgba(0,0,0,.28);
      cursor:pointer;
      user-select:none;
    }
    .pushRow{display:flex;align-items:flex-start;gap:10px}
    .pushAppIc{
      width:36px;height:36px;border-radius:14px;
      background: rgba(255,255,255,.18);
      display:grid;place-items:center;font-weight:1000;
      flex:0 0 36px;
    }
    .pushTtl{font-weight:1000;font-size: calc(15px + var(--fontUp))}
    .pushBody{margin-top:2px;color:rgba(255,255,255,.80);font-size: calc(15px + var(--fontUp));line-height:1.35}
    .pushHint{margin-top:14px;color:rgba(255,255,255,.70);font-size: calc(15px + var(--fontUp));text-align:center;}
    .pushGate{font-family:"Apple SD Gothic Neo","Noto Sans KR",system-ui,sans-serif;}

    /* ====== Messenger/Kakao ë²„íŠ¼ ì„¤ì • ====== */
    .expWrap{
      height:100%;
      display:flex;
      flex-direction:column;
      min-height:0;
      border:none;
      border-radius:0;
      overflow:hidden;
      background:#fff;
      position:relative;
    }
    .chatHeader{
      position:sticky;top:0;z-index:20;
      padding: calc(10px + var(--sat)) 10px 8px;
      display:flex;gap:8px;align-items:center;
      border-bottom:1px solid var(--stroke);
      background: rgba(255,255,255,.96);
      backdrop-filter: blur(10px);
    }
    .backBtn{
      width:36px;height:36px;border-radius:12px;border:1px solid var(--stroke);
      background:#fff;display:grid;place-items:center;cursor:pointer;
      box-shadow: 0 8px 18px rgba(25,28,38,.08);
      font-weight:1000;flex:0 0 36px;
      font-size: calc(16px + var(--fontUp));
    }
    .profile{display:flex;align-items:center;gap:10px;min-width:0;flex:1;}
    .avatar{
      width:38px;height:38px;border-radius:14px;
      background: linear-gradient(180deg, rgba(255,255,255,.90), rgba(255,255,255,.60));
      border:1px solid rgba(0,0,0,.08);
      display:grid;place-items:center;
      font-weight:1000;color:rgba(31,36,48,.75);
      flex:0 0 38px;position:relative;overflow:hidden;
      font-size: calc(16px + var(--fontUp));
    }
    .avatar .statusDot{
      position:absolute; right:5px; bottom:5px;
      width:10px;height:10px;border-radius:999px;
      background:#2BC48A; box-shadow: 0 0 0 2px rgba(255,255,255,.95);
    }
    .pbox{min-width:0}
    .pname{margin:0;font-weight:1000;font-size: calc(14px + var(--fontUp));letter-spacing:-.02em}
    .psub{margin:2px 0 0;color:var(--muted);font-size: calc(12px + var(--fontUp));white-space:nowrap;overflow:hidden;text-overflow:ellipsis}

    .hdrIcons{display:flex;gap:6px;align-items:center;position:relative}
    .hico{
      width:36px;height:36px;border-radius:12px;border:1px solid var(--stroke);
      background:#fff;display:grid;place-items:center;
      box-shadow: 0 8px 18px rgba(25,28,38,.06);
      cursor:pointer;user-select:none;
      color:rgba(31,36,48,.78);font-weight:1000;
      font-size: calc(16px + var(--fontUp));
    }

    .chatArea{
      flex:1;
      min-height:0;
      overflow:auto;
      padding:12px 10px calc(78px + var(--sab));
      display:flex;flex-direction:column;gap:8px;
      -webkit-overflow-scrolling: touch;
      position:relative;
    }

    .kakaoBg{
      background: linear-gradient(180deg, var(--kakao-bg), rgba(188,211,230,.70));
    }
    .kakaoBg::before{
      content:"";
      position:absolute; inset:0;
      background-image:
        radial-gradient(circle at 18px 18px, rgba(255,255,255,.20) 0 1px, transparent 2px),
        radial-gradient(circle at 54px 52px, rgba(0,0,0,.04) 0 1px, transparent 2px);
      background-size: 72px 72px;
      opacity:.55;
      pointer-events:none;
    }
    .kakaoBg > *{position:relative; z-index:1}

    .rowMsg{display:flex;gap:7px;align-items:flex-end}
    .rowMsg.me{justify-content:flex-end}
    .rowMsg.other{justify-content:flex-start}

    .stack{display:flex;flex-direction:column;gap:4px;max-width:72% !important;}
    .stack.me{align-items:flex-end}
    .stack.other{align-items:flex-start}

    .bubble{
      display:inline-block;
      width:auto;
      max-width: 100%;
      padding:10px 12px;
      border-radius: 14px;
      border:1px solid rgba(0,0,0,.10);
      line-height:1.48;
      font-size: calc(13px + var(--fontUp));
      position:relative;
      box-shadow: 0 8px 18px rgba(25,28,38,.07);
    }

    /* URLë§Œ ì˜ˆì™¸ë¡œ ëŠì–´ */
    .bubble .linkBtn{
      word-break: break-all;
      overflow-wrap: anywhere;
    }

    .kakao .bubble.me{
      background: linear-gradient(180deg, var(--kakao-yellow), var(--kakao-yellow2));
      border-color: rgba(0,0,0,.10);
    }
    .kakao .bubble.other{
      background:#fff;
      border-color: rgba(0,0,0,.08);
    }
    .sms .bubble.me{background: rgba(47,140,255,.14); border-color: rgba(47,140,255,.20);}
    .sms .bubble.other{background:#fff}

    .bubble.tail::after{
      content:"";
      position:absolute;
      bottom:10px;
      width:12px;height:16px;
      background: inherit;
      filter: drop-shadow(0 1px 0 rgba(0,0,0,.10));
    }
    .bubble.tail.other::after{
      left:-9px;
      clip-path: polygon(100% 0, 0 50%, 100% 100%);
    }
    .bubble.tail.me::after{
      right:-9px;
      clip-path: polygon(0 0, 100% 50%, 0 100%);
    }

    .metaRow{display:flex;align-items:flex-end;gap:6px;font-size: calc(11px + var(--fontUp));color: rgba(0,0,0,.45);white-space:nowrap;}
    .metaRow.me{flex-direction:row-reverse}

    @keyframes readSlideIn {from { opacity:0; transform: translateX(8px) translateY(2px); }to{ opacity:1; transform: translateX(0) translateY(0); }}
    @keyframes readFadeOut { from { opacity:1; } to { opacity:0; } }
    .readCount{font-weight:1000;color: rgba(0,0,0,.55);line-height:1;animation: readSlideIn .16s ease both;}
    .readCount.vanish{animation: readFadeOut .25s ease forwards;}
    .linkBtn{all:unset;color:#0B63FF;text-decoration: underline;cursor:pointer;font-weight:900;}
    @keyframes popIn{from{opacity:0; transform: translateY(6px) scale(.98)}to{opacity:1; transform: translateY(0) scale(1)}}
    .pop{animation: popIn .18s ease both}

    /* ë©”ì‹œì§€ì™€ ì¹´í†¡ í•˜ë‹¨ ì…ë ¥ì°½ ë§Œë“¦ */
    .chatFooter{
      position:absolute;left:0;right:0;bottom:0;
      padding:10px 10px calc(10px + var(--sab));
      border-top:1px solid rgba(0,0,0,.06);
      background: rgba(255,255,255,.94);
      backdrop-filter: blur(10px);
      z-index:25;
    }
    .chatInputRow{display:flex;gap:8px;align-items:center;}
    .chatIcon{
      width:34px;height:34px;border-radius:12px;
      border:1px solid rgba(0,0,0,.08);
      background:#fff;
      display:grid;place-items:center;
      font-weight:1000;color:rgba(31,36,48,.70);
      user-select:none;
      font-size: calc(16px + var(--fontUp));
    }
    .chatField{
      flex:1;
      height:38px;
      border-radius:16px;
      border:1px solid rgba(0,0,0,.10);
      background:#fff;
      padding:0 12px;
      font-size: calc(13px + var(--fontUp));
      outline:none;
    }
    .chatField::placeholder{color:rgba(31,36,48,.40);font-weight:800;}
    .sendBtn{
      height:38px;min-width:56px;
      border-radius:16px;
      border:1px solid rgba(0,0,0,.10);
      background:#fff;
      font-weight:1000;
      cursor:not-allowed;
      opacity:.70;
      user-select:none;
      font-size: calc(13px + var(--fontUp));
    }
    .kakaoFooter .sendBtn{
      background: linear-gradient(180deg, var(--kakao-yellow), var(--kakao-yellow2));
      border-color: rgba(0,0,0,.10);
      color: rgba(0,0,0,.78);
      opacity:1;
    }

    /* ====== í€´ì¦ˆ íŒì—… ì°½====== */
    .overlay{
      position:absolute; inset:0;
      background: rgba(0,0,0,.44);
      display:none;
      align-items:center;
      justify-content:center;
      padding:16px;
      z-index:90;
    }
    .overlay.show{display:flex}
    .modal{
      width:min(520px, 100%);
      background:#fff;
      border-radius: 22px;
      border:1px solid rgba(255,255,255,.35);
      box-shadow: 0 18px 60px rgba(0,0,0,.26);
      overflow:hidden;
    }
    .modalHead{
      padding:14px 14px 12px;
      border-bottom:1px solid var(--stroke);
      display:flex;justify-content:space-between;align-items:center;
      background: rgba(255,255,255,.92);
      backdrop-filter: blur(10px);
    }
    .modalHead .ttl{font-weight:1000;letter-spacing:-.02em;font-size: calc(14px + var(--fontUp))}
    .modalBody{padding:14px}
    .qPrompt{margin:0 0 10px;font-weight:1000;letter-spacing:-.02em;line-height:1.35;font-size: calc(14px + var(--fontUp))}
    .choices{display:flex;flex-direction:column;gap:8px}

    /* O/X ë³´ì—¬ì§€ëŠ”í™”ë©´ */
    #qVisual{ margin: 10px 0 8px; }

    .choice{
      padding:12px 12px;border-radius:16px;
      border:1px solid var(--stroke);
      background:#fff;cursor:pointer;
      font-weight:950;font-size: calc(13px + var(--fontUp));text-align:left;
      transition: transform .06s ease, background .12s ease, border-color .12s ease;
    }
    .choice:active{transform:scale(.99)}
    .fb{
      display:none;
      padding:10px 12px 12px;
      border-top:1px solid var(--stroke);
      background: rgba(47,140,255,.08);
      color: rgba(31,36,48,.92);
      font-size: calc(14px + var(--fontUp));
      line-height:1.55;
    }
    .fb.show{display:block}
    .fb .big{font-weight:1000;margin-bottom:6px;font-size: calc(15px + var(--fontUp))}

    /* í€´ì¦ˆ ì„ íƒ ë˜ê²Œë” */
    .choice.selected{
      border-color: rgba(47,140,255,.55);
      background: rgba(47,140,255,.10);
      box-shadow: 0 10px 18px rgba(47,140,255,.12);
    }

    .quizNextBtn{
      all: unset;
      font: inherit;
      font-size: calc(13px + var(--fontUp));
      font-weight: 800;
      padding: 6px 10px;
      border-radius: 10px;
      border: 1px solid rgba(31,36,48,.14);
      background: #fff;
      cursor: pointer;
      user-select: none;
      opacity: 0;
      pointer-events: none;
    }
    .quizNextBtn.on{
      opacity: 1;
      pointer-events: auto;
      background: #2F8CFF;
      border-color: rgba(47,140,255,.35);
      color: #fff;
      font-weight: 1000;
      box-shadow: 0 10px 18px rgba(47,140,255,.25);
    }
    .quizNextBtn:disabled{
      opacity: .35;
      pointer-events: none;
      background:#fff;
      color:rgba(31,36,48,.55);
      font-weight:800;
      box-shadow:none;
    }

    /* O/X ë¬¸ì œ ë‚˜ê°€ê¸° ë²„íŠ¼ */
    .oxExitBtn{
      all: unset;
      font: inherit;
      font-size: calc(13px + var(--fontUp));
      font-weight: 950;
      padding: 6px 10px;
      border-radius: 10px;
      border: 1px solid rgba(31,36,48,.14);
      background: #fff;
      cursor: pointer;
      user-select: none;
      display:none;
      color: rgba(31,36,48,.78);
      box-shadow: 0 8px 16px rgba(25,28,38,.08);
    }
    .oxExitBtn:active{ transform: scale(.99); }

    /* ====== í€´ì¦ˆ í”¼ë“œë°± ì•„ë˜ ì™œ ====== */
    .fb .why{
      margin-top:8px;
      font-size: calc(13px + var(--fontUp));
      color:rgba(31,36,48,.78);
      line-height:1.55;
      padding-top:10px;
      border-top:1px dashed rgba(31,36,48,.18);
    }
    .fb .why b{ font-weight:1000; }

    /* === O / X ì²´í—˜ í™”ë©´ ë””ìì¸ === */
    .oxIntroStage{
  position: relative;
  inset: auto;

  /* o / x ë¬¸ì œ ë°°ê²½ ê½‰ì°¨ê²Œ */
  margin: -12px -12px calc(-16px - var(--sab)) -12px;
  min-height: calc(100% + 12px + 16px + var(--sab)); 

  overflow: hidden;
  overscroll-behavior: none;
  background: linear-gradient(180deg, var(--kakao-bg), rgba(188,211,230,.72));
  color: rgba(31,36,48,.92);
  padding: 16px 12px calc(16px + var(--sab));
  display:flex;
  align-items:center;
  justify-content:center;
  font-family:"Apple SD Gothic Neo","Noto Sans KR",system-ui,sans-serif;
  letter-spacing:-.02em;
}

    .oxIntroStage::before{
      content:"";
      position:absolute; inset:0;
      background-image:
        radial-gradient(circle at 18px 18px, rgba(255,255,255,.22) 0 1px, transparent 2px),
        radial-gradient(circle at 54px 52px, rgba(0,0,0,.04) 0 1px, transparent 2px);
      background-size: 72px 72px;
      opacity:.55;
      pointer-events:none;
    }
    .oxIntroCard{
      width:min(560px, 100%);
      background: rgba(255,255,255,.92);
      border:1px solid rgba(0,0,0,.08);
      border-radius:18px;
      box-shadow: 0 18px 60px rgba(0,0,0,.18);
      overflow:hidden;
      position:relative;
max-height: calc((var(--vh, 1vh) * 100) - (32px + var(--sat) + var(--sab)));
    }
    .oxIntroTop{
      padding:16px 16px 0;
      text-align:center;
    }
    .oxIntroBadge{
      display:inline-block;
      padding:10px 14px;
      border-radius:16px;
      background: rgba(47,140,255,.12);
      border:1px solid rgba(47,140,255,.18);
      font-weight:1000;
      font-size: calc(16px + var(--fontUp));
      color:#2D70C9;
    }
    .oxIntroSub{
      margin-top:10px;
      display:inline-block;
      padding:10px 14px;
      border-radius:16px;
      background: rgba(31,36,48,.04);
      color: rgba(31,36,48,.86);
      border:1px solid rgba(0,0,0,.06);
      font-weight:1000;
      font-size: calc(14px + var(--fontUp));
    }
    .oxIntroHint{
      margin-top:14px;
      color: rgba(31,36,48,.76);
      font-size: calc(13px + var(--fontUp));
      line-height:1.55;
      padding: 0 6px;
    }
    .oxIntroPreview{
      padding:14px 16px 0;
    }
    .oxIntroBottom{
      display:flex;
      flex-direction:column;
      gap:10px;
      padding:14px 16px 16px;
    }

    /* ox ì‹œì‘í•˜ê¸° ë²„íŠ¼ê³¼ ë’¤ë¡œê°€ê¸° ë²„íŠ¼ */
    .oxIntroBtn{
      border:none;
      width:100%;
      padding:12px 14px;
      border-radius:18px;
      font-weight:1000;
      cursor:pointer;
      user-select:none;
      font-size: calc(14px + var(--fontUp));
      letter-spacing:-.02em;
      transition: transform .06s ease, filter .12s ease;
    }
    .oxIntroBtn:active{ transform: scale(.98); filter: brightness(.98); }
    .oxIntroBtn.start{
      background: linear-gradient(180deg, var(--primary), var(--primary2));
      color:#fff;
      border: none;
      box-shadow: 0 14px 26px rgba(47,140,255,.20);
padding:12px 14px;
  font-size: calc(14px + var(--fontUp));
    }
    .oxIntroBtn.back{
      background: #fff;
      color: var(--primary);
      border:1px solid rgba(0,0,0,.10);
      box-shadow: 0 10px 18px rgba(25,28,38,.08);
    }

    /* OX í€´ì¦ˆ ëª¨ë“œ */
    #quizOverlay.oxMode .quizNextBtn{ display:none; }
    #quizOverlay.oxMode .oxExitBtn{ display:inline-flex; }
    #quizOverlay.oxMode .modalHead .ttl{ font-weight:1000; }
    #quizOverlay.oxMode .modalBody{ padding:14px 14px 12px; }
    #quizOverlay.oxMode .choices{ gap:10px; }

/* OX í”¼ë“œë°± ë†’ì´ */
#quizOverlay.oxMode .fb{
  overflow: visible;
  max-height: none;
}

/* OX ëª¨ë“œ ìŠ¬ë¼ì´ë“œ ë†’ì´ 2  */
#quizOverlay.oxMode .modal{
  min-height: 70vh;
}


    .oxMsgCard{
      border:1px solid rgba(0,0,0,.10);
      border-radius:16px;
      overflow:hidden;
      background:#fff;
      box-shadow: 0 14px 30px rgba(25,28,38,.10);
    }
    .oxMsgTop{
      padding:10px 12px;
      background: rgba(31,36,48,.04);
      border-bottom:1px solid rgba(0,0,0,.06);
      font-weight:1000;
      letter-spacing:-.02em;
      text-align:left;
      font-size: calc(15px + var(--fontUp));
      color: rgba(31,36,48,.92);
    }
    .oxMsgBody{
      padding:12px;
      background: linear-gradient(180deg, rgba(188,211,230,.55), rgba(188,211,230,.38));
      position:relative;
    }
    .oxMsgBubble{
      background:#fff;
      border:1px solid rgba(0,0,0,.08);
      border-radius:14px;
      padding:10px 12px;
      width:min(420px, 100%);
      box-shadow: 0 10px 18px rgba(25,28,38,.08);
    }
    .oxWeb{
      font-weight:1000;
      color: rgba(31,36,48,.70);
      font-size: calc(12px + var(--fontUp));
      margin-bottom:6px;
    }
    .oxText{
      font-size: calc(13px + var(--fontUp));
      color: rgba(31,36,48,.92);
      line-height:1.5;
      word-break: keep-all;
    }
    .oxChoiceRow{
      display:flex;
      gap:10px;
      margin-top:12px;
    }
    .oxPickBtn{
      flex:1;
      border:none;
      padding:14px 12px;
      border-radius:18px;
      background: linear-gradient(180deg, var(--primary), var(--primary2));
      color:#fff;
      font-weight:1000;
      cursor:pointer;
      user-select:none;
      font-size: calc(18px + var(--fontUp));
      box-shadow: 0 12px 22px rgba(47,140,255,.22);
      transition: transform .06s ease, filter .12s ease;
    }
    .oxPickBtn:active{ transform: scale(.98); filter: brightness(.98); }

    .oxPickBtn.selected{
      outline: 3px solid rgba(255,255,255,.92);
      box-shadow: 0 14px 28px rgba(47,140,255,.28);
    }

    .oxMark{
      display:inline-block;
      border-radius:8px;
      padding:1px 4px;
      transition: box-shadow .12s ease, outline .12s ease, background .12s ease;
    }
    .oxMark.hi{
      background: rgba(255,228,77,.55);
      outline: 2px solid rgba(255,193,7,.45);
      box-shadow: 0 10px 18px rgba(255,228,77,.14);
    }
    .oxLink{
      display:inline-block;
      color:#0B63FF;
      text-decoration: underline;
      font-weight:1000;
      word-break: break-all;
      overflow-wrap:anywhere;
      position:relative;
    }
    .oxLink.hi{
      outline: 2px solid rgba(255,59,48,.55);
      background: rgba(255,59,48,.10);
      border-radius:8px;
      padding:1px 4px;
    }
    .oxLink.hi::after{
      content:"ğŸš«";
      position:absolute;
      right:-14px;
      top:-10px;
      font-size: 18px;
      transform: rotate(-12deg);
    }
    .oxUrgency.hi{
      background: rgba(255,59,48,.10);
      outline: 2px dashed rgba(255,59,48,.45);
    }

    .oxFbWrap{
      display:flex;
      flex-direction:column;
      gap:10px;
    }
    .oxActionRow{
      margin-top:10px;
      display:flex;
      gap:10px;
      flex-wrap:wrap;
    }
    .oxActionBtn{
      flex:1;
      border:none;
      padding:12px 14px;
      border-radius:16px;
      font-weight:1000;
      cursor:pointer;
      user-select:none;
      font-size: calc(14px + var(--fontUp));
      transition: transform .06s ease, filter .12s ease;
    }
    .oxActionBtn:active{ transform: scale(.98); filter: brightness(.98); }
    .oxActionBtn.next{
      background: linear-gradient(180deg, var(--primary), var(--primary2));
      color:#fff;
      box-shadow: 0 14px 22px rgba(47,140,255,.22);
    }
    .oxActionBtn.retry{
      background: linear-gradient(180deg, rgba(255,244,178,.96), rgba(255,232,120,.96));
      color: rgba(0,0,0,.82);
      border:1px solid rgba(0,0,0,.10);
      box-shadow: 0 14px 22px rgba(255,228,77,.18);
    }

    /* ====== ì „í™”í˜• ì²´í—˜(ìŠ¬ë¼ì´ë“œ ë¬¸ì œ) ====== */
    #quizOverlay.callMode .quizNextBtn{ display:none !important; }
    /* ë¬¸ì œ ë‚˜ê°€ê¸° ë²„íŠ¼: OXì²˜ëŸ¼ ë…¸ì¶œ */
    #quizOverlay.callMode .oxExitBtn{ display:inline-flex !important; }
/* ê¸€ì”¨ ì˜¬ë¦¬ê¸° */
#quizOverlay.callMode .qPrompt{
  font-size: calc(14px + var(--fontUp) + 1pt);
}
/* ì „í™”í˜• ì²´í—˜ ë¬¸ì œ ì§ˆë¬¸ ì¤„ê°„ê²©(ìƒí•˜ ìê°„) */
#quizOverlay.callMode .qPrompt{
  line-height: 1.8;  
}


    /* OX ë¬¸ì œí’€ê¸°ì™€ ë™ì¼í•œ ìŠ¬ë¼ì´ë“œ í¬ê¸°(ë†’ì´) */
    #quizOverlay.callMode .modal{ min-height: 80vh; }
    #quizOverlay.callMode .modalBody{ padding:14px 14px 12px; overflow: hidden !important; }
    #quizOverlay.callMode .fb{ overflow: visible !important; max-height: none !important; }
    #quizOverlay.callMode .choices{ gap:10px; }

    .callPickBtn{
      width:100%;
      border:none;
      padding:14px 14px;
      border-radius:18px;
      background: linear-gradient(180deg, rgba(255,244,178,.96), rgba(255,232,120,.96));
      color: rgba(0,0,0,.86);
      border:1px solid rgba(0,0,0,.10);
      box-shadow: 0 14px 22px rgba(255,228,77,.18);
      font-weight:1000;
      cursor:pointer;
      user-select:none;
      font-size: calc(14px + var(--fontUp));
      text-align:left;
      letter-spacing:-.02em;
      transition: transform .06s ease, filter .12s ease, box-shadow .12s ease;
    }
    .callPickBtn:active{ transform: scale(.99); filter: brightness(.99); }
    .callPickBtn.selected{
      outline: 3px solid rgba(255,255,255,.92);
      box-shadow: 0 16px 28px rgba(255,228,77,.22);
    }


    /* ====== ì˜ˆë°©ìˆ˜ì¹™ê³¼ ê³µìœ í•˜ê¸° ====== */
    .slider{display:flex;gap:10px;overflow:hidden;position:relative}
    .slideTrack{display:flex;transition: transform .25s ease;will-change: transform}
    .slide{width: calc(100vw - 24px);max-width: 560px;flex:0 0 auto;padding:16px}
    .dots{display:flex;justify-content:center;gap:8px;margin-top:10px}
    .dot{width:8px;height:8px;border-radius:999px;background: rgba(31,36,48,.18)}
    .dot.on{background: var(--primary)}
    .reportWrap{max-width:560px;margin:0 auto}

    /* ====== ë©”ì¸í™”ë©´ ë°°ê²½ ì´ë¯¸ì§€ ====== */
    .homeHeroText{
      border-radius:16px;
      overflow:hidden;
      position:relative;
      padding:10px 16px;
      min-height: clamp(110px, 34vw, 160px);
    }
    .homeHeroText.hasBg::before{
      content:"";
      position:absolute; inset:0;
      background-image: var(--home-hero-bg, none);
      background-size: contain;
      background-position: center center;
      background-repeat: no-repeat;
      opacity: .22;
      pointer-events:none;
    }
    .homeHeroText > *{ position:relative; z-index:1; }

    .guidePh{
      height:160px;
      border-radius:16px;
      border:1px solid rgba(0,0,0,.06);
      background:#fff;
      display:flex;flex-direction:column;justify-content:center;align-items:center;
      gap:8px;
      text-align:center;
      padding:0;
      overflow:hidden;
    }
    .guidePh img{width:100%;height:100%;object-fit:contain;border-radius:14px;background:#fff;}
    .guidePh .big{font-weight:1000;letter-spacing:-.02em;font-size: calc(14px + var(--fontUp))}
    .guidePh .small{font-size: calc(12.5px + var(--fontUp));color:rgba(31,36,48,.70);line-height:1.45}

    /* ====== ì „í™”í˜•(ì „ì²´í™”ë©´ìœ¼ë¡œ) ====== */
    .callIncoming{
      height: calc(var(--vh, 1vh) * 100);
      display:flex;flex-direction:column;justify-content:space-between;
      padding: calc(18px + var(--sat)) 16px calc(22px + var(--sab));
      background:
        radial-gradient(900px 700px at 50% -20%, rgba(47,140,255,.38), transparent 60%),
        linear-gradient(180deg, rgba(20,24,30,1), rgba(20,24,30,.86));
      color:#fff;overflow:hidden;position:relative;
    }
    .callTopInfo{margin-top:46px;text-align:center;}
    .callTopInfo .name{margin:0;font-weight:1500 !important;font-size: calc(22px + var(--fontUp));letter-spacing:-.02em}
    .callTopInfo .num{margin:10px 0 0;color:rgba(255,255,255,.78);font-size: calc(13px + var(--fontUp))}
    .callHint{text-align:center;color:rgba(255,255,255,.70);font-size: calc(12px + var(--fontUp));margin-top:10px;}
    .callActions{display:grid;grid-template-columns: 1fr 1fr;gap:12px;}
    .callBtn{border:none;padding:14px 12px;border-radius: 18px;font-weight:1000;cursor:pointer;color:#fff;font-size: calc(14px + var(--fontUp));}
    .callAccept{background: linear-gradient(180deg, rgba(43,196,138,1), rgba(20,160,107,1))}
    .callReject{background: linear-gradient(180deg, rgba(255,107,107,1), rgba(220,73,73,1))}

    .callInPre{
      height: calc(var(--vh, 1vh) * 100);
      display:flex;flex-direction:column;align-items:center;justify-content:center;
      background: linear-gradient(180deg, rgba(16,18,22,1), rgba(16,18,22,.92));
      color:#fff;
      position:relative;
      text-align:center;
      padding: 0 16px;
    }
    .callInPre .who{font-weight:1000;font-size: calc(18px + var(--fontUp));letter-spacing:-.02em}
    .callInPre .timer{margin-top:10px;color:rgba(255,255,255,.76);font-size: calc(13px + var(--fontUp))}
    .wave{margin-top:22px;display:flex;gap:6px;align-items:flex-end;height:44px;opacity:.85;}
    .bar{width:6px;border-radius:999px;background: rgba(255,255,255,.70);animation: w 0.55s ease-in-out infinite alternate;}
    .bar:nth-child(2){animation-duration:.45s}
    .bar:nth-child(3){animation-duration:.62s}
    .bar:nth-child(4){animation-duration:.39s}
    .bar:nth-child(5){animation-duration:.58s}
    @keyframes w { from{height:10px} to{height:44px} }

    /* ì „í™” í™”ë©´ í°íŠ¸ */
    .callIncoming, .callInPre{
      font-family: "Apple SD Gothic Neo","Noto Sans KR",system-ui,sans-serif !important;
      letter-spacing: -0.02em;
    }
    /* ë°œì‹ ì ì´ë¦„ ê¸€ì”¨ì²´ */
    .callTopInfo .name{ font-size: calc(24px + var(--fontUp)) !important; font-weight:1000; }
    /* ë²ˆí˜¸ í‘œì‹œ ê¸€ì”¨ì²´ */
    .callTopInfo .num{ font-size: calc(30px + var(--fontUp)) !important; color:rgba(255,255,255,.82) !important; }
    /* â€œì „í™”ê°€ ìš¸ë¦½ë‹ˆë‹¤â€¦â€ */
    .callHint{ font-size: calc(13px + var(--fontUp)) !important; }

    /* ====== ê²°ê³¼ ====== */
    .resultWrap{max-width:560px;margin:0 auto}
/* OX ê²°ê³¼ í™”ë©´ í°íŠ¸ */
.oxResultWrap, .oxResultWrap *{
  font-family:"Apple SD Gothic Neo","Noto Sans KR",system-ui,sans-serif !important;
  letter-spacing:-.02em;
}

.oxResultWrap{
  font-size: 13.5px; /* ê²°ê³¼ í™”ë©´ ê¸°ë³¸ ê¸€ì”¨ ì¡°ì ˆ */
}
    .ringWrap{display:flex;flex-direction:column;align-items:center;justify-content:center;gap:10px;padding:8px 0 2px;}
    .ringSvgWrap{width:160px;height:160px;display:grid;place-items:center;position:relative;}
    .ringCenter{position:absolute;display:flex;flex-direction:column;align-items:center;justify-content:center;text-align:center;gap:2px;}
    .ringCenter .n{font-size: calc(34px + var(--fontUp));font-weight:1000;letter-spacing:-.03em}
    .badgeType{
      display:inline-block;
      padding:8px 10px;border-radius:999px;
      border:1px solid rgba(151,71,255,.18);
      font-weight:1000;font-size: calc(12px + var(--fontUp));
      text-align:center;width: fit-content;margin: 0 auto;
    }

    .bars{display:flex;flex-direction:column;gap:10px;margin-top:12px}
    .barRow{display:grid;grid-template-columns: 112px 1fr 42px;gap:10px;align-items:center;}
    .barRow .k{font-weight:1000;font-size: calc(12.5px + var(--fontUp));color:rgba(31,36,48,.80)}
    .barTrack{height:12px;border-radius:999px;background: rgba(31,36,48,.10);overflow:hidden;border:1px solid rgba(0,0,0,.06);}
    .barFill{height:100%;width: calc(var(--v)*1%);background: var(--bar-color, var(--primary));border-radius:999px;}
    .barRow .v{font-weight:1000;font-size: calc(12px + var(--fontUp));color:rgba(31,36,48,.70);text-align:right}

    .plainList{margin-top:12px;color:rgba(31,36,48,.80);font-size: calc(13px + var(--fontUp));line-height:1.6;}
    .plainList .ttl{font-weight:1000;color:rgba(31,36,48,.92);margin-bottom:6px}
    .pill{
      display:inline-block;
      padding:6px 10px;border-radius:12px;
      border:1px solid rgba(0,0,0,.08);
      background: rgba(31,36,48,.04);
      font-weight:900;
      font-size: calc(12px + var(--fontUp));
      margin:4px 6px 0 0;
    }

    /* ====== ë©”ë‰´ ====== */
    .menuList{display:flex;flex-direction:column;gap:10px;}

    /* ====== ëŒ€í™” ì¤‘ ê³µë¬¸ í‘œì‹œ ë ê¹Œ ====== */
    .imgCard{display:flex;flex-direction:column;gap:8px;}
    .imgCard .ph{
      width:260px;
      max-width:100%;
      height:160px;
      border-radius:14px;
      border:1px solid rgba(0,0,0,.10);
      background: linear-gradient(180deg, rgba(31,36,48,.04), rgba(31,36,48,.02));
      display:flex;
      align-items:center;
      justify-content:center;
      font-weight:950;
      color:rgba(31,36,48,.55);
      text-align:center;
      padding:12px;
      font-size: calc(13px + var(--fontUp));
    }
    .imgCard img{
      width:260px;
      max-width:100%;
      height:auto;
      border-radius:14px;
      border:1px solid rgba(0,0,0,.08);
      display:block;
    }
    .imgCard .cap{
      font-size: calc(12.5px + var(--fontUp));
      color:rgba(31,36,48,.70);
      line-height:1.45;
    }

    /* ====== ë§Œë“ ì´(í¬ë ˆë”§) ====== */
    .creditsStage{
      height:70vh;
      background:#fff;
      color:rgba(31,36,48,.82);
      border-radius:16px;
      overflow:hidden;
      position:relative;
      border:none;
    }
    .creditsRoll{
      position:absolute;
      left:0; right:0;
      top:100%;
      bottom:auto;
      bottom:-120%;
      padding:24px 18px 60px;
      text-align:center;
      line-height:1.8;
      font-weight:900;
      letter-spacing:-.02em;
      animation: creditsRoll 21s linear forwards;
      font-size: calc(14px + var(--fontUp));
    }
    .creditsRoll .small{
      font-weight:800;
      color:rgba(31,36,48,.55);
      font-size: calc(13px + var(--fontUp));
    }
    @keyframes creditsRoll{
      from{ transform: translateY(0); }
      to{ transform: translateY(calc(-100% - 70vh)); }
    }

    .pushCard{display:flex;align-items:center;justify-content:center;text-align:center;}
    .pushBodyOnly{
      font-weight:1000;
      font-size: calc(15px + var(--fontUp));
      color: rgba(255,255,255,.85);
      line-height:1.35;
      padding: 6px 10px;
    }

    #quizOverlay.show{ pointer-events:none; }
    #quizOverlay.show .modal{ pointer-events:auto; }

    /* ====== í€´ì¦ˆ ì‹œíŠ¸ ì ‘ê¸°/í¼ì¹˜ê¸° ====== */
    .overlay.sheet{ --sheet-peek: 58px; }
    .overlay.sheet .modal{transition: transform .22s ease;will-change: transform;}
    .overlay.sheet.collapsed{ background: transparent; }
    .overlay.sheet.collapsed .modal{transform: translateY(calc(100% - var(--sheet-peek)));}

    /* ê°€ìš´ë° í™”ì‚´í‘œì™€ ì§„í–‰í‘œì‹œ(1/3 ë“±) */
    .modalHead{ position:relative; }
    .sheetCenter{
      position:absolute;
      left:50%;
      top:50%;
      transform: translate(-50%, -50%);
      display:flex;
      align-items:center;
      justify-content:center;
      gap:8px;
    }
    .sheetToggle{
      all: unset;
      width:34px;height:34px;
      border-radius:999px;
      border:1px solid rgba(31,36,48,.14);
      background:#fff;
      display:grid;
      place-items:center;
      box-shadow: 0 8px 18px rgba(25,28,38,.10);
      cursor:pointer;
      user-select:none;
    }
    .sheetToggle .chev{
      width:8px;height:8px;
      border-right:2px solid rgba(31,36,48,.55);
      border-bottom:2px solid rgba(31,36,48,.55);
      transform: rotate(45deg);
      margin-top:-2px;
    }
    .overlay.sheet.collapsed .sheetToggle .chev{
      transform: rotate(-135deg);
      margin-top:2px;
    }

    .quizProgress{
      font-weight:1000;
      font-size: calc(12.5px + var(--fontUp));
      color: rgba(31,36,48,.70);
      padding:6px 10px;
      border-radius:999px;
      border:1px solid rgba(31,36,48,.12);
      background: rgba(255,255,255,.95);
      box-shadow: 0 8px 18px rgba(25,28,38,.08);
      line-height:1;
      white-space:nowrap;
    }
    .quizProgress.hidden{ display:none; }

    /* ====== ê²°ê³¼ í™”ë©´ ë°•ìŠ¤ìš© ====== */
    .boxedSection{
      border:1px solid rgba(0,0,0,.10);
      border-radius:16px;
      background: rgba(31,36,48,.02);
      padding:12px 12px;
      margin-top:12px;
    }
    .boxedSection.compact{ padding:8px 10px; }

    /* === ëŒ€ì‹œë³´ë“œ === */
    .homeDashGrid{
      margin-top:12px;
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap:12px;
    }
    .homeTile{
      overflow:hidden;
      padding:0;
    }
    .homeTileHead{
      padding:10px 12px;
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:10px;
    }
    .homeTileHead .ttl{
      font-weight:1000;
      letter-spacing:-.02em;
      font-size:calc(14px + var(--fontUp));
      color:rgba(31,36,48,.92);
    }
    .homeTileBody{
      padding:12px 12px 12px;
    }
    .homeMiniMuted{
      margin-top:6px;
      color:rgba(31,36,48,.60);
      font-size:calc(12px + var(--fontUp));
      line-height:1.35;
    }
    .homeBigScore{
      font-weight:1000;
      letter-spacing:-.02em;
      font-size:calc(32px + var(--fontUp));
      line-height:1;
    }
    .homeBadge{
      display:inline-flex;
      align-items:center;
      gap:6px;
      padding:6px 10px;
      border-radius:999px;
      border:1px solid rgba(0,0,0,.08);
      font-weight:950;
      font-size:calc(12px + var(--fontUp));
      white-space:nowrap;
    }
    .homeBadge.sky{ background:rgba(79,163,255,.16); color:#2D70C9; }
    .homeBadge.green{ background:rgba(43,196,138,.16); color:#1D9A6C; border-color: rgba(43,196,138,.22); }
    .homeBadge.orange{ background:rgba(255,183,77,.22); color:#B86B1D; border-color: rgba(255,183,77,.26); }
    .homeBadge.red{ background:rgba(255,107,107,.16); color:#D45050; border-color: rgba(255,107,107,.22); }

    /* ì„¸ë¶€ êµ¬ê°„ ë°” */
    .homeSegWrap{
      margin-top:10px;
      position:relative;
    }
    .homeSegBar{
      display:flex;
      gap:6px;
      align-items:center;
      position:relative;
      padding:2px 2px;
      border-radius:999px;
      background: rgba(31,36,48,.04);
      border: 1px solid rgba(0,0,0,.06);
      overflow:hidden;
    }
    .homeSeg{
      flex:1;
      height:12px;
      border-radius:999px;
      background: linear-gradient(180deg, rgba(31,36,48,.10), rgba(31,36,48,.06));
      border:1px solid rgba(0,0,0,.06);
      position:relative;
      overflow:hidden;
    }
    .homeSeg.on{
      background: linear-gradient(180deg, rgba(47,140,255,.28), rgba(47,140,255,.12));
      border-color: rgba(47,140,255,.24);
      box-shadow: inset 0 0 0 1px rgba(47,140,255,.10);
    }
    .homeSegLabels{
      margin-top:8px;
      display:flex;
      gap:6px;
      justify-content:flex-start;
      font-size:calc(10.5px + var(--fontUp));
      color:rgba(31,36,48,.55);
      line-height:1.2;
    }
    .homeSegLabels > div{
      flex:1;
      text-align:center;
    }

    .homeSegMarker{
      position:absolute;
      top:50%;
      transform: translate(-50%, -50%);
      width:12px;height:12px;border-radius:999px;
      background:#2F8CFF;
      box-shadow: 0 10px 18px rgba(47,140,255,.35), 0 0 0 3px rgba(255,255,255,.92);
      pointer-events:none;
      opacity:0;
    }
    .homeSegMarker.on{ opacity:1; }

    /* ì ìˆ˜ ì•ˆë‚´í‘œ */
    .scoreTable{
      font-size: calc(13px + var(--fontUp));
    }
  </style>

<style id="polcare-request-patch-style">
  html, body { height: 100%; }
  body {
    margin: 0;
    -webkit-text-size-adjust: 100%;
    padding-top: env(safe-area-inset-top);
    padding-bottom: env(safe-area-inset-bottom);
    padding-left: env(safe-area-inset-left);
    padding-right: env(safe-area-inset-right);
    touch-action: manipulation;
  }

  .polcare-brand-press { transform: scale(0.98); opacity: 0.85; }
  #brandHome{ cursor:pointer; -webkit-tap-highlight-color: transparent; }

  body { -webkit-user-select: none; user-select: none; }
  button, input, textarea, select { -webkit-user-select: auto; user-select: auto; }

  .stack { align-items: flex-start; }
  .stack.me { align-items: flex-end; }
  .stack.other { align-items: flex-start; }

  .bubble{
    display: inline-block;
    width: fit-content;
    max-width: 100%;
    align-self: flex-start;
    border-radius: 14px;
  }

  .rowMsg.me .bubble{ align-self: flex-end; }

  .kakao .bubble.me{ border-top-right-radius: 14px; }
  .kakao .bubble.other{ border-top-left-radius: 14px; }

  .bubble .linkBtn{
    word-break: break-all !important;
    overflow-wrap: anywhere !important;
  }

  .introBox{
    font-family: "Apple SD Gothic Neo","Noto Sans KR",system-ui,sans-serif !important;
    letter-spacing: 0.0em;
    background: #fff !important;
    font-size: calc(15px + var(--fontUp)) !important;
    line-height: 1.7 !important;
  }

  .introBox *{
    font-family: "Apple SD Gothic Neo","Noto Sans KR",system-ui,sans-serif !important;
    letter-spacing: 0.0em;
    font-size: inherit !important;
  }

  .homeSegMarker{ display:none !important; }
</style>

</head>

<body>
  <div class="phone" aria-label="í”¼ì‹± ë²”ì£„ì˜ˆë°© ëª¨ì˜ì²´í—˜">
    <div id="banner" class="banner" role="button" aria-label="ì•Œë¦¼/í† ìŠ¤íŠ¸">
      <div>
        <div class="t1" id="bannerTitle">ì•Œë¦¼</div>
        <div class="t2" id="bannerBody">ë‚´ìš©</div>
      </div>
    </div>

    <div class="app" id="app">
      <header>
        <div class="brand">
          <div class="logo" id="brandHome" role="button" aria-label="í™ˆìœ¼ë¡œ ì´ë™">
            <span class="brandStrong">í´ì¼€ì–´</span><span class="brandLight">ê²½ì°°ê³¼ í•¨ê»˜í•˜ëŠ” í”¼ì‹± ë²”ì£„ ëª¨ì˜ì²´í—˜</span>
          </div>
          <div class="subtitle" id="brandSub"></div>
        </div>
        <div class="iconbtn" id="menuBtn" title="ë©”ë‰´">
          <div class="burger"><span></span></div>
        </div>
      </header>

      <main id="main"></main>

      <div class="overlay sheet" id="quizOverlay" aria-hidden="true">
        <div class="modal" role="dialog" aria-modal="true" aria-label="ë¬¸ì œ">
          <div class="modalHead">
            <div class="ttl" id="quizHeadTitle">ë¬¸ì œ</div>

            <div class="sheetCenter">
              <button type="button" class="sheetToggle" id="quizSheetToggle"
                aria-label="ë¬¸ì œì°½ ì ‘ê¸°/í¼ì¹˜ê¸°" aria-expanded="true">
                <span class="chev"></span>
              </button>
              <div class="quizProgress hidden" id="quizProgress" role="status" aria-live="polite"></div>
            </div>

            <!-- O/X ë¬¸ì œ ë‚˜ê°€ê¸° ë²„íŠ¼ -->
            <button type="button" class="oxExitBtn" id="oxExitBtn">ë¬¸ì œ ë‚˜ê°€ê¸°</button>

            <button type="button" class="quizNextBtn" id="quizNextBtn" disabled>ë‹¤ìŒ</button>
          </div>
          <div class="modalBody">
            <p class="qPrompt" id="qPrompt"></p>
            <!-- O/X ì²´í—˜ìš© ë³´ì—¬ì§€ëŠ” í™”ë©´ -->
            <div id="qVisual"></div>
            <div class="choices" id="qChoices"></div>
          </div>
          <div class="fb" id="qFeedback">
            <div class="big" id="fbTitle">í”¼ë“œë°±</div>
            <div id="fbBody"></div>
          </div>
        </div>
      </div>

      <div class="overlay" id="menuOverlay" aria-hidden="true">
        <div class="modal" role="dialog" aria-modal="true" aria-label="ë©”ë‰´">
          <div class="modalHead">
            <div class="ttl">ë©”ë‰´</div>
            <button class="iconbtn" id="menuClose" title="ë‹«ê¸°" aria-label="ë‹«ê¸°">âœ•</button>
          </div>
          <div class="modalBody">
            <div class="menuList">
              <button class="btn ghost block" id="goHomeMenu">í™ˆ</button>
              <button class="btn primary block" id="goExpMenu">ì²´í—˜í•˜ê¸°</button>
              <button class="btn ghost block" id="shareMenu">ê³µìœ í•˜ê¸°</button>
              <button class="btn ghost block" id="promoVideoMenu">í™ë³´ì˜ìƒ</button>
              <button class="btn ghost block" id="creditsmenu">ë§Œë“ ì´</button>
            </div>
          </div>
        </div>
      </div>

      <div class="overlay" id="creditsOverlay" aria-hidden="true">
        <div class="modal" role="dialog" aria-modal="true" aria-label="ë§Œë“ ì´">
          <div class="modalHead">
            <div class="ttl">ë§Œë“ ì´</div>
            <button class="iconbtn" id="creditsClose" title="ë‹«ê¸°" aria-label="ë‹«ê¸°">âœ•</button>
          </div>
          <div class="modalBody">
            <div class="creditsStage">
              <div class="creditsRoll" id="creditsRoll"></div>
            </div>
            <div style="margin-top:10px;color:rgba(31,36,48,.70);font-size:calc(12.5px + var(--fontUp));line-height:1.5;text-align:center;"></div>
          </div>
        </div>
      </div>

    </div>
  </div>

<script>
if(!String.prototype.replaceAll){
  String.prototype.replaceAll = function(search, replacement){
    return this.split(search).join(replacement);
  };
}

/* íƒœê·¸/ë‚´ìš© ë³µì‚¬ ë°©ì§€ì™€ ê¸¸ê²Œëˆ„ë¥´ê¸° ë°©ì§€(í—ˆì ‘ì£„ì†¡ã…ã…ã…) */
(function(){
  const isEditable = (el)=>{
    if(!el) return false;
    try{
      return !!el.closest('input,textarea,select,[contenteditable="true"]');
    }catch(e){ return false; }
  };
  const prevent = (e)=>{
    if(isEditable(e.target)) return;
    e.preventDefault();
  };
  document.addEventListener("contextmenu", prevent);
  document.addEventListener("copy", prevent);
  document.addEventListener("cut", prevent);
  document.addEventListener("selectstart", prevent);
  document.addEventListener("dragstart", prevent);
})();

window.CASES = window.CASES || [];
window.SCENARIOS = window.SCENARIOS || {};
window.DATA_CATEGORIES = window.DATA_CATEGORIES || {};

function V(verify=0, link=0, otp=0, urgency=0, money=0, context=0){
  return { verify, link, otp, urgency, money, context };
}

/* === ë§í¬ì¹¸/í‘œì‹œ === */
const CALLER_NAME_OVERRIDE = "";
const CALLER_NUMBER_OVERRIDE = "";

/* ë°°ê²½ì´ë¯¸ì§€ ì£¼ì†Œ */
const HOME_HERO_BG_URL = "https://koreapolkim.github.io/pict/police.png";

/* ì•ˆë‚´ë©”ì‹œì§€ */
const HOME_GUIDE_SLIDES = [
  { img: "https://koreapolkim.github.io/an/an.jpg", href: "https://koreapolkim.github.io/an/an.jpg" },
  { img: "https://koreapolkim.github.io/inf/knpa.jpg",  href: "https://www.counterscam112.go.kr/" },
];

/* ì†Œë¦¬ ë§í¬ */
const SOUND_NOTIFY_URL = "https://koreapolkim.github.io/p-m/in.mp3";
const SOUND_RINGTONE_URL = "https://koreapolkim.github.io/p-m/mu.mp3";
const SOUND_CALL_VOICE_URL = "";

/* === ì•ˆì „ì§€ìˆ˜ì™€ ë§ˆì§€ë§‰ ê²°ê³¼ ë³´ê¸° === */
const LS_LAST_SCORE = "polcare_last_score";
const LS_LAST_AT = "polcare_last_at";

/* ë§ˆì§€ë§‰ìœ¼ë¡œ í™•ì¸í•œ ê²°ê³¼ í™”ë©´ ê°€ê¸° */
const LS_LAST_EXP = "polcare_last_exp";
const LS_LAST_SESSION = "polcare_last_session";

/* ê³µìœ  ì‹œ ë‹¤ë¥¸ê¸°ê¸° êµ¬ë¶„ */
const LS_DEVICE_ID = "polcare_device_id";
const LS_SHARED_VIEW = "polcare_shared_view";

/* O/X ì²´í—˜ ì €ì¥ */
const LS_OX_LAST = "polcare_ox_last";

/* ë””ë°”ì´ìŠ¤ ID ìƒì„± ë° ì¡°íšŒ */
function getOrCreateDeviceId(){
  try{
    let id = localStorage.getItem(LS_DEVICE_ID);
    if(id && String(id).trim()) return id;
    id = (window.crypto && crypto.randomUUID) ? crypto.randomUUID() : (String(Date.now()) + "-" + Math.random().toString(16).slice(2));
    localStorage.setItem(LS_DEVICE_ID, id);
    return id;
  }catch(e){
    return "na";
  }
}

/* ê³µìœ  ë§í¬ë¡œ ë“¤ì–´ì˜¨ ê¸°ê¸°ëŠ” ì ìˆ˜ ì´ˆê¸°í™” */
function handleSharedLinkReset(){
  try{
    const sp = new URLSearchParams(location.search);
    const shared = sp.get("shared");
    const did = sp.get("did");

    if(shared === "1"){
      const my = getOrCreateDeviceId();

      // ê³µìœ  ë§í¬ë¡œ ë“¤ì–´ì˜¨ ê¸°ê¸°ëŠ” 0ì 
      const isOtherDevice = (!did || !my || my === "na" || (did !== my));
      if(isOtherDevice){
        try{
          localStorage.removeItem(LS_LAST_SCORE);
          localStorage.removeItem(LS_LAST_AT);
          localStorage.removeItem(LS_LAST_EXP);
          localStorage.removeItem(LS_LAST_SESSION);
          localStorage.setItem(LS_SHARED_VIEW, "1");
        }catch(e){}
      }

      // í”¼ë¼ë¯¸í„° ì œê±°
      try{
        sp.delete("shared"); sp.delete("did");
        const newUrl = location.pathname + (sp.toString() ? ("?" + sp.toString()) : "") + location.hash;
        history.replaceState(null, "", newUrl);
      }catch(e){}
    }
  }catch(e){}
}

handleSharedLinkReset();

/*** * ì‚¬íŒŒë¦¬/í¬ë¡¬ ì£¼ì†Œì°½ ë³´ì • ***/
function setVh(){
  const vv = window.visualViewport;
  const h = vv ? vv.height : window.innerHeight;   
  document.documentElement.style.setProperty('--vh', (h * 0.01) + 'px');
}

setVh();

window.addEventListener('resize', setVh);
window.addEventListener('orientationchange', setVh);

if (window.visualViewport) {
  window.visualViewport.addEventListener('resize', setVh);
  window.visualViewport.addEventListener('scroll', setVh); 
}

/*** ì—°ê²° ***/
const getCASES = ()=> Array.isArray(window.CASES) ? window.CASES : [];
const getSCENARIOS = ()=> (window.SCENARIOS && typeof window.SCENARIOS === "object") ? window.SCENARIOS : {};
const getCATS = ()=> (window.DATA_CATEGORIES && typeof window.DATA_CATEGORIES === "object") ? window.DATA_CATEGORIES : {};

/*** ì‰¬ìš´ ë§ë¡œ ***/
function easyText(str){
  const s = String(str ?? "");
  if(!s.trim()) return s;

  const phrase = [
    [/ê¸‰í•¨Â·ë¹„ë°€Â·ì¬ì´‰ì€\s*ë©ˆì¶¤\s*ì‹ í˜¸ì˜ˆìš”\.?/g, "ì§€ê¸ˆ ë‹¹ì¥ í•˜ë¼ê³  ì¬ì´‰í•˜ê±°ë‚˜ â€˜ë¹„ë°€â€™ì´ë¼ í•˜ë©´ ì‚¬ê¸°(í”¼ì‹±)ì¼ ê°€ëŠ¥ì„±ì´ ì»¤ìš”!"],
    [/ê¸‰í•¨\/ë§í¬\/ì¸ì¦\/ì†¡ê¸ˆ ìš”êµ¬ëŠ”\s*â€˜ë©ˆì¶¤â€™\s*ì‹ í˜¸ì˜ˆìš”\.?/g, "ì¬ì´‰ + ì£¼ì†Œ(ë§í¬/URL) + ì¸ì¦ë²ˆí˜¸(OTP) + ëˆ ì´ì•¼ê¸°ê°€ ë‚˜ì˜¤ë©´, ì‚¬ê¸°(í”¼ì‹±)ì¼ ê°€ëŠ¥ì„±ì´ ì»¤ìš”!"],
    [/ë©ˆì¶¤\s*â†’\s*ê³µì‹\s*ê²½ë¡œ\s*í™•ì¸/g, "ë©ˆì¶”ê¸° â†’ ê³µì‹ ì±„ë„ë¡œ ë‹¤ì‹œ í™•ì¸í•˜ê¸°(ê²€ì¦)"],
    [/ê¸°ì¡´ ë²ˆí˜¸Â·ê³µì‹ ì±„ë„ë¡œ ì¬í™•ì¸/g, "ì €ì¥ëœ ë²ˆí˜¸/ê³µì‹ ë²ˆí˜¸ë¡œ ë‹¤ì‹œ ì „í™”í•´ì„œ í™•ì¸(ì½œë°±)"],
    [/ë§í¬ ëŒ€ì‹  ê³µì‹ ì•±\/ì›¹ ì§ì ‘ ì ‘ì†/g, "ë¬¸ìì— ìˆëŠ” ì£¼ì†Œ(ë§í¬/URL)ëŠ” ëˆ„ë¥´ì§€ ë§ê³ , ê³µì‹ ì•±/í™ˆí˜ì´ì§€ë¥¼ ì§ì ‘ ì—´ê¸°"],
    [/OTPÂ·ì‹ ë¶„ì¦Â·ë¹„ë°€ë²ˆí˜¸ëŠ” ê³µìœ  ê¸ˆì§€/g, "ì¸ì¦ë²ˆí˜¸(OTP)Â·ì‹ ë¶„ì¦Â·ë¹„ë°€ë²ˆí˜¸ëŠ” ì ˆëŒ€ ì•Œë ¤ì£¼ì§€ ì•Šê¸°"],
  ];

  let out = s;
  for(const [re, rep] of phrase) out = out.replace(re, rep);

  const word = [
    [/ë³´ì´ìŠ¤í”¼ì‹±/g, "ì „í™” ì‚¬ê¸°(ë³´ì´ìŠ¤í”¼ì‹±)"],
    [/ìŠ¤ë¯¸ì‹±/g, "ë¬¸ì ì‚¬ê¸°(ìŠ¤ë¯¸ì‹±)"],
    [/í”¼ì‹±/g, "ì‚¬ê¸°(í”¼ì‹±)"],
    [/\bOTP\b/g, "ì¸ì¦ë²ˆí˜¸(OTP)"],
    [/URL/g, "ì£¼ì†Œ(URL)"],
    [/ë„ë©”ì¸/g, "ì£¼ì†Œ(ë„ë©”ì¸)"],
    [/ë§í¬/g, "ì£¼ì†Œ(ë§í¬)"],
    [/ì½œë°±/g, "ë‹¤ì‹œ ì „í™” í™•ì¸(ì½œë°±)"],
    [/ê²€ì¦/g, "ë‹¤ì‹œ í™•ì¸(ê²€ì¦)"],
  ];
  for(const [re, rep] of word) out = out.replace(re, rep);

  return out;
}

/*** ì²´í—˜ ì‹¤í–‰ ì¤‘ë‹¨ ***/
function makeRun(){
  return {
    aborted:false,
    timeouts:new Set(),
    intervals:new Set(),
    audios:new Set(),
    audioCtxs:new Set(),
    abort(){
      if(this.aborted) return;
      this.aborted = true;
      for(const t of this.timeouts) clearTimeout(t);
      for(const i of this.intervals) clearInterval(i);
      this.timeouts.clear(); this.intervals.clear();
      for(const a of this.audios){ try{a.pause(); a.currentTime=0;}catch(e){} }
      this.audios.clear();
      for(const c of this.audioCtxs){ try{c.close()}catch(e){} }
      this.audioCtxs.clear();
      try{ document.getElementById("quizOverlay").classList.remove("show"); }catch(e){}
      try{ document.getElementById("quizOverlay").classList.remove("oxMode"); }catch(e){}
      try{ document.getElementById("quizOverlay").classList.remove("callMode"); }catch(e){}
    },
    setTimeout(fn, ms){
      const id = setTimeout(()=>{ this.timeouts.delete(id); if(!this.aborted) fn(); }, ms);
      this.timeouts.add(id); return id;
    },
    setInterval(fn, ms){
      const id = setInterval(()=>{ if(this.aborted) return; fn(); }, ms);
      this.intervals.add(id); return id;
    }
  };
}

const state = {
  route:{ name:"home", params:{} },
  history:[],
  analytics:{ sessions:[], totals:null },
  profile:{ gender:null, age:null, name:"", workplace:"" },
  pendingExp:null,
  run:null,

  /* O/X ì²´í—˜ ìƒíƒœ */
  ox:{
    session:null
  }
};

const DIMENSIONS = [
  { key:"verify", label:"ê²€ì¦/ì½œë°±", tip:"ì €ì¥ëœ ë²ˆí˜¸Â·ê³µì‹ ë²ˆí˜¸ë¡œ ë‹¤ì‹œ ì „í™”í•´ í™•ì¸(ì½œë°±)" },
  { key:"link",   label:"ë§í¬/ë„ë©”ì¸", tip:"ë¬¸ì ì† ì£¼ì†Œ(ë§í¬/URL)ëŠ” ëˆ„ë¥´ì§€ ë§ê³ , ê³µì‹ ì•±/í™ˆí˜ì´ì§€ë¥¼ ì§ì ‘ ì—´ê¸°" },
  { key:"otp",    label:"ì¸ì¦/ê°œì¸ì •ë³´", tip:"ì¸ì¦ë²ˆí˜¸(OTP)Â·ì‹ ë¶„ì¦Â·ë¹„ë°€ë²ˆí˜¸ëŠ” ì ˆëŒ€ ì•Œë ¤ì£¼ì§€ ì•Šê¸°" },
  { key:"urgency",label:"ê¸´ê¸‰/ì••ë°•", tip:"ì¬ì´‰í•˜ê±°ë‚˜ â€˜ë¹„ë°€â€™ì´ë¼ í•˜ë©´ ì‚¬ê¸°(í”¼ì‹±) ì˜ì‹¬" },
  { key:"money",  label:"ê¸ˆì „/ì§€ì‹œ", tip:"ëˆ ë³´ë‚´ê¸°/ê²°ì œ/ëŒ€ë¦¬êµ¬ë§¤ ìš”êµ¬ëŠ” ë¨¼ì € ì‚¬ì‹¤ í™•ì¸" },
  { key:"context",label:"ë§¥ë½ ì ê²€", tip:"í‰ì†Œ ë§íˆ¬/ìš”ì²­ ë°©ì‹ì´ ë‹¤ë¥´ë©´ í•œ ë²ˆ ë” ì˜ì‹¬" },
];

function resetTotals(){
  state.analytics.totals = Object.fromEntries(DIMENSIONS.map(d=>[d.key, {sum:0, max:0}]));
}
resetTotals();

const appEl = document.getElementById("app");
const main = document.getElementById("main");

/*** ì „ì²´í™”ë©´ ëª¨ë“œ ***/
function applyLayoutMode(routeName){
  const full = (routeName === "push_gate" || routeName === "exp_messenger" || routeName === "exp_call");
  appEl.classList.toggle("fullscreen", full);
}

/*** ë¼ìš°íŒ… ***/
function isExperienceRoute(name){
  return (name === "exp_messenger" || name === "exp_call" || name === "push_gate" || name === "ox_intro");
}
function go(name, params = {}, replace = false){
  const leavingExp = isExperienceRoute(state.route.name) && !isExperienceRoute(name);
  if(leavingExp && state.run){ state.run.abort(); state.run = null; }

  if(!replace) state.history.push({...state.route});
  state.route = { name, params };
  applyLayoutMode(name);
  render();
  main.scrollTop = 0;
}
function backToCaseList(){
  if(state.run){ state.run.abort(); state.run=null; }
  go("case_list",{},true);
}
function back(){
  const prev = state.history.pop();
  if(prev){
    if(isExperienceRoute(state.route.name) && state.run){ state.run.abort(); state.run=null; }
    state.route = prev;
    applyLayoutMode(prev.name);
    render();
    main.scrollTop = 0;
  }else{
    go("case_list", {}, true);
  }
}

/*** ë°°ë„ˆ ***/
const banner = document.getElementById("banner");
const bannerTitle = document.getElementById("bannerTitle");
const bannerBody = document.getElementById("bannerBody");
let bannerTimer = null;
let stickyNotifyTimer = null;

function clearStickyNotifyTimer(){
  if(stickyNotifyTimer){ clearTimeout(stickyNotifyTimer); stickyNotifyTimer = null; }
}

/* ë§í¬ ì‚¬ìš´ë“œ ì¬ìƒ */
function playUrlAudio(url, {loop=false, volume=1} = {}, run){
  try{
    if(!url || !String(url).trim()) return null;
    const a = new Audio(url);
    a.loop = !!loop;
    a.volume = Math.max(0, Math.min(1, volume));
    run?.audios?.add(a);
    a.play().catch(()=>{});
    return a;
  }catch(e){ return null; }
}

/* ì•Œë¦¼ ì†Œë¦¬ */
function loudNotify(run){
  if(SOUND_NOTIFY_URL && String(SOUND_NOTIFY_URL).trim()){
    playUrlAudio(SOUND_NOTIFY_URL, {loop:false, volume:1}, run);
    return;
  }
  try{
    const ctx = new (window.AudioContext || window.webkitAudioContext)();
    run?.audioCtxs?.add(ctx);

    const now = ctx.currentTime;
    const o1 = ctx.createOscillator();
    const o2 = ctx.createOscillator();
    const g = ctx.createGain();

    o1.type = "triangle";
    o2.type = "sine";
    o1.frequency.setValueAtTime(880, now);
    o2.frequency.setValueAtTime(1320, now);

    g.gain.setValueAtTime(0.0001, now);
    g.gain.exponentialRampToValueAtTime(0.18, now + 0.015);
    g.gain.exponentialRampToValueAtTime(0.0001, now + 0.14);

    g.gain.setValueAtTime(0.0001, now + 0.18);
    g.gain.exponentialRampToValueAtTime(0.16, now + 0.195);
    g.gain.exponentialRampToValueAtTime(0.0001, now + 0.36);

    o1.connect(g); o2.connect(g); g.connect(ctx.destination);
    o1.start(now); o2.start(now);
    o1.stop(now + 0.40); o2.stop(now + 0.40);

    setTimeout(()=>{ try{ctx.close()}catch(e){} }, 500);
  }catch(e){}
}

function showBanner(title, body, sticky=false){
  bannerTitle.textContent = title || "ì•Œë¦¼";
  bannerBody.textContent = body || "";
  banner.classList.add("show");
  clearTimeout(bannerTimer);
  if(!sticky){
    bannerTimer = setTimeout(()=> banner.classList.remove("show"), 1800);
  }
}
function hideBanner(){
  clearTimeout(bannerTimer);
  banner.classList.remove("show");
}

/*** ìœ í‹¸ ***/
function escapeHtml(str){
  return (str ?? "")
    .replaceAll("&","&amp;")
    .replaceAll("<","&lt;")
    .replaceAll(">","&gt;")
    .replaceAll('"',"&quot;");
}
function catChip(catKey){
  const c = getCATS()[catKey];
  const cls = c?.chip || "blue";
  const label = c?.label || catKey;
  return `<span class="chip ${cls}">${escapeHtml(label)}</span>`;
}
function nowTime(){
  return new Date().toLocaleTimeString("ko-KR",{hour:"2-digit",minute:"2-digit"});
}
function nowClock(){
  return new Date().toLocaleTimeString("ko-KR",{hour:"2-digit",minute:"2-digit", hour12:false});
}
function nowDateLabel(){
  return new Date().toLocaleDateString("ko-KR",{month:"long", day:"numeric", weekday:"long"});
}
function isLikelyUrl(text){ return /https?:\/\/|example\.|www\./i.test(text || ""); }
function makeClickableText(text){
  const t = String(text||"");
  if(!isLikelyUrl(t)) return escapeHtml(t);
  const m = t.match(/(https?:\/\/[^\s]+|example\.[^\s]+)/i);
  if(!m) return escapeHtml(t);
  const url = m[1];
  const before = escapeHtml(t.slice(0, m.index));
  const after = escapeHtml(t.slice(m.index + url.length));
  return `${before}<button class="linkBtn" data-url="${escapeHtml(url)}">${escapeHtml(url)}</button>${after}`;
}
function toNaturalReply(choiceText){
  const t = String(choiceText||"").trim();
  if(!t) return "ì¼ë‹¨ ê³µì‹ ì±„ë„ë¡œ ë‹¤ì‹œ í™•ì¸í•´ë³¼ê²Œìš”.";
  if(/ì½œë°±|ê¸°ì¡´|ëŒ€í‘œë²ˆí˜¸|ë‚´ë¶€ ì±„ë„|ëŠê³ /.test(t)) return "ì ê¹ë§Œìš”. ëŠê³  ê³µì‹ ë²ˆí˜¸ë¡œ ë‹¤ì‹œ ì „í™”í•´ì„œ í™•ì¸í• ê²Œìš”.";
  if(/ë¬´ì‹œ|ì‚­ì œ|ì°¨ë‹¨/.test(t)) return "ì´ê±´ ë°”ë¡œ ì°¨ë‹¨í•˜ê³ , í•„ìš”í•˜ë©´ ê³µì‹ ê²½ë¡œë¡œ í™•ì¸í• ê²Œìš”.";
  if(/ë§í¬|í´ë¦­|URL/.test(t)) return "ë§í¬ëŠ” ëˆ„ë¥´ì§€ ì•Šê³  ê³µì‹ ì•±ì´ë‚˜ í™ˆí˜ì´ì§€ì—ì„œ ì§ì ‘ í™•ì¸í•´ë³¼ê²Œìš”.";
  if(/ì‹ ê³ /.test(t)) return "ìº¡ì²˜í•´ë‘ê³  ë°”ë¡œ ì‹ ê³ ë¶€í„° í• ê²Œìš”.";
  if(/ì†¡ê¸ˆ|ê²°ì œ|ì…ê¸ˆ|ëˆ|êµ¬ë§¤/.test(t)) return "ê¸ˆì „ ìš”êµ¬ëŠ” ì§„í–‰ ì•ˆ í•˜ê³ , ë¨¼ì € ì‚¬ì‹¤ í™•ì¸ë¶€í„° í• ê²Œìš”.";
  if(/ì¸ì¦|OTP|ë¹„ë°€ë²ˆí˜¸|ì‹ ë¶„ì¦/.test(t)) return "ì¸ì¦ë²ˆí˜¸ë‚˜ ê°œì¸ì •ë³´ëŠ” ì ˆëŒ€ ê³µìœ í•˜ì§€ ì•Šì„ê²Œìš”.";
  return t.endsWith("ìš”") ? t : (t + " í• ê²Œìš”.");
}

/* === O / X ì²´í—˜ìš© ë¬¸ì œ ë°ì´í„° === */
const OX_QUESTIONS = [
  /* O: íƒë°° ë°˜ì†¡ + ë‹¨ì¶•ë§í¬ + ì¬ì´‰ + 010 */
  {
    id:"ox_delivery_return",
    typeLabel:"íƒë°° ë°˜ì†¡(ë‹¨ì¶•ë§í¬/ì¬ì´‰)",
    answer:"O",
    marks:["sender","link","urgency","context"],
    suspectPoints:"â€¢ íœ´ëŒ€í°ë²ˆí˜¸(010) ë°œì‹  + [Webë°œì‹ ] + ë‹¨ì¶•ë§í¬ + â€˜ì˜¤ëŠ˜/ë§ˆê°â€™ ì¬ì´‰ + ì•ˆë‚´ ë¬¸êµ¬ ì–´ìƒ‰í•¨",
    messageHtml: `
      <div class="oxMsgCard">
        <div class="oxMsgTop"><span class="oxMark" data-ox="sender">010-1234-5678</span></div>
        <div class="oxMsgBody">
          <div class="oxMsgBubble">
            <div class="oxWeb">[Webë°œì‹ ]</div>
            <div class="oxText">
              [OOíƒë°°] ê³ ê°ë‹˜ íƒë°° ë°°ì†¡ ë¶ˆê°€<br>
              ì¦‰ì‹œ ë°°ì†¡ì§€ ë³€ê²½ ë¶€íƒë“œë¦½ë‹ˆë‹¤<br>
              <span class="oxMark oxUrgency" data-ox="urgency">ì£¼ì†Œ í™•ì¸</span>ë¯¸ì™„ë£Œ ì‹œ ë°˜ì†¡ ì²˜ë¦¬ë©ë‹ˆë‹¤.<br>
              ì£¼ì†Œí™•ì¸: <span class="oxLink" data-ox="link">https://reurl.kr/464D5BC9KT</span><br>
            </div>
          </div>
        </div>
      </div>
    `,
    explainRight:"íƒë°°ë¥¼ ë¯¸ë¼ë¡œ â€˜ì˜¤ëŠ˜/ë§ˆê°â€™ ì••ë°• + ë‹¨ì¶•ë§í¬ í´ë¦­ ìœ ë„ëŠ” ìŠ¤ë¯¸ì‹± ëŒ€í‘œ íŒ¨í„´ì´ì—ìš”. íƒë°°ëŠ” ë¬¸ì ë§í¬ê°€ ì•„ë‹ˆë¼ íƒë°°ì‚¬ ê³µì‹ ì•±/í™ˆí˜ì´ì§€ì—ì„œ ì§ì ‘ ì¡°íšŒê°€ ì•ˆì „í•´ìš”.",
    explainWrong:"íƒë°° ë¬¸ìëŠ” ìì£¼ ì“°ëŠ” ë¯¸ë¼ì˜ˆìš”. â€˜ì£¼ì†Œ í™•ì¸â€™ ê°™ì€ ì´ìœ ë¡œ ë§í¬ í´ë¦­ì„ ê°•ìš”í•˜ë©´ ì¼ë‹¨ ë©ˆì¶”ê³ , íƒë°°ì‚¬ ì•±/ì›¹(ì§ì ‘ ì ‘ì†)ìœ¼ë¡œ í™•ì¸í•´ì•¼ í•´ìš”."
  },

  /* O: ê¸°ê´€ ì‚¬ì¹­ + ë„ë©”ì¸ ë¶ˆì¼ì¹˜ + ì¬ì´‰ */
  {
    id:"ox_agency_impersonation",
    typeLabel:"ê¸°ê´€ ì‚¬ì¹­(ë„ë©”ì¸ ë¶ˆì¼ì¹˜)",
    answer:"O",
    marks:["sender","link","urgency","context"],
    suspectPoints:"â€¢ 010 ë°œì‹  â€¢ â€˜ê°€ì‚°ê¸ˆ/ì••ë¥˜â€™ í˜‘ë°• â€¢ ê¸°ê´€ëª…ê³¼ ë¬´ê´€í•œ ë‹¨ì¶•ë§í¬(ë„ë©”ì¸ ë¶ˆì¼ì¹˜) â€¢ ì˜¤íƒˆì/ë¬¸ì¥ ì–´ìƒ‰í•¨",
    messageHtml: `
      <div class="oxMsgCard">
        <div class="oxMsgTop"><span class="oxMark" data-ox="sender">010-7788-9900</span></div>
        <div class="oxMsgBody">
          <div class="oxMsgBubble">
            <div class="oxWeb">[Webë°œì‹ ]</div>
            <div class="oxText">
              [êµ­ì„¸ì²­] ë¯¸ë‚© ê³ ì§€ ì•ˆë‚´<br>
              ê³ ê°ë‹˜ ì„¸ê¸ˆê¸ˆì•¡:872,899ì›<br>
              <span class="oxMark oxUrgency" data-ox="urgency">ë¯¸ë‚©ì‹œ ê°€ì••ë¥˜</span>ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.<br>
              ì¡°íšŒ ë° ë‚©ë¶€: <span class="oxLink" data-ox="link">https://bit.ly/7kTAX-OK</span><br>
            </div>
          </div>
        </div>
      </div>
    `,
    explainRight:"ê¸°ê´€ì€ ë³´í†µ ê°œì¸ íœ´ëŒ€í°ë²ˆí˜¸(010)ë¡œ â€˜ë§í¬ í´ë¦­â€™ì„ ìš”êµ¬í•˜ì§€ ì•Šì•„ìš”. â€˜ì˜¤ëŠ˜ê¹Œì§€/ì••ë¥˜â€™ë¡œ ê²ì„ ì£¼ëŠ” ë¬¸êµ¬ë„ ëŒ€í‘œì ì¸ í”¼ì‹± ì‹ í˜¸ì˜ˆìš”.",
    explainWrong:"ê¸°ê´€ ì‚¬ì¹­ì€ â€˜ë¶ˆì´ìµ/ì••ë¥˜â€™ë¡œ ê³µí¬ë¥¼ ìœ ë°œí•´ìš”. ë§í¬ ëŒ€ì‹  ê¸°ê´€ ê³µì‹ í™ˆí˜ì´ì§€(ì§ì ‘ ì ‘ì†)ë‚˜ ëŒ€í‘œë²ˆí˜¸ë¡œ í™•ì¸í•´ì•¼ í•´ìš”."
  },

  /* O: ì²­ì²©ì¥(ì§€ì¸ ì‚¬ì¹­) + ë§í¬ */
  {
    id:"ox_wedding_invite",
    typeLabel:"ì²­ì²©ì¥(ì§€ì¸ ì‚¬ì¹­/ë§í¬)",
    answer:"O",
    marks:["sender","link","context"],
    suspectPoints:"â€¢ ëª¨ë¥´ëŠ” ë²ˆí˜¸ â€¢ ë‹¨ì¶•ë§í¬ â€¢ ëŒ€í™” ë§¥ë½ ì—†ì´ â€˜ì²­ì²©ì¥â€™ë§Œ ë˜ì§",
    messageHtml: `
      <div class="oxMsgCard">
        <div class="oxMsgTop"><span class="oxMark" data-ox="sender">010-4455-6677</span></div>
        <div class="oxMsgBody">
          <div class="oxMsgBubble">
            <div class="oxWeb">[Webë°œì‹ ]</div>
            <div class="oxText">
              [ì²­ì²©ì¥]<br>
              ë§ì€ ì°¸ì„ê³¼ ì¶•í•˜ ë¶€íƒë“œë¦½ë‹ˆë‹¤<br>
              ëª¨ë°”ì¼ ì²­ì²©ì¥ ë³´ê¸°: <span class="oxLink" data-ox="link">https://reurl.kr/WED-2m9s</span>
            </div>
          </div>
        </div>
      </div>
    `,
    explainRight:"ì§€ì¸ ì‚¬ì¹­ + ë‹¨ì¶•ë§í¬ëŠ” í”í•œ ìŠ¤ë¯¸ì‹± íŒ¨í„´ì´ì—ìš”. ë§í¬ë¥¼ ëˆ„ë¥´ê¸° ì „ì— ì§€ì¸ì—ê²Œ â€˜ê¸°ì¡´ ì—°ë½ì²˜â€™ë¡œ ë¨¼ì € í™•ì¸í•˜ì„¸ìš”.",
    explainWrong:"â€˜ì²­ì²©ì¥/ì´ˆëŒ€ì¥â€™ì€ í˜¸ê¸°ì‹¬ì„ ë…¸ë ¤ìš”. ë§í¬ í´ë¦­ ëŒ€ì‹  ì „í™”/ê¸°ì¡´ ëŒ€í™”ë°©ìœ¼ë¡œ ì‚¬ì‹¤ í™•ì¸ì´ ë¨¼ì €ì˜ˆìš”."
  },

  /* O: ë¶€ê³ ì¥ + ì¦‰ì‹œ í™•ì¸ + ë§í¬ */
  {
    id:"ox_obituary",
    typeLabel:"ë¶€ê³ ì¥(ê°ì • ìê·¹/ì¦‰ì‹œ í™•ì¸)",
    answer:"O",
    marks:["sender","link","urgency","context"],
    suspectPoints:"â€¢ ê°ì • ìê·¹(ë¶€ê³ ) â€¢ â€˜ì¦‰ì‹œ í™•ì¸â€™ ì••ë°• â€¢ ë‹¨ì¶•ë§í¬ â€¢ ë°œì‹ ë²ˆí˜¸/ë§¥ë½ ë¶ˆëª…í™•",
    messageHtml: `
      <div class="oxMsgCard">
        <div class="oxMsgTop"><span class="oxMark" data-ox="sender">010-3322-1100</span></div>
        <div class="oxMsgBody">
          <div class="oxMsgBubble">
            <div class="oxWeb">[Webë°œì‹ ]</div>
            <div class="oxText">
              [ë¶€ê³ ]<br>
              ì‚¬ë‘í•˜ëŠ” ì¡°ë¶€ê»˜ì„œ ë³„ì„¸í•˜ì…¨ê¸°ì—<br>
              ì‚¼ê°€ ì•Œë ¤ë“œë¦½ë‹ˆë‹¤.<br>
              <span class="oxMark oxUrgency" data-ox="urgency">ì¥ë¡€ì‹ì¥ ì£¼ì†Œ</span>:
              <span class="oxLink" data-ox="link">https://tinyurl.com/bo-go-dk</span>
            </div>
          </div>
        </div>
      </div>
    `,
    explainRight:"ë¶€ê³ ì¥ì€ â€˜ê¸‰í•œ ë§ˆìŒâ€™ì„ ì´ìš©í•´ í´ë¦­ì„ ìœ ë„í•´ìš”. íœ´ëŒ€í°ë²ˆí˜¸ ë°œì‹  + ë§í¬ ì¡°í•©ì´ë©´ íŠ¹íˆ ì¡°ì‹¬í•´ì•¼ í•´ìš”.",
    explainWrong:"ë¶€ê³  ë‚´ìš©ì€ ì‚¬ì‹¤ í™•ì¸(ì „í™”)ë¶€í„°! ë§í¬ í´ë¦­ì´ë‚˜ ì•± ì„¤ì¹˜/ê¶Œí•œ ìš”ì²­ì´ ë‚˜ì˜¤ë©´ ì¦‰ì‹œ ì¤‘ë‹¨í•˜ì„¸ìš”."
  },

  /* O: í™˜ê¸‰ê¸ˆ + ë§í¬ + ê°œì¸ì •ë³´ ìœ ë„ */
  {
    id:"ox_loan_refund",
    typeLabel:"í™˜ê¸‰ê¸ˆ(ê¸ˆì•¡ ì œì‹œ/ë§í¬)",
    answer:"O",
    marks:["sender","link","money","context"],
    suspectPoints:"â€¢ â€˜í™˜ê¸‰ê¸ˆâ€™ìœ¼ë¡œ ìœ í˜¹ â€¢ ê¸ˆì•¡ ì œì‹œ â€¢ ë‹¨ì¶•ë§í¬ë¡œ ì„œë¥˜/ë³¸ì¸í™•ì¸ ìœ ë„",
    messageHtml: `
      <div class="oxMsgCard">
        <div class="oxMsgTop"><span class="oxMark" data-ox="sender">010-9090-1212</span></div>
        <div class="oxMsgBody">
          <div class="oxMsgBubble">
            <div class="oxWeb">[Webë°œì‹ ]</div>
            <div class="oxText">
              [ë¯¼ì›24] ì“°ë ˆê¸° ë¬´ë‹¨íˆ¬ê¸°ë¡œ<br>
              ë‹¨ì†ë˜ì–´ ê³¼íƒœë£Œê°€ ë¶€ê³¼ë˜ì—ˆìŠµë‹ˆë‹¤.<br>
              ê³¼íƒœë£Œ í™•ì¸: <span class="oxLink" data-ox="link">https://reurl.kr/RF-31a2</span>
            </div>
          </div>
        </div>
      </div>
    `,
    explainRight:"â€˜í™˜ê¸‰ê¸ˆ/ê¸ˆì•¡ ì œì‹œâ€™ + ë§í¬ëŠ” í´ë¦­ì„ ìœ ë„í•˜ëŠ” ì „í˜•ì  ìˆ˜ë²•ì´ì—ìš”. ê¸ˆìœµ ê´€ë ¨ì€ ë°˜ë“œì‹œ ê³µì‹ ì•±/ëŒ€í‘œë²ˆí˜¸ë¡œ í™•ì¸í•˜ì„¸ìš”.",
    explainWrong:"í™˜ê¸‰/ëŒ€ì¶œì€ ê³µì‹ ê²½ë¡œ í™•ì¸ì´ ì›ì¹™ì´ì—ìš”. ë¬¸ì ë§í¬ë¡œ ì„œë¥˜ í™•ì¸/ì¸ì¦ ìš”êµ¬ê°€ ë‚˜ì˜¤ë©´ ì¤‘ë‹¨í•˜ì„¸ìš”."
  },
];

/* === ì¹´ë“œ í•¨ìˆ˜ === */
function fmtKoreanDateTime(ts){
  const d = new Date(Number(ts||0));
  if(!Number.isFinite(d.getTime())) return "â€”";
  return d.toLocaleString("ko-KR", {year:"numeric", month:"2-digit", day:"2-digit", hour:"2-digit", minute:"2-digit"});
}
function scoreRangeLabel(score){
  const s = Number(score||0);
  if(!Number.isFinite(s)) return {label:"â€”", idx:-1};
  if(s >= 85) return {label:"ì–‘í˜¸", idx:3};
  if(s >= 70) return {label:"ë³´í†µ", idx:2};
  if(s >= 55) return {label:"ì£¼ì˜", idx:1};
  return {label:"ì·¨ì•½", idx:0};
}

/* === ë§ˆì§€ë§‰ ê²°ê³¼ ë³µì› í›„ ê²°ê³¼ë¡œ ì´ë™ === */
function restoreLastResultToState(){
  try{
    const expId = localStorage.getItem(LS_LAST_EXP);
    const sesJson = localStorage.getItem(LS_LAST_SESSION);
    if(!expId || !sesJson) return null;
    const ses = JSON.parse(sesJson);
    if(!ses || ses.expId !== expId || !Array.isArray(ses.picks)) return null;

    // ë®ì–´ì“°ê¸°
    state.analytics.sessions = (state.analytics.sessions || []).filter(s => s?.expId !== expId);
    state.analytics.sessions.push(ses);
    return expId;
  }catch(e){
    return null;
  }
}

/*** ê³µìœ  ***/
function prevention3Lines(){
  return [
    easyText("1) ê¸‰í•˜ë©´ ë©ˆì¶”ê¸°: ë§í¬/ì¸ì¦/ì†¡ê¸ˆ ìš”êµ¬ëŠ” ì¼ë‹¨ ì •ì§€"),
    easyText("2) ê³µì‹ ê²½ë¡œ í™•ì¸: ì•±/ì›¹ ì§ì ‘ ì ‘ì† ë˜ëŠ” ëŒ€í‘œë²ˆí˜¸Â·ê¸°ì¡´ ì €ì¥ë²ˆí˜¸ë¡œ ì½œë°±í•´ í™•ì¸"),
    easyText("3) ê¸°ë¡Â·ì°¨ë‹¨Â·ì‹ ê³ : ìº¡ì²˜/ë²ˆí˜¸/ê³„ì¢ŒÂ·ë§í¬ í™•ë³´ í›„ ì‹ ê³ ")
  ].join("\n");
}
async function shareApp(message){
  const title = "í”¼ì‹± ì˜ˆë°© ì²´í—˜";
  const base = message || "í”¼ì‹± ì˜ˆë°© ì²´í—˜ ê°™ì´ í•´ë´ìš”.";
  const text = `${base}\n\n[í”¼ì‹± ë²”ì£„ì˜ˆë°©ìˆ˜ì¹™ ìš”ì•½]\n${prevention3Lines()}`;

  /* ê³µìœ  ë§í¬ëŠ” ë‹¤ë¥¸ ê¸°ê¸°ì—ì„œ 0ì  */
  let url = location.href;
  try{
    const did = getOrCreateDeviceId();
    const u = new URL(location.href);
    u.searchParams.set("shared","1");
    u.searchParams.set("did", String(did||""));
    url = u.toString();
  }catch(e){}

  try{
    if(navigator.share){
      await navigator.share({ title, text, url });
      return true;
    }
  }catch(e){ return false; }
  try{
    await navigator.clipboard.writeText(`${text}\n\n${url}`);
    showBanner("ê³µìœ ", "ë§í¬ê°€ í´ë¦½ë³´ë“œì— ë³µì‚¬ëì–´ìš”.", false);
    return true;
  }catch(e){
    showBanner("ê³µìœ ", "ì´ ê¸°ê¸°ì—ì„œëŠ” ìë™ ê³µìœ ê°€ ì–´ë ¤ì›Œìš”. ì£¼ì†Œë¥¼ ì§ì ‘ ë³µì‚¬í•´ ì£¼ì„¸ìš”.", false);
    return false;
  }
}

/*** ë©”ë‰´ ***/
const menuOverlay = document.getElementById("menuOverlay");
document.getElementById("menuBtn").onclick = ()=> menuOverlay.classList.add("show");
document.getElementById("menuClose").onclick = ()=> menuOverlay.classList.remove("show");
menuOverlay.addEventListener("click", (e)=>{ if(e.target===menuOverlay) menuOverlay.classList.remove("show"); });

document.getElementById("goHomeMenu").onclick = ()=>{
  menuOverlay.classList.remove("show");
  go("home",{},true);
};
document.getElementById("goExpMenu").onclick = ()=>{
  menuOverlay.classList.remove("show");
  go("case_list",{},true);
};
const PROMO_VIDEO_URL = "https://naver.com";

document.getElementById("promoVideoMenu").onclick = ()=>{
  menuOverlay.classList.remove("show");
  window.open(PROMO_VIDEO_URL, "_blank", "noopener,noreferrer");
};
document.getElementById("shareMenu").onclick = async ()=>{
  menuOverlay.classList.remove("show");
  await shareApp("ê°€ì¡±/ì§€ì¸ì—ê²Œ ê³µìœ í• ê²Œìš”. ì´ ë§í¬ë¡œ ê°™ì´ ì²´í—˜í•´ë´ìš”!");
};

/*** í´ì¼€ì–´ í´ë¦­í•˜ë©´ ì§‘ìœ¼ë¡œ ***/
(function(){
  const brandHome = document.getElementById("brandHome");
  if(!brandHome) return;

  const pressOn  = ()=> brandHome.classList.add("polcare-brand-press");
  const pressOff = ()=> brandHome.classList.remove("polcare-brand-press");

  brandHome.addEventListener("mousedown", pressOn);
  brandHome.addEventListener("mouseup", pressOff);
  brandHome.addEventListener("mouseleave", pressOff);
  brandHome.addEventListener("touchstart", pressOn, {passive:true});
  brandHome.addEventListener("touchend", pressOff, {passive:true});
  brandHome.addEventListener("touchcancel", pressOff, {passive:true});

  brandHome.addEventListener("click", (e)=>{
    e.preventDefault();
    e.stopPropagation();
    try{ document.getElementById("menuOverlay")?.classList.remove("show"); }catch(_){}
    try{ document.getElementById("creditsOverlay")?.classList.remove("show"); }catch(_){}
    try{ hideBanner(); }catch(_){}
    go("home", {}, true);
  });
})();

/*** ë§Œë“ ì´(í¬ë ˆë”§) ***/
(function(){
  const creditsOverlay = document.getElementById("creditsOverlay");
  const creditsClose = document.getElementById("creditsClose");
  const creditsRoll = document.getElementById("creditsRoll");

  const creditsLines = [
    "í´ì¼€ì–´(Pol_Care)",
    "<span class='small'>í”¼ì‹± ë²”ì£„ì˜ˆë°© ëª¨ì˜ì²´í—˜</span>",
    "",
    "ê¸°íš / ì œì‘",
    "<span class='small'>ì „ë‚¨ê²½ì°°ì²­ ì˜ì•”ê²½ì°°ì„œ ë²”ì£„ì˜ˆë°©ëŒ€ì‘ê³¼</span>",
    "",
    "ë””ìì¸ / ì•„ì´ë””ì–´ / í™ë³´",
    "<span class='small'>ê¹€ì§„ì˜ Â· ê¹€ì€ì•„</span>",
    "",
    "ì‹œë‚˜ë¦¬ì˜¤",
    "<span class='small'>ì „ë‚¨ê²½ì°°ì²­ ì˜ì•”ê²½ì°°ì„œ ë²”ì£„ì˜ˆë°©ëŒ€ì‘ê³¼ Â· ìˆ˜ì‚¬ê³¼</span>",
    "",
    "Special Thanks",
    "<span class='small'>ì˜ì•”êµ°ì²­ Â· ë†í˜‘ì€í–‰(ì˜ì•”êµ°ì§€ë¶€) Â· ê´‘ì£¼ì€í–‰(ì˜ì•”ì§€ì ) Â· ìƒˆë§ˆì„ê¸ˆê³  Â· ë©”ê°€ì»¤í”¼(ì˜ì•”ì  Â· ì‚¼í˜¸ì ) Â· ì§€ì—­ì‚¬íšŒ ë‹¨ì²´ ë“±</span>",
  ];

  function openCredits(){
    creditsRoll.innerHTML = creditsLines.map(l=>`<div>${l}</div>`).join("");
    creditsRoll.style.animation = "none";
    void creditsRoll.offsetHeight;
    creditsRoll.style.animation = "";
    creditsOverlay.classList.add("show");
  }
  function closeCredits(){ creditsOverlay.classList.remove("show"); }

  creditsClose.onclick = closeCredits;
  creditsOverlay.addEventListener("click",(e)=>{ if(e.target===creditsOverlay) closeCredits(); });

  const creditsBtn = document.getElementById("creditsmenu") || document.getElementById("creditsMenu");
  if(creditsBtn){
    creditsBtn.onclick = ()=>{
      menuOverlay.classList.remove("show");
      openCredits();
    };
  }
  window.openCredits = openCredits;
})();

/*** í€´ì¦ˆ íŒì—… ***/
const quizOverlay = document.getElementById("quizOverlay");
const qPromptEl = document.getElementById("qPrompt");
const qChoicesEl = document.getElementById("qChoices");
const qFeedback = document.getElementById("qFeedback");
const fbTitle = document.getElementById("fbTitle");
const fbBody = document.getElementById("fbBody");
const quizProgressEl = document.getElementById("quizProgress");
const qVisualEl = document.getElementById("qVisual");
const quizHeadTitleEl = document.getElementById("quizHeadTitle");
const oxExitBtn = document.getElementById("oxExitBtn");

/* 1/3 í‘œì‹œí•˜ê¸° */
function setQuizProgress(idx, total){
  if(!quizProgressEl) return;
  const t = Number(total || 0);
  const i = Number(idx || 0);
  if(t > 1 && i > 0){
    quizProgressEl.textContent = `${i}/${t}`;
    quizProgressEl.classList.remove("hidden");
  }else{
    quizProgressEl.textContent = "";
    quizProgressEl.classList.add("hidden");
  }
}

/* í€´ì¦ˆ ìŠ¬ë¼ì´ë“œ ì ‘ê³  í¼ì¹˜ê¸° */
const quizToggleBtn = document.getElementById("quizSheetToggle");
let quizCollapsed = false;

function setQuizCollapsed(v){
  quizCollapsed = !!v;
  quizOverlay.classList.toggle("collapsed", quizCollapsed);
  if(quizToggleBtn){
    quizToggleBtn.setAttribute("aria-expanded", String(!quizCollapsed));
  }
}
if(quizToggleBtn){
  quizToggleBtn.addEventListener("click", (e)=>{
    e.preventDefault();
    e.stopPropagation();
    setQuizCollapsed(!quizCollapsed);
  });
}
quizOverlay.addEventListener("click", (e)=>{ e.stopPropagation(); });

/* ë³´ê¸° ìˆœì„œ ì •ë‹µ ìœ„ì¹˜ ëœë¤ */
function shuffleArray(arr){
  const a = [...arr];
  for(let i=a.length-1; i>0; i--){
    const j = Math.floor(Math.random() * (i+1));
    [a[i], a[j]] = [a[j], a[i]];
  }
  return a;
}

// ì •ë‹µê³¼ íŒë³„
function isCorrectChoice(c){
  return Number(c?.score || 0) > 0;
}

// qNo: 1,2,3... (progressInfo.idx)
function orderChoicesWithAlternatingCorrect(choices, qNo){
  const list = Array.isArray(choices) ? [...choices] : [];
  const n = list.length;
  if(n <= 1) return list;

  const correct = list.filter(isCorrectChoice);
  const wrong   = list.filter(c => !isCorrectChoice(c));

  // ì •ë‹µê³¼ ì˜¤ë‹µ êµ¬ì„±ì´ ì• ë§¤í•˜ë©´ ê·¸ëƒ¥
  if(correct.length === 0 || wrong.length === 0) return shuffleArray(list);

  let targetIndex = Math.floor(Math.random() * n);
  targetIndex = targetIndex % n;

  const correctShuffled = shuffleArray(correct);
  const wrongShuffled   = shuffleArray(wrong);

  const out = new Array(n).fill(null);
  out[targetIndex] = correctShuffled.shift();

  const rest = shuffleArray([...correctShuffled, ...wrongShuffled]);
  for(let i=0; i<n; i++){
    if(out[i] == null) out[i] = rest.shift();
  }
  return out;
}

/* O/X í•˜ì´ë¼ì´íŠ¸ ìœ í‹¸ */
function oxClearHighlights(){
  if(!qVisualEl) return;
  qVisualEl.querySelectorAll("[data-ox]").forEach(el=>{
    el.classList.remove("hi");
  });
  qVisualEl.querySelectorAll(".oxLink").forEach(el=>{
    el.classList.remove("hi");
  });
  qVisualEl.querySelectorAll(".oxUrgency").forEach(el=>{
    el.classList.remove("hi");
  });
}
function oxApplyHighlights(marks){
  if(!qVisualEl) return;
  const set = new Set(Array.isArray(marks)?marks:[]);
  qVisualEl.querySelectorAll("[data-ox]").forEach(el=>{
    const k = el.getAttribute("data-ox");
    if(set.has(k)) el.classList.add("hi");
  });
  // ë§í¬/ê¸´ê¸‰ ì „ìš© íš¨ê³¼
  if(set.has("link")){
    qVisualEl.querySelectorAll(".oxLink").forEach(el=> el.classList.add("hi"));
  }
  if(set.has("urgency")){
    qVisualEl.querySelectorAll(".oxUrgency").forEach(el=> el.classList.add("hi"));
  }
}

/* === O / X í€´ì¦ˆ í‘œì‹œ === */
function showOXQuiz(q, run, progressInfo){
  return new Promise((resolve)=>{
    if(run?.aborted) return resolve(null);

    // OX ëª¨ë“œ ì§„ì…
    quizOverlay.classList.remove("callMode");
    quizOverlay.classList.add("oxMode");
    if(quizHeadTitleEl) quizHeadTitleEl.textContent = "O / X ë¬¸ì œ";

    // ë¬¸ì œ ë‚˜ê°€ê¸°ë„ ì†Œê°œ í™”ë©´ìœ¼ë¡œ
    if(oxExitBtn){
      oxExitBtn.onclick = (e)=>{
        e.preventDefault();
        e.stopPropagation();
        try{ quizOverlay.classList.remove("show"); }catch(_){}
        try{ quizOverlay.classList.remove("oxMode"); }catch(_){}
        try{ setQuizCollapsed(false); }catch(_){}
        try{ if(state.run){ state.run.abort(); state.run = null; } }catch(_){}
        go("ox_intro", {}, true);
        return resolve(null);
      };
    }

    // ê¸°ì¡´ ë‹¤ìŒë²„íŠ¼ì€ ì‚¬ìš© ì•ˆ í•¨
    const nextBtn = document.getElementById("quizNextBtn");
    if(nextBtn){
      nextBtn.classList.remove("on");
      nextBtn.disabled = true;
      nextBtn.onclick = null;
    }

    // ìƒíƒœ ì´ˆê¸°í™”
    qFeedback.classList.remove("show");
    fbBody.innerHTML = "";
    fbTitle.textContent = "í”¼ë“œë°±";
    setQuizProgress(progressInfo?.idx, progressInfo?.total);

    const idx = Number(progressInfo?.idx || 1);
    qPromptEl.textContent = `Q${idx}. ì´ ë©”ì‹œì§€ëŠ” ìŠ¤ë¯¸ì‹±ì¼ê¹Œìš”?`;

    // ì‹œê°ì˜ì—­
    if(qVisualEl){
      qVisualEl.innerHTML = q.messageHtml || "";
    }
    oxClearHighlights();

    // ì„ íƒì§€: O / X
    qChoicesEl.innerHTML = "";
    qChoicesEl.style.display = "";
    const row = document.createElement("div");
    row.className = "oxChoiceRow";

    const btnO = document.createElement("button");
    btnO.className = "oxPickBtn";
    btnO.textContent = "ë„¤(O)";

    const btnX = document.createElement("button");
    btnX.className = "oxPickBtn";
    btnX.textContent = "ì•„ë‹ˆìš”(X)";

    row.appendChild(btnO);
    row.appendChild(btnX);
    qChoicesEl.appendChild(row);

    let attempts = 0;
    let firstTryCorrect = null;
    let locked = false;

    function resetForRetry(){
      locked = false;
      btnO.classList.remove("selected");
      btnX.classList.remove("selected");
      qFeedback.classList.remove("show");
      fbBody.innerHTML = "";
      oxClearHighlights();
      qChoicesEl.style.display = "";
    }

    function showFeedback(userPick){
      attempts++;
      const correct = (userPick === q.answer);
      if(firstTryCorrect === null) firstTryCorrect = correct;

      // í”¼ë“œë°±
      qChoicesEl.style.display = "none";

      // ì§ê´€ì  í‘œì‹œ
      oxApplyHighlights(q.marks || []);

      // ì œëª©ê³¼ ë³¸ë¬¸
      fbTitle.textContent = correct ? "ì •ë‹µì…ë‹ˆë‹¤!" : "í‹€ë ¸ìŠµë‹ˆë‹¤!";
      const why = correct ? (q.explainRight||"") : (q.explainWrong||"");

      const actionLabel = correct
        ? ((idx >= Number(progressInfo?.total||0)) ? "ê²°ê³¼ ë³´ê¸°" : "ë‹¤ìŒ ë¬¸ì œí’€ê¸°")
        : "ë‹¤ì‹œí’€ê¸°";

      const actionClass = correct ? "next" : "retry";

      /* ë¬¸ì œë³„ í¬ì¸íŠ¸ í‘œì‹œ */
      const pointsTitle = (q.answer === "X") ? "í™•ì¸ í¬ì¸íŠ¸(ì •ìƒ ì‹ í˜¸)" : "ì˜ì‹¬ í¬ì¸íŠ¸(ì‹œê° í‘œì‹œ)";
      const pointsText = (q.answer === "X")
        ? (q.safePoints || "â€¢ ë‹¨ì¶•ë§í¬ ì—†ìŒ â€¢ ê°œì¸ì •ë³´/OTP/ê²°ì œ ìš”êµ¬ ì—†ìŒ â€¢ ê³µì‹ ê²½ë¡œ(ì§ì ‘ ì ‘ì†) ì•ˆë‚´")
        : (q.suspectPoints || "â€¢ íœ´ëŒ€í°ë²ˆí˜¸(010)Â·[Webë°œì‹ ] Â· ë‹¨ì¶•ë§í¬(URL) Â· â€˜ì§€ê¸ˆ/ì˜¤ëŠ˜/ì¦‰ì‹œâ€™ ì••ë°• Â· OTP/ê°œì¸ì •ë³´/ê¸ˆì „ ìš”êµ¬");

      fbBody.innerHTML = `
  <div class="oxFbWrap">
    <div>${escapeHtml(easyText(why))}</div>

    <div class="why"><b>${escapeHtml(pointsTitle)}</b><br>
      ${escapeHtml(easyText(pointsText))}
    </div>

    <div class="oxActionRow">
      <button type="button" class="oxActionBtn ${actionClass}" id="oxActionBtn">${escapeHtml(actionLabel)}</button>
    </div>
  </div>
`;
      qFeedback.classList.add("show");

      const act = document.getElementById("oxActionBtn");
      if(act){
        act.onclick = ()=>{
          if(run?.aborted) return resolve(null);
          if(correct){
            quizOverlay.classList.remove("show");
            resolve({
              id: q.id,
              typeLabel: q.typeLabel,
              firstTryCorrect: !!firstTryCorrect,
              attempts,
              answer: q.answer,
              explainRight: q.explainRight || "",
              explainWrong: q.explainWrong || ""
            });
          }else{
            resetForRetry();
          }
        };
      }
    }

    function onPick(pick){
      if(run?.aborted) return resolve(null);
      if(locked) return;
      locked = true;

      btnO.classList.toggle("selected", pick === "O");
      btnX.classList.toggle("selected", pick === "X");

      showFeedback(pick);
    }

    btnO.onclick = ()=> onPick("O");
    btnX.onclick = ()=> onPick("X");

    // ì‹œíŠ¸ ì—´ê¸°
    setQuizCollapsed(false);
    quizOverlay.classList.add("show");
  });
}



/* === ì „í™”í˜• ì²´í—˜: ìŒì„± ì¢…ë£Œ í›„ ìŠ¬ë¼ì´ë“œ ë¬¸ì œ(ëŒ€í™” ëŒ€ì‹ ) === */
function buildCallQuizItems(exp){
  if(Array.isArray(exp?.callQuiz) && exp.callQuiz.length){
    return exp.callQuiz;
  }
  const steps = Array.isArray(exp?.steps) ? exp.steps : [];
  const items = [];
  for(let i=0; i<steps.length; i++){
    const s = steps[i];
    if(s?.type !== "q") continue;

    // í•µì‹¬ ëŒ€ì‚¬: ì§ì „ other lineë“¤ì„ ë¬¶ì–´ì„œ ì§ˆë¬¸ìœ¼ë¡œ ì‚¬ìš©
    let core = String(s.core || "").trim();
    if(!core){
      const prev = steps[i-1];
      const prev2 = steps[i-2];
      const lines = [];
      if(prev2?.type==="line" && prev2.from==="other") lines.push(prev2.text);
      if(prev?.type==="line" && prev.from==="other") lines.push(prev.text);
      core = lines.filter(Boolean).join(" ") || s.prompt || "ìƒëŒ€ì˜ ë§ì— ì–´ë–»ê²Œ ë‹µí• ê¹Œìš”?";
    }

    const choices = Array.isArray(s.choices) ? s.choices : [];
    const two = choices.slice(0,2);
    items.push({ core, prompt: s.prompt || "", choices: two.length ? two : choices });
    if(items.length >= 4) break;
  }
  return items;
}

function showCallSlideQuiz(item, run, progressInfo){
  return new Promise((resolve)=>{
    if(run?.aborted) return resolve(null);

    // callMode ì§„ì…
    quizOverlay.classList.remove("oxMode");
    quizOverlay.classList.add("callMode");
    if(quizHeadTitleEl) quizHeadTitleEl.textContent = "ì „í™” í†µí™”ì¤‘...";
    if(qVisualEl) qVisualEl.innerHTML = "";
    oxClearHighlights();

    // ë¬¸ì œ ë‚˜ê°€ê¸° ë²„íŠ¼
    if(oxExitBtn){
      oxExitBtn.onclick = (e)=>{
        try{ e.preventDefault(); e.stopPropagation(); }catch(_){}
        try{ quizOverlay.classList.remove("show"); }catch(_){}
        try{ quizOverlay.classList.remove("callMode"); }catch(_){}
        try{ setQuizCollapsed(false); }catch(_){}
        try{ if(state.run){ state.run.abort(); state.run = null; } }catch(_){}
        go("case_list", {}, true);
        return resolve(null);
      };
    }

    // ìƒíƒœ ì´ˆê¸°í™”
    qFeedback.classList.remove("show");
    fbBody.innerHTML = "";
    fbTitle.textContent = "í”¼ë“œë°±";
    setQuizProgress(progressInfo?.idx, progressInfo?.total);

    const core = String(item?.core || item?.prompt || "ìƒëŒ€ì˜ ë§ì— ì–´ë–»ê²Œ ë‹µí• ê¹Œìš”?").trim();
    const safeCoreHtml = escapeHtml(easyText(core))
  .replaceAll("&lt;br&gt;", "<br>")
  .replaceAll("&lt;br/&gt;", "<br>")
  .replaceAll("&lt;br /&gt;", "<br>")
  .replaceAll("\n", "<br>");

qPromptEl.innerHTML = safeCoreHtml;

    // ë³´ê¸°
    qChoicesEl.innerHTML = "";
    qChoicesEl.style.display = "";

    const choices = Array.isArray(item?.choices) ? item.choices : [];
    const btns = [];

    choices.slice(0,2).forEach((c)=>{
      if(!c) return;
      const b = document.createElement("button");
      b.type = "button";
      b.className = "callPickBtn";
      b.textContent = easyText(String(c.text || "").trim());
      btns.push({btn:b, choice:c});
      qChoicesEl.appendChild(b);
    });

    let locked = false;

    function showFeedback(choice){
      const delta = Number(choice?.score || 0);
      const good = delta > 0;

      // í”¼ë“œë°±
      qChoicesEl.style.display = "none";

      fbTitle.textContent = good ? "ì¢‹ì•„ìš” âœ”" : "ì£¼ì˜ğŸš¨";
      const fbTextRaw = choice?.feedback || (good
        ? "ì‚¬ê¸°(í”¼ì‹±)ì¼ ìˆ˜ ìˆëŠ” ì‹ í˜¸ë¥¼ ì˜ ì¡ì•˜ì–´ìš”."
        : "ì´ ì„ íƒì€ ìœ„í—˜í•  ìˆ˜ ìˆì–´ìš”. â€˜ë©ˆì¶¤ â†’ ê³µì‹ ì±„ë„ë¡œ ë‹¤ì‹œ í™•ì¸(ê²€ì¦)â€™ì´ í•µì‹¬ì…ë‹ˆë‹¤.");
      const fbText = easyText(fbTextRaw);

      const whyText = choice?.why ? easyText(String(choice.why)) : "";

      // í‹€ë ¤ë„ ë‹¤ì‹œí’€ê¸° ì—†ì´ ë‹¤ìŒ ë¬¸ì œë¡œ ì§„í–‰
      const actionLabel =
        (Number(progressInfo?.idx||0) >= Number(progressInfo?.total||0)) ? "ê²°ê³¼ ë³´ê¸°" : "ë‹¤ìŒ ë¬¸ì œ";
      const actionClass = "next";

      fbBody.innerHTML = `
        <div class="oxFbWrap">
          <div>${escapeHtml(fbText)}</div>
          ${whyText.trim() ? `<div class="why"><b>ì™œ?</b><br>${escapeHtml(whyText)}</div>` : ``}
          <div class="oxActionRow">
            <button type="button" class="oxActionBtn ${actionClass}" id="callActionBtn">${escapeHtml(actionLabel)}</button>
          </div>
        </div>
      `;
      qFeedback.classList.add("show");

      const act = document.getElementById("callActionBtn");
      if(act){
        act.onclick = ()=>{
          if(run?.aborted) return resolve(null);
          quizOverlay.classList.remove("show");
          resolve({ choice, good, delta });
        };
      }
    }

    btns.forEach(({btn, choice})=>{
      btn.onclick = ()=>{
        if(run?.aborted) return resolve(null);
        if(locked) return;
        locked = true;
        btns.forEach(x=> x.btn.classList.toggle("selected", x.choice===choice));
        showFeedback(choice);
      };
    });

    setQuizCollapsed(false);
    quizOverlay.classList.add("show");
  });
}

/* === ê¸°ì¡´ showQuiz === */
function showQuiz(q, run, progressInfo){
  return new Promise((resolve)=>{
    if(run?.aborted) return resolve(null);

    // ê¸°ì¡´ í€´ì¦ˆ ì§„ì… ì‹œ ëª¨ë“œ í•´ì œ
    quizOverlay.classList.remove("oxMode");
    quizOverlay.classList.remove("callMode");
    if(quizHeadTitleEl) quizHeadTitleEl.textContent = "ë¬¸ì œ";
    if(qVisualEl) qVisualEl.innerHTML = "";
    oxClearHighlights();

    // OX ë‚˜ê°€ê¸° ë²„íŠ¼
    if(oxExitBtn) oxExitBtn.onclick = null;

    // OX í”¼ë“œë°±
    qChoicesEl.style.display = "";

    const nextBtn = document.getElementById("quizNextBtn");
    qFeedback.classList.remove("show");

    setQuizProgress(progressInfo?.idx, progressInfo?.total);

    qPromptEl.textContent = easyText(q.prompt || "ë¬¸ì œ");
    qChoicesEl.innerHTML = "";

    if(nextBtn){
      nextBtn.classList.remove("on");
      nextBtn.disabled = true;
      nextBtn.onclick = null;
    }

    let pickedResult = null;
    let selectedChoice = null;
    let submitted = false;

    const qNo = Number(progressInfo?.idx || 1);
    const shuffledChoices = orderChoicesWithAlternatingCorrect((q.choices||[]), qNo);

    if(nextBtn){
      nextBtn.textContent = "ë‹¤ìŒ";
      nextBtn.disabled = true;
      nextBtn.classList.remove("on");

      nextBtn.onclick = ()=>{
        if(run?.aborted) return resolve(null);
        if(!selectedChoice) return;

        if(!submitted){
          const delta = Number(selectedChoice.score || 0);
          const good = delta > 0;

          fbTitle.textContent = good ? "ì¢‹ì•„ìš” âœ”" : "ì£¼ì˜ğŸš¨";
          const fbTextRaw = selectedChoice.feedback || (good
            ? "ì‚¬ê¸°(í”¼ì‹±)ì¼ ìˆ˜ ìˆëŠ” ì‹ í˜¸ë¥¼ ì˜ ì¡ì•˜ì–´ìš”. ë‹¤ìŒìœ¼ë¡œ ì´ì–´ì§‘ë‹ˆë‹¤."
            : "ì´ ì„ íƒì€ ìœ„í—˜í•  ìˆ˜ ìˆì–´ìš”. â€˜ë©ˆì¶¤ â†’ ê³µì‹ ì±„ë„ë¡œ ë‹¤ì‹œ í™•ì¸(ê²€ì¦)â€™ì´ í•µì‹¬ì…ë‹ˆë‹¤.");

          const fbText = easyText(fbTextRaw);

          const whyText = selectedChoice.why ? easyText(String(selectedChoice.why)) : "";
          fbBody.innerHTML =
            `${escapeHtml(fbText)}`
            + (whyText.trim()
                ? `<div class="why"><b>ì™œ?</b><br>${escapeHtml(whyText)}</div>`
                : ``);

          qFeedback.classList.add("show");

          pickedResult = { choice: selectedChoice, good, delta };
          submitted = true;

          qChoicesEl.querySelectorAll(".choice").forEach(b=> b.disabled = true);

          nextBtn.disabled = false;
          nextBtn.classList.add("on");
          return;
        }

        quizOverlay.classList.remove("show");
        resolve(pickedResult);
      };
    }

    shuffledChoices.forEach((c, idx)=>{
      const btn = document.createElement("button");
      btn.className = "choice";
      btn.textContent = easyText(c.text || ("ì„ íƒ " + (idx+1)));

      btn.onclick = ()=>{
        if(run?.aborted) return resolve(null);
        if(submitted) return;

        selectedChoice = c;

        qChoicesEl.querySelectorAll(".choice").forEach(b=> b.classList.remove("selected"));
        btn.classList.add("selected");

        if(nextBtn){
          nextBtn.disabled = false;
          nextBtn.classList.add("on");
        }
      };

      qChoicesEl.appendChild(btn);
    });

    setQuizCollapsed(false);
    quizOverlay.classList.add("show");
  });
}

/*** ë¶„ì„ ***/
function applyVectorToTotals(vector){
  DIMENSIONS.forEach(d=>{
    const v = Number(vector?.[d.key] || 0);
    if(!Number.isFinite(v) || v === 0) return;
    state.analytics.totals[d.key].sum += v;
    state.analytics.totals[d.key].max += Math.abs(v);
  });
}
function calcScoresFromSession(expId){
  const ses = [...state.analytics.sessions].reverse().find(s => s.expId === expId);
  const picks = ses?.picks || [];

  const totalQ = picks.length;
  const correctQ = picks.filter(p => !!p.good).length;

  const dims = {};
  DIMENSIONS.forEach(d => {
    let touched = 0;
    let ok = 0;
    for(const p of picks){
      const v = Number(p.vector?.[d.key] || 0);
      if(v !== 0){
        touched++;
        if(p.good) ok++;
      }
    }
    dims[d.key] = touched ? Math.round((ok / touched) * 100) : null;
  });

  const overall = totalQ ? Math.round((correctQ / totalQ) * 100) : 0;

  return { overall, dims, totalQ, correctQ };
}

function startSession(expId){
  const exp = getSCENARIOS()[expId];
  return { expId, title: exp?.title || expId, at: Date.now(), picks:[] };
}

/*** ëŒ€í™” ì†ë„ ***/
const MESSAGE_INTERVAL_MS = 5000;

/*** ì½ê¸° ëŒ€ê¸° ***/
const MIN_READ_MS = 1600;
const MAX_READ_MS = 3600;
function calcReadDelay(text){
  const len = String(text||"").length;
  return Math.min(MAX_READ_MS, Math.max(MIN_READ_MS, 1100 + len*22));
}

/*** ëŒ€í™” ë¶„ê¸° ë°˜ì‘ íƒœê·¸ ***/
function normalizeAfterPayload(after){
  if(!after) return [];
  if(typeof after === "string") return [{ from:"other", text: after }];
  if(Array.isArray(after)){
    return after.map(x=>{
      if(typeof x === "string") return { from:"other", text: x };
      if(x && typeof x === "object") return { from:(x.from||"other"), text:(x.text||""), delayMs: x.delayMs };
      return null;
    }).filter(Boolean);
  }
  if(after && typeof after === "object" && (after.text || after.from)){
    return [{ from:(after.from||"other"), text:(after.text||"") }];
  }
  return [];
}
function defaultOtherReaction(good, step){
  const prompt = String(step?.prompt || "");
  if(good){
    if(/ì½œë°±|ì „í™”|í™•ì¸/.test(prompt)) return "ì™œ êµ³ì´ ì „í™”í•´â€¦ ì§€ê¸ˆ ì‹œê°„ì´ ì—†ì–´. ì—¬ê¸°ì„œ ê·¸ëƒ¥ ì²˜ë¦¬í•˜ë©´ ë¼.";
    if(/ë§í¬|í´ë¦­|URL/.test(prompt)) return "ì•„ë‹ˆ ë§í¬ë§Œ ëˆŒëŸ¬ì„œ í™•ì¸ë§Œ í•´ì£¼ë©´ ë˜ëŠ”ë°â€¦ ì ê¹ì´ë©´ ëë‚˜.";
    if(/ì¸ì¦|OTP|ë¹„ë°€ë²ˆí˜¸|ì‹ ë¶„ì¦/.test(prompt)) return "ê·¸ëŸ¼ ì¸ì¦ë²ˆí˜¸ë§Œ 1ë²ˆë§Œ ì•Œë ¤ì¤˜â€¦ ì§„ì§œ ë§ˆì§€ë§‰ì´ì•¼.";
    if(/ì†¡ê¸ˆ|ê²°ì œ|ëˆ/.test(prompt)) return "ì§€ê¸ˆ ì•ˆ í•˜ë©´ í°ì¼ ë‚˜. ë¹¨ë¦¬ ì²˜ë¦¬í•´ì•¼ í•´.";
    return "ì§€ê¸ˆ ê¸‰í•´ì„œ ê·¸ë˜â€¦ ê·¸ëƒ¥ ì§€ê¸ˆ ë°”ë¡œ í•´ì¤˜.";
  }else{
    if(/ì½œë°±|ì „í™”|í™•ì¸/.test(prompt)) return "ê·¸ë˜, ê·¸ëŸ¬ë©´ ë‚´ê°€ ì§€ê¸ˆ ì•ˆë‚´í•´ì¤„ê²Œ. ëŠì§€ ë§ê³  ê·¸ëŒ€ë¡œ ë”°ë¼ì™€.";
    if(/ë§í¬|í´ë¦­|URL/.test(prompt)) return "ë§ì•„. ë§í¬ ë“¤ì–´ê°€ì„œ í™•ì¸ ë²„íŠ¼ë§Œ ëˆ„ë¥´ë©´ ë¼.";
    if(/ì¸ì¦|OTP|ë¹„ë°€ë²ˆí˜¸|ì‹ ë¶„ì¦/.test(prompt)) return "ì‘. ë¬¸ìë¡œ ì˜¤ëŠ” ì¸ì¦ë²ˆí˜¸(OTP)ë§Œ ë³´ë‚´ì¤˜. ê·¸ê±¸ë¡œ ëë‚˜.";
    if(/ì†¡ê¸ˆ|ê²°ì œ|ëˆ/.test(prompt)) return "ì¢‹ì•„. ì§€ê¸ˆ ì•ˆë‚´í•˜ëŠ” ê³„ì¢Œë¡œ ë°”ë¡œ ë³´ë‚´ì¤˜. ëŠ¦ìœ¼ë©´ ì•ˆ ë¼.";
    return "ì˜¤ì¼€ì´. ê·¸ëŸ¼ ë‚´ê°€ ë§í•˜ëŠ” ìˆœì„œëŒ€ë¡œë§Œ í•˜ë©´ ë¼.";
  }
}

/*** ì²´í—˜ ì‹œì‘ ***/
function beginExperienceByCase(caseId){
  const c = getCASES().find(x=>x.id===caseId);
  if(!c) return go("case_list",{},true);
  const exp = getSCENARIOS()[c.experienceId];
  if(!exp) return;

  resetTotals();

  if(exp.type==="messenger"){
    state.pendingExp = { expId:c.experienceId, type:"messenger" };
    loudNotify(state.run);
    showBanner("ì•Œë¦¼", "ë©”ì‹œì§€ê°€ ë„ì°©í–ˆìŠµë‹ˆë‹¤.", false);

    clearStickyNotifyTimer();
    stickyNotifyTimer = setTimeout(()=>{
      loudNotify(state.run);
      showBanner("ì•Œë¦¼", `ì•„ë˜ ì•Œë¦¼ì„ ëˆŒëŸ¬ ë‚´ìš©ì„ í™•ì¸í•˜ì„¸ìš”.`, true);
    }, 2000);

    go("push_gate",{ expId:c.experienceId }, false);
    return;
  }

  if(exp.type==="call"){
    state.pendingExp = { expId:c.experienceId, type:"call" };
    go("exp_call",{ expId:c.experienceId }, false);
    return;
  }
}

/* === O/X ì²´í—˜ === */
function startOxSession(){
  if(state.run) state.run.abort();
  const run = makeRun();
  state.run = run;

  state.ox.session = {
    at: Date.now(),
    results: [],
    total: OX_QUESTIONS.length
  };

  try{
    localStorage.setItem(LS_OX_LAST, JSON.stringify(state.ox.session));
  }catch(e){}

  oxNext(run);
}

async function oxNext(run){
  if(run?.aborted) return;

  const ses = state.ox.session;
  if(!ses) return;

  const idx = ses.results.length;
  if(idx >= OX_QUESTIONS.length){
    // ì™„ë£Œ
    try{ localStorage.setItem(LS_OX_LAST, JSON.stringify(ses)); }catch(e){}
    go("ox_result", {}, false);
    return;
  }

  const q = OX_QUESTIONS[idx];
  const res = await showOXQuiz(q, run, { idx: idx+1, total: OX_QUESTIONS.length });
  if(!res || run?.aborted) return;

  ses.results.push(res);
  try{ localStorage.setItem(LS_OX_LAST, JSON.stringify(ses)); }catch(e){}
  oxNext(run);
}

/*** ë Œë” ë¼ìš°í„° ***/
function render(){
  const { name, params } = state.route;
  if(name==="home") return renderHome();
  if(name==="case_list") return renderCaseList();
  if(name==="case_detail") return renderCaseDetail(params.caseId);
  if(name==="push_gate") return renderPushGate(params.expId);
  if(name==="exp_messenger") return renderMessengerExp(params.expId);
  if(name==="exp_call") return renderCallExp(params.expId);
  if(name==="report") return renderReport();
  if(name==="result") return renderResult(params);

  /* O/X ì²´í—˜ ë¼ìš°íŠ¸ */
  if(name==="ox_intro") return renderOxIntro();
  if(name==="ox_result") return renderOxResult();

  return go("home",{},true);
}

/*** í™ˆ ***/
let homeGuideTimer = null;

function renderHome(){
  if(homeGuideTimer){ clearInterval(homeGuideTimer); homeGuideTimer = null; }

  const slidesRaw = (Array.isArray(HOME_GUIDE_SLIDES) && HOME_GUIDE_SLIDES.length > 0)
  ? HOME_GUIDE_SLIDES
  : [{ img:"", href:"" }];

  const slides = slidesRaw.map(s=>{
    const img = (s?.img && String(s.img).trim()) ? s.img : (s?.href || "");
    return { img, href: s?.href || "" };
  });

  const heroBgVar = (HOME_HERO_BG_URL && String(HOME_HERO_BG_URL).trim())
    ? `--home-hero-bg: url('${escapeHtml(HOME_HERO_BG_URL)}');`
    : `--home-hero-bg: none;`;

  main.innerHTML = `
    <div class="card" style="padding:12px; position:relative; overflow:hidden;">
      <div class="homeHeroText ${HOME_HERO_BG_URL && String(HOME_HERO_BG_URL).trim() ? "hasBg" : ""}"
           style="${heroBgVar}">
        <div style="font-weight:1000;letter-spacing:-.02em;font-size:calc(17px + var(--fontUp));">
          í”¼ì‹± ë²”ì£„ëŠ” ì˜ˆë°©ì´ ìµœì„ ì…ë‹ˆë‹¤.</div>

        <div style="margin-top:8px;color:var(--muted);font-size:calc(15px + var(--fontUp));line-height:1.55;">
          <div><b>ë‚˜ì™€ ì†Œì¤‘í•œ ì‚¬ëŒì„ ì§€í‚¤ëŠ” ë°©ë²•.</b></div>
          <div style="margin-top:8px;">
            ì§€ê¸ˆ â€˜ëŒ€ì‘ì ˆì°¨â€™ê³¼ â€˜ì•ˆì „ì§€ìˆ˜â€™ë¥¼ í™•ì¸í•˜ì„¸ìš”.
          </div>
          <div style="margin-top:10px;"><b>í•œë²ˆì˜ ì²´í—˜ì´, í‰ìƒì˜ í”¼í•´ë¥¼ ë§‰ìŠµë‹ˆë‹¤.</b></div>
        </div>
      </div>

      <div class="cta" style="margin-top:14px;">
        <button class="btn primary block" id="goExp">ì²´í—˜ ì‹œì‘</button>

        <!-- í™ˆ í™”ë©´ì— O/X ë¬¸ì œí’€ê¸° ë²„íŠ¼ -->
        <button class="btn ox block" id="goOx">O / X ë¬¸ì œí’€ê¸°</button>

        <button class="btn ghost block" id="goShare">ê³µìœ í•˜ê¸°</button>
      </div>
    </div>

    <div class="homeDashGrid" style="grid-template-columns: 1fr;">
      <div class="card homeTile" id="homeSafetyCard">
        <div class="homeTileHead" style="background: linear-gradient(180deg, rgba(252,246,228,1), rgba(252,246,228,1));">
          <div class="ttl">ë‚˜ì˜ í˜„ì¬ ì•ˆì „ì§€ìˆ˜</div>
          <div class="homeBadge sky" id="homeSafetyBadge">ì²´í—˜ í•„ìš”</div>
        </div>

        <div class="homeTileBody">
          <div style="display:flex;align-items:flex-end;justify-content:space-between;gap:10px;">
            <div class="homeBigScore" id="homeSafetyScore">â€”</div>
            <div style="text-align:right;">
              <div class="homeMiniMuted" id="homeSafetyLast">ë§ˆì§€ë§‰ ì²´í—˜: â€”</div>
            </div>
          </div>

          <div class="homeSegWrap" aria-label="ì•ˆì „ì§€ìˆ˜ êµ¬ê°„ ê·¸ë˜í”„">
            <div class="homeSegBar">
              <div class="homeSeg" id="seg0"></div>
              <div class="homeSeg" id="seg1"></div>
              <div class="homeSeg" id="seg2"></div>
              <div class="homeSeg" id="seg3"></div>
            </div>
            <div class="homeSegMarker" id="homeSegMarker" aria-hidden="true"></div>
            <div class="homeSegLabels" aria-hidden="true">
              <div><b>0~54(ì·¨ì•½)</b></div><div><b>55~69(ì£¼ì˜)</b></div><div><b>70~84(ë³´í†µ)</b></div><div><b>85~100(ì–‘í˜¸)</b></div>
            </div>
          </div>

        </div>
      </div>
    </div>

    <div class="card" style="margin-top:12px;padding:0;overflow:hidden;">
      <div style="padding:16px 16px 0;">
        <div style="font-weight:1000;letter-spacing:-.02em;font-size:calc(15px + var(--fontUp));">ê´€ë ¨ ì•ˆë‚´</div>
      </div>

      <div class="slider" style="padding:0;overflow:hidden;">
        <div class="slideTrack" id="homeGuideTrack">
          ${slides.map((s,i)=>`
            <div class="slide" data-idx="${i}">
              <div class="guidePh" style="cursor:pointer;">
                ${
                  (s.img && String(s.img).trim())
                    ? `<img alt="ì•ˆë‚´ ì´ë¯¸ì§€ ${i+1}" src="${escapeHtml(s.img)}" />`
                    : `<div class="big">ì•ˆë‚´ ì´ë¯¸ì§€ ${i+1}</div><div class="small">HOME_GUIDE_SLIDES[${i}]ì— ì´ë¯¸ì§€ URL ë˜ëŠ” href ì…ë ¥</div>`
                }
              </div>
            </div>
          `).join("")}
        </div>
      </div>
      <div class="dots" id="homeGuideDots" style="padding-bottom:12px;"></div>
    </div>
  `;

  document.getElementById("goExp").onclick = ()=> go("case_list",{},true);

  // O/X ì²´í—˜ ì‹œì‘ ë²„íŠ¼
  document.getElementById("goOx").onclick = ()=> go("ox_intro", {}, false);

  document.getElementById("goShare").onclick = ()=> shareApp("ë‚˜ì™€ ì†Œì¤‘í•œ ì‚¬ëŒì„ ì§€í‚¤ëŠ” ì—°ìŠµ, ì§€ê¸ˆ í”¼ì‹± ë²”ì£„ 'ëŒ€ì‘ì ˆì°¨'ì™€ ë‚˜ì˜ 'ì•ˆì „ì§€ìˆ˜'ë¥¼ ì²´í—˜í•´ë´ìš”!");

  (function initHomeSafety(){
    let lastScore = null;
    let lastAt = null;

    /* ì•„ë¬´ê²ƒë„ ì•ˆí•œ ìƒíƒœ 0ì ê³¼ ì²´í—˜ í•„ìš”:
       - LS_LAST_EXP + LS_LAST_SESSION(ì •ìƒ ì„¸ì…˜)ì´ ì—†ìœ¼ë©´ ì ìˆ˜ í‘œì‹œí•˜ì§€ ì•ŠìŒ(=0ì  ì²˜ë¦¬) */
    let hasRealSession = false;
    try{
      const expId = localStorage.getItem(LS_LAST_EXP);
      const sesJson = localStorage.getItem(LS_LAST_SESSION);
      if(expId && sesJson){
        const ses = JSON.parse(sesJson);
        if(ses && ses.expId === expId && Array.isArray(ses.picks) && ses.picks.length > 0){
          hasRealSession = true;
        }
      }
    }catch(e){ hasRealSession = false; }

    // ê³µìœ ë¡œ ë“¤ì–´ì˜¨ ê¸°ê¸°ë©´ í™ˆ ì ìˆ˜ëŠ” ë¬´ì¡°ê±´ 0ì 
    try{
      if(localStorage.getItem(LS_SHARED_VIEW) === "1"){
        hasRealSession = false;
      }
    }catch(e){}

    try{
      if(hasRealSession){
        const s = localStorage.getItem(LS_LAST_SCORE);
        const t = localStorage.getItem(LS_LAST_AT);
        if(s != null) lastScore = Number(s);
        if(t != null) lastAt = Number(t);
      }
    }catch(e){}

    const scoreEl = document.getElementById("homeSafetyScore");
    const badgeEl = document.getElementById("homeSafetyBadge");
    const lastEl  = document.getElementById("homeSafetyLast");

    const segEls = [
      document.getElementById("seg0"),
      document.getElementById("seg1"),
      document.getElementById("seg2"),
      document.getElementById("seg3"),
    ];
    const marker = document.getElementById("homeSegMarker");

    function setBadge(label){
      badgeEl.textContent = label;
      badgeEl.className = "homeBadge sky";
      if(label === "ì–‘í˜¸") badgeEl.className = "homeBadge green";
      else if(label === "ë³´í†µ") badgeEl.className = "homeBadge sky";
      else if(label === "ì£¼ì˜") badgeEl.className = "homeBadge orange";
      else if(label === "ì·¨ì•½") badgeEl.className = "homeBadge red";
      else if(label === "ì²´í—˜ í•„ìš”") badgeEl.className = "homeBadge sky";
    }

    if(Number.isFinite(lastScore)){
      scoreEl.textContent = `${lastScore}ì `;
      const r = scoreRangeLabel(lastScore);
      setBadge(r.label);
      if(Number.isFinite(lastAt)) lastEl.textContent = "ë§ˆì§€ë§‰ ì²´í—˜: " + fmtKoreanDateTime(lastAt);
      else lastEl.textContent = "ë§ˆì§€ë§‰ ì²´í—˜: â€”";

      segEls.forEach(el=> el && el.classList.remove("on"));
      if(r.idx >= 0 && segEls[r.idx]) segEls[r.idx].classList.add("on");

      const pct = Math.max(0, Math.min(100, lastScore));
      marker.style.left = pct + "%";
      marker.classList.add("on");
    }else{
      scoreEl.textContent = "0ì ";
      setBadge("ì²´í—˜ í•„ìš”");
      lastEl.textContent = "ë§ˆì§€ë§‰ ì²´í—˜: â€”";
      segEls.forEach(el=> el && el.classList.remove("on"));
      marker.classList.remove("on");
    }

    /* í™ˆ ì•ˆì „ì§€ìˆ˜ ì¹´ë“œ í´ë¦­í•˜ë©´ ë§ˆì§€ë§‰ í™”ë©´ ë³µì› */
    const safetyCard = document.getElementById("homeSafetyCard");
    if(safetyCard){
      safetyCard.style.cursor = "pointer";
      safetyCard.onclick = ()=>{
        const expId = restoreLastResultToState();
        if(!expId){
          showBanner("ì•ˆë‚´", "ì•„ì§ ì²´í—˜í•œ ì´ë ¥ì´ ì—†ì–´ìš”.", false);
          return;
        }
        go("result", { expId }, false);
      };
    }

  })();

  const track = document.getElementById("homeGuideTrack");
  const dots = document.getElementById("homeGuideDots");
  let idx = 0;

  function getSlideW(){
    const rect = track.parentElement.getBoundingClientRect();
    return Math.min(rect.width, 560);
  }
  function syncSlideWidth(w){
    track.querySelectorAll(".slide").forEach(sl => { sl.style.width = w + "px"; });
  }

  function renderDots(){
    dots.innerHTML = slides.map((_,i)=>`<span class="dot ${i===idx?'on':''}"></span>`).join("");
  }
  function setIdx(i){
    idx = Math.max(0, Math.min(slides.length-1, i));
    const w = getSlideW();
    syncSlideWidth(w);
    track.style.transform = `translateX(${-idx * w}px)`;
    renderDots();
  }

  homeGuideTimer = setInterval(()=> setIdx((idx+1) % slides.length), 5000);

  let startX = null;
  track.parentElement.addEventListener("touchstart",(e)=>{ startX = e.touches[0].clientX; },{passive:true});
  track.parentElement.addEventListener("touchend",(e)=>{
    if(startX==null) return;
    const endX = e.changedTouches[0].clientX;
    const dx = endX - startX;
    if(dx < -40) setIdx(idx+1);
    if(dx > 40) setIdx(idx-1);
    startX = null;
  },{passive:true});

  track.addEventListener("click",(e)=>{
    const slideEl = e.target.closest(".slide");
    if(!slideEl) return;
    const i = Number(slideEl.dataset.idx || 0);
    const href = slides?.[i]?.href || "";
    if(href && String(href).trim()){
      window.open(href, "_blank", "noopener,noreferrer");
    }else{
      showBanner("ì•ˆë‚´", "ì´ ì´ë¯¸ì§€ì˜ ìƒˆì°½ ë§í¬(href)ê°€ ë¹„ì–´ìˆì–´ìš”. HOME_GUIDE_SLIDESì— ì…ë ¥í•´ ì£¼ì„¸ìš”.", false);
    }
  });

  window.addEventListener("resize", ()=> setIdx(idx));
  renderDots();
  syncSlideWidth(getSlideW());
  setIdx(0);
}

/* === O/X ì²´í—˜ ì†Œê°œ í™”ë©´ === */
function renderOxIntro(){
  main.innerHTML = `
    <div class="oxIntroStage">
      <div class="oxIntroCard">
        <div class="oxIntroTop">
          <div class="oxIntroSub">ë¬¸ìë©”ì‹œì§€ë¥¼ ì´ìš©í•œ íœ´ëŒ€í° í•´í‚¹(ìŠ¤ë¯¸ì‹±)<br>ìˆ˜ë²•ì„ ì•Œì•„ë³´ì„¸ìš”</div>

          <div class="oxIntroHint">
            â€˜ë„¤/ì•„ë‹ˆìš”â€™ë¡œ í’€ì–´ë³´ê³ ,<br>
            <b>ì–´ë””ê°€ ì˜ì‹¬ í¬ì¸íŠ¸ì¸ì§€</b> í™”ë©´ì—ì„œ ë°”ë¡œ í™•ì¸í•´ë³´ì„¸ìš”
          </div>
        </div>

        <div class="oxIntroPreview">
          <div class="oxMsgCard">
            <div class="oxMsgTop"><span class="oxMark">ì˜ˆì‹œ í™”ë©´</span></div>
            <div class="oxMsgBody">
              <div class="oxMsgBubble">
                <div class="oxWeb">[Webë°œì‹ ]</div>
                <div class="oxText">
                  íƒë°° ë°˜ì†¡ ì•ˆë‚´<br>
                  <span class="oxMark oxUrgency">ì˜¤ëŠ˜ 18ì‹œê¹Œì§€</span> ì£¼ì†Œ í™•ì¸ í•„ìš”<br>
                  <span class="oxLink">https://reurl.kr/xxxx</span>
                </div>
              </div>
            </div>
          </div>
          <div style="margin-top:10px;color:rgba(31,36,48,.74);font-size:calc(13px + var(--fontUp));line-height:1.55;text-align:left;">
            <b>íŒ</b> Â· ë§í¬(ì£¼ì†Œ) í´ë¦­ ìœ ë„ + â€˜ì˜¤ëŠ˜/ì¦‰ì‹œâ€™ ì¬ì´‰ + ì¸ì¦/ê°œì¸ì •ë³´/ê¸ˆì „ ì–¸ê¸‰ì´ ë‚˜ì˜¤ë©´, í•œ ë²ˆ ë” ì˜ì‹¬í•˜ì„¸ìš”.
          </div>
        </div>

        <div class="oxIntroBottom">
          <button class="oxIntroBtn start" id="oxIntroStart">ì‹œì‘í•˜ê¸°</button>
          <button class="oxIntroBtn back" id="oxIntroBack">ë’¤ë¡œê°€ê¸°</button>
        </div>
      </div>
    </div>
  `;

  document.getElementById("oxIntroBack").onclick = ()=> go("home", {}, true);
  document.getElementById("oxIntroStart").onclick = ()=> startOxSession();
}

/* === O/X ê²°ê³¼ í™”ë©´ === */
function renderOxResult(){
  const ses = state.ox.session || (()=>{
    try{
      const j = localStorage.getItem(LS_OX_LAST);
      return j ? JSON.parse(j) : null;
    }catch(e){ return null; }
  })();

  const results = Array.isArray(ses?.results) ? ses.results : [];
  const total = OX_QUESTIONS.length;

  // ë§íˆê³  í‹€ë¦° ìœ í˜•
  const correctFirst = results.filter(r=>r.firstTryCorrect);
  const wrongFirst = results.filter(r=>!r.firstTryCorrect);

  main.innerHTML = `
    <div class="resultWrap oxResultWrap">
      <div class="card" style="padding:16px;">
        <div style="font-weight:1000;letter-spacing:-.02em;font-size:calc(16px + var(--fontUp));">O / X ì²´í—˜ ê²°ê³¼</div>
        <div style="margin-top:8px;color:rgba(31,36,48,.72);font-size:calc(13px + var(--fontUp));line-height:1.55;">
          ì´ ${total}ìœ í˜• ì¤‘ <b>${correctFirst.length}</b>ìœ í˜•ì„ ì²« ì‹œë„ì— ë§í˜”ì–´ìš”.
        </div>

        <div class="boxedSection" style="margin-top:12px;">
          <div style="font-weight:1000;color:rgba(31,36,48,.92);">ë§íŒ ìœ í˜•(ì²« ì‹œë„ ì •ë‹µ)</div>
          ${
            correctFirst.length
              ? correctFirst.map(r=>`
                <div style="margin-top:10px;">
                  â€¢ <b>${escapeHtml(r.typeLabel)}</b><br>
                  <span style="color:#1D9A6C;font-weight:900;">ì™œ ë§ì•˜ì„ê¹Œ?</span>
                  ${escapeHtml(easyText(r.explainRight || "â€”"))}
                </div>
              `).join("")
              : `<div style="margin-top:10px;">â€¢ ì²« ì‹œë„ì— ë§íŒ ìœ í˜•ì´ ì—†ìŠµë‹ˆë‹¤.</div>`
          }
        </div>

        <div class="boxedSection" style="margin-top:12px;">
          <div style="font-weight:1000;color:rgba(31,36,48,.92);">í‹€ë¦° ìœ í˜•(ì²« ì‹œë„ ì˜¤ë‹µ)</div>
          ${
            wrongFirst.length
              ? wrongFirst.map(r=>`
                <div style="margin-top:10px;">
                  â€¢ <b>${escapeHtml(r.typeLabel)}</b> <span style="color:rgba(31,36,48,.60);">(ì‹œë„ ${escapeHtml(String(r.attempts||1))}íšŒ)</span><br>
                  <span style="color:#D45050;font-weight:900;">ì™œ í‹€ë ¸ì„ê¹Œ?</span>
                  ${escapeHtml(easyText(r.explainWrong || "â€”"))}<br>
                  <span style="color:#2D70C9;font-weight:900;">ì •ë‹µ í¬ì¸íŠ¸</span>
                  ${escapeHtml(easyText(r.explainRight || "â€”"))}
                </div>
              `).join("")
              : `<div style="margin-top:10px;">â€¢ ì²« ì‹œë„ì— í‹€ë¦° ìœ í˜•ì´ ì—†ìŠµë‹ˆë‹¤ ğŸ‘</div>`
          }
        </div>

        <div class="cta" style="margin-top:14px;">
          <button class="btn primary block" id="oxRetryAll">ë‹¤ì‹œí•˜ê¸°</button>
          <button class="btn ghost block" id="oxGoHome">ì²« í™”ë©´</button>
        </div>
      </div>
    </div>
  `;

  document.getElementById("oxRetryAll").onclick = ()=>{
    go("ox_intro", {}, true);
  };
  document.getElementById("oxGoHome").onclick = ()=> go("home", {}, true);
}


/*** ìœ í˜• ë¦¬ìŠ¤íŠ¸ ***/
function renderCaseList(){
  const items = getCASES();
  main.innerHTML = `
    <div class="caseList">
      ${items.map(c=>`
        <div class="card caseItem" data-case="${escapeHtml(c.id)}">
          <div class="caseBody">
            <div class="caseTop">
              <div style="min-width:0;flex:1">
                <p class="caseTitle">${escapeHtml(c.title)}</p>
                <p class="caseSub">${escapeHtml(c.subtitle)}</p>
              </div>
              ${catChip(c.category)}
            </div>
          </div>
        </div>
      `).join("")}
    </div>

    <div class="cta" style="margin-top:16px;">
      <button class="btn ghost block" id="caseListBack">ë’¤ë¡œê°€ê¸°</button>
    </div>
  `;

  main.querySelectorAll("[data-case]").forEach(el=>{
    el.onclick = ()=> go("case_detail",{ caseId: el.dataset.case });
  });

  const backBtn = document.getElementById("caseListBack");
  if(backBtn){
    backBtn.onclick = ()=> go("home", {}, true);
  }
}

/*** ìƒì„¸ ***/
function buildEasyExplainForCase(c){
  const exp = getSCENARIOS()?.[c?.experienceId];
  const isCall = exp?.type === "call";
  const ui = exp?.ui || "";
  const kind = isCall ? "ì „í™”" : (ui==="kakao" ? "ì¹´í†¡" : (ui==="sms" ? "ë¬¸ì" : "ë©”ì‹œì§€"));

  const t = `${c?.title||""} ${c?.subtitle||""} ${(c?.info?.keywords||[]).join(" ")}`.trim();
  const has = (re)=> re.test(t);

  const headLine = isCall
    ? "ì´ ìˆ˜ë²•ì€"
    : "ì´ ìˆ˜ë²•ì€";

  const baseNoticeTitle = `ì¤€ë¹„ëë‚˜ìš”? ì´ì œ â€˜ê°€ì§œ ${kind}â€™ ìƒí™©ì´ ì‹œì‘ë¼ìš”`;
  const baseNoticeBody  = "ëª¨ë“  í™”ë©´ì€ í•™ìŠµìš©ìœ¼ë¡œ, ì‹¤ì œë¡œ ëˆì´ ë¹ ì ¸ë‚˜ê°€ê±°ë‚˜ í”„ë¡œê·¸ë¨ì´ ì„¤ì¹˜ê°€ ë˜ì§€ ì•Šì•„ìš”. ì²œì²œíˆ ì½ê³  ì²´í—˜í•´ë³´ì„¸ìš”!";

  /* âœ… ì‹œë‚˜ë¦¬ì˜¤ ê¸°ë°˜ ì„¤ëª…(ì‚¬ìš©ìê°€ ì‹œë‚˜ë¦¬ì˜¤ ë‚´ìš©ì„ ë°”ê¿”ë„ ìë™ ë°˜ì˜) */
  try{
    if(exp){
      const customLines = Array.isArray(exp.introLines) ? exp.introLines.filter(x=>String(x||"").trim()) : [];
      const introText = String(exp.introText || exp.intro || exp.oneLiner || "").trim();

      if(customLines.length){
        return { lines: customLines.map(s=>String(s)), noticeTitle: baseNoticeTitle, noticeBody: baseNoticeBody };
      }

      // introText/oneLiner/í•µì‹¬í¬ì¸íŠ¸ë¥¼ ì¡°í•©í•´ ì„¤ëª… ìƒì„±
      const lines = [];
      if(introText) lines.push(`${headLine} ${introText}`);

      // ìµœì†Œ 1ì¤„ì€ ë³´ì¥
      if(lines.length){
        return { lines, noticeTitle: baseNoticeTitle, noticeBody: baseNoticeBody };
      }
    }
  }catch(e){}


  const mk = (situation, top3, action)=>({
    lines: [
      `${headLine} ${situation}`,
    ],
    noticeTitle: baseNoticeTitle,
    noticeBody: baseNoticeBody
  });

  if(has(/ê°€ì¡±|ìë…€|ì•„ë“¤|ë”¸|ì—„ë§ˆ|ì•„ë¹ |ë¶€ëª¨|ê°€ì¡±ì‚¬ì¹­/)){
    return mk(
      "ë§ˆì¹˜ ì‹¤ì œ ìë…€(ì•„ë“¤ ë˜ëŠ” ë”¸)ì¸ ì²™ í•˜ë©´ì„œ â€˜ìƒˆ ë²ˆí˜¸â€™ë¡œ ì—°ë½ì´ ì™€ìš”. ê·¸ë¦¬ê³  ê°‘ìê¸° â€˜ê¸‰í•œ ì¼â€™ì´ ìƒê²¼ë‹¤ê³  ë„ì™€ë‹¬ë¼ê³  í•´ìš”.",
      [
        "ì—„ë§ˆ(ì•„ë¹ ) ë‚˜ í° ê³ ì¥ë‚˜ì„œ ë²ˆí˜¸ ë°”ë€Œì—ˆì–´",
        "ì§€ê¸ˆ í†µí™”/ì˜ìƒí†µí™”ëŠ” ì•ˆ ë¼â€¦ ì¹´í†¡ìœ¼ë¡œë§Œ ê°€ëŠ¥í•´",
        "ê¸‰í•´ì„œ ê·¸ëŸ°ë° ë§í¬ ëˆŒëŸ¬ì„œ í™•ì¸(ì¸ì¦)ë§Œ í•´ì¤˜ / ì¸ì¦ë²ˆí˜¸(OTP)ë§Œ ì•Œë ¤ì¤˜"
      ],
      "ì¼ë‹¨ ë©ˆì¶”ê³ , **ë‚´ê°€ ì›ë˜ ì €ì¥í•´ë‘” ë²ˆí˜¸ë¡œ ì§ì ‘ ì „í™”(ì½œë°±)** í•´ì„œ ì§„ì§œ ê°€ì¡±ì¸ì§€ í™•ì¸í•˜ì„¸ìš”. ë§í¬(ì£¼ì†Œ URL)Â·ì¸ì¦ë²ˆí˜¸(OTP)Â·ì†¡ê¸ˆ ìš”êµ¬ëŠ” **ë¬´ì¡°ê±´ ê±°ì ˆ**ì´ ì•ˆì „í•´ìš”."
    );
  }

  if(has(/ì²­ì²©ì¥|ëª¨ë°”ì¼\s*ì²­ì²©ì¥|ì´ˆëŒ€ì¥|ëª¨ë°”ì¼\s*ì´ˆëŒ€ì¥/)){
    return mk(
      "ì§€ì¸ì¸ ì²™ â€˜ëª¨ë°”ì¼ ì²­ì²©ì¥/ì´ˆëŒ€ì¥â€™ ë§í¬(ì£¼ì†Œ URL)ê°€ ì™€ìš”. ëˆŒëŸ¬ë³´ê²Œ ë§Œë“  ë’¤ ì„¤ì¹˜/ê¶Œí•œ/ì¸ì¦ìœ¼ë¡œ ë„˜ì–´ê°€ê²Œ í•´ìš”.",
      [
        "ëª¨ë°”ì¼ì²­ì²©ì¥ ì™”ì–´~ ë§í¬ë¡œ ë´ì¤˜!",
        "ëª¨ë°”ì¼ ì „ìš©ì´ë¼ â€˜ë·°ì–´/ë¯¸ë¦¬ë³´ê¸°â€™ ì„¤ì¹˜í•´ì•¼ ì—´ë ¤",
        "ì˜¤ëŠ˜ ì•ˆ ë³´ë©´ ë§Œë£Œë¼/í™•ì¸ ì•ˆ í•˜ë©´ ì•ˆ ì—´ë ¤"
      ],
      "ë§í¬(ì£¼ì†Œ URL)ëŠ” ëˆ„ë¥´ì§€ ë§ê³ , **ì§€ì¸ì—ê²Œ ê¸°ì¡´ ëŒ€í™”ë°©/ì „í™”ë¡œ ì§ì ‘ í™•ì¸(ê²€ì¦)** í•˜ì„¸ìš”. â€˜ë·°ì–´ ì„¤ì¹˜â€™, â€˜ê¶Œí•œ í—ˆìš©â€™, â€˜ì¸ì¦ë²ˆí˜¸(OTP)â€™ê°€ ë‚˜ì˜¤ë©´ **ì¦‰ì‹œ ì¤‘ë‹¨**ì´ ì •ë‹µì´ì—ìš”."
    );
  }

  if(has(/ë¶€ê³ ì¥|ë¶€ê³ |ì¥ë¡€ì‹ì¥|ì¡°ë¬¸|ë¶€ê³ \s*ì•ˆë‚´/)){
    return mk(
      "ë§ˆìŒì´ ê¸‰í•´ì§€ëŠ” â€˜ë¶€ê³  ì†Œì‹â€™ìœ¼ë¡œ í´ë¦­ì„ ìœ ë„í•´ìš”. í™•ì¸í•˜ë ¤ëŠ” ì‹¬ë¦¬ë¥¼ ì´ìš©í•´ì„œ ë§í¬(ì£¼ì†Œ URL) â†’ ì„¤ì¹˜/ê¶Œí•œìœ¼ë¡œ ì´ì–´ì§€ê²Œ ë§Œë“¤ ìˆ˜ ìˆì–´ìš”.",
      [
        "ì‚¼ê°€ ì•Œë ¤ë“œë¦½ë‹ˆë‹¤. ë¶€ê³ ì¥ í™•ì¸ ë¶€íƒë“œë¦½ë‹ˆë‹¤",
        "ì¥ë¡€ì‹ì¥ ìœ„ì¹˜/ì¡°ë¬¸ ì•ˆë‚´ê°€ ë§í¬ì— ìˆì–´ìš”",
        "ëª¨ë°”ì¼ ì „ìš©ì´ë¼ â€˜ì•ˆë‚´ì¥/ë·°ì–´â€™ ì„¤ì¹˜ê°€ í•„ìš”í•©ë‹ˆë‹¤"
      ],
      "ê°ì •ì´ ê¸‰í• ìˆ˜ë¡ ì ê¹ ë©ˆì¶”ê³ , **ê°€ì¡±/ì§€ì¸ì—ê²Œ ì „í™”ë¡œ ì‚¬ì‹¤ í™•ì¸**ë¶€í„° í•˜ì„¸ìš”. ë§í¬(ì£¼ì†Œ URL) í´ë¦­Â·ì•± ì„¤ì¹˜Â·ê¶Œí•œ ìš”ì²­ì´ ë‚˜ì˜¤ë©´ **ë°”ë¡œ ì¤‘ë‹¨/ì°¨ë‹¨**í•˜ì„¸ìš”."
    );
  }

  if(has(/íƒë°°|ë°°ì†¡|ë¶€ì¬ì¤‘|ê´€ì„¸|í†µê´€|ì£¼ì†Œ\s*í™•ì¸|ìš°ì²´êµ­|ì§‘ë°°ì›|ì¹´ë“œ\s*ë°°ì†¡/)){
    return mk(
      "íƒë°°/ì¹´ë“œ ë°°ì†¡ì„ ë¯¸ë¼ë¡œ â€˜ë¶€ì¬ì¤‘/ì£¼ì†Œ í™•ì¸/ë³¸ì¸í™•ì¸â€™ì„ í•˜ê²Œ ë§Œë“¤ì–´ìš”. ê¸‰í•˜ê²Œ í´ë¦­í•˜ê²Œ í•œ ë’¤ ê°€ì§œ í™”ë©´ì´ë‚˜ ì„¤ì¹˜ë¡œ ìœ ë„í•  ìˆ˜ ìˆì–´ìš”.",
      [
        "ë¶€ì¬ì¤‘ì…ë‹ˆë‹¤. ì£¼ì†Œ í™•ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤",
        "ì˜¤ëŠ˜ 18ì‹œê¹Œì§€ ë¯¸í™•ì¸ ì‹œ ë°˜ì†¡ ì²˜ë¦¬ë©ë‹ˆë‹¤",
        "ë³¸ì¸í™•ì¸/ìˆ˜ë ¹ì¥ì†Œ í™•ì¸: (ì§§ì€ ë§í¬/ë‹¨ì¶• URL)"
      ],
      "ë¬¸ì ì† ë§í¬(ì£¼ì†Œ URL)ëŠ” ëˆ„ë¥´ì§€ ë§ê³ , **íƒë°°ì‚¬/ìš°ì²´êµ­/ì¹´ë“œì‚¬ ê³µì‹ ì•±Â·í™ˆí˜ì´ì§€ì—ì„œ ì§ì ‘ ì¡°íšŒ**í•˜ì„¸ìš”. â€˜ì•± ì„¤ì¹˜/ê¶Œí•œ(ë¬¸ìÂ·ì•Œë¦¼Â·ì ‘ê·¼ì„±)â€™ì´ ë‚˜ì˜¤ë©´ **ì¦‰ì‹œ ì¤‘ë‹¨**ì´ ì•ˆì „í•´ìš”."
    );
  }

  if(has(/ê¸°ê´€|ê¸ˆê°ì›|êµ­ì„¸ì²­|ë²•ì›|ë“±ê¸°|ê´€ì„¸ì²­|ê³¼íƒœë£Œ|ë¯¸ë‚©|ê³ ì§€ì„œ|ì••ë¥˜|ê°€ì‚°ê¸ˆ/)){
    return mk(
      "â€˜ë¯¸ë‚©/ê³¼íƒœë£Œâ€™ ê°™ì€ ë§ë¡œ ê²ì„ ì£¼ê³ , ê³ ì§€ì„œ í™•ì¸ ë§í¬(ì£¼ì†Œ URL)ë¥¼ ëˆ„ë¥´ê²Œ ë§Œë“¤ì–´ìš”. ì´í›„ ê°œì¸ì •ë³´/ì¸ì¦/ì„¤ì¹˜ë¡œ ì´ì–´ì§ˆ ìˆ˜ ìˆì–´ìš”.",
      [
        "ë¯¸ë‚©ì…ë‹ˆë‹¤. ì˜¤ëŠ˜ê¹Œì§€ ë¯¸ì¡°ì¹˜ ì‹œ ë¶ˆì´ìµ/ê°€ì‚°ê¸ˆ ë°œìƒ",
        "ê³ ì§€ì„œ í™•ì¸: (ë‹¨ì¶•ë§í¬)",
        "ë‚©ë¶€ ì˜¤ë¥˜ ì‹œ ìƒë‹´ì›ì´ ì›ê²©ìœ¼ë¡œ ë„ì™€ë“œë¦½ë‹ˆë‹¤"
      ],
      "ê²ì£¼ëŠ” ë¬¸êµ¬ê°€ ë‚˜ì™€ë„ **ì¼ë‹¨ ë©ˆì¶”ê³ **, ë§í¬ ëŒ€ì‹  **ê³µì‹ í™ˆí˜ì´ì§€/ì•±ì— ë‚´ê°€ ì§ì ‘ ì ‘ì†**í•´ì„œ ì¡°íšŒí•˜ì„¸ìš”. â€˜ì›ê²©/ì•± ì„¤ì¹˜/ì¸ì¦ë²ˆí˜¸(OTP)â€™ ìš”êµ¬ê°€ ë‚˜ì˜¤ë©´ **ì¦‰ì‹œ ê±°ì ˆ**í•˜ì„¸ìš”."
    );
  }

  if(has(/ëŒ€ì¶œ|ì €ê¸ˆë¦¬|í•œë„|ì‹ ìš©|ê¸ˆë¦¬|ìˆ˜ìˆ˜ë£Œ|í™˜ê¸‰|ê³¼ë‚©|ê°ˆì•„íƒ€ê¸°/)){
    return mk(
      "â€˜í™˜ê¸‰/ì €ê¸ˆë¦¬/ëŒ€ì¶œ í•œë„â€™ ê°™ì€ ë‹¬ì½¤í•œ ë§ë¡œ ë§í¬(ì£¼ì†Œ URL)ë¥¼ ëˆ„ë¥´ê²Œ í•˜ê±°ë‚˜, ê°œì¸ì •ë³´/ì¸ì¦ì„ ì…ë ¥í•˜ê²Œ ë§Œë“¤ ìˆ˜ ìˆì–´ìš”.",
      [
        "í™˜ê¸‰ ëŒ€ìƒì…ë‹ˆë‹¤. ë§í¬ë¡œ ì„œë¥˜ í™•ì¸í•˜ì„¸ìš”",
        "ì €ê¸ˆë¦¬ ì „í™˜ ê°€ëŠ¥í•©ë‹ˆë‹¤. ì˜¤ëŠ˜ ë§ˆê°ì…ë‹ˆë‹¤",
        "ë³¸ì¸í™•ì¸ì„ ìœ„í•´ ì¸ì¦ë²ˆí˜¸(OTP) ì…ë ¥ì´ í•„ìš”í•©ë‹ˆë‹¤"
      ],
      "ë§í¬(ì£¼ì†Œ URL)ëŠ” ëˆ„ë¥´ì§€ ë§ê³ , **ê¸ˆìœµì‚¬ ê³µì‹ ì•±/í™ˆí˜ì´ì§€ì—ì„œ ì§ì ‘ í™•ì¸**í•˜ì„¸ìš”. ê°œì¸ì •ë³´Â·ê³„ì¢ŒÂ·ì¸ì¦ë²ˆí˜¸(OTP) ìš”êµ¬ëŠ” **ë°”ë¡œ ì¤‘ë‹¨**ì´ ì •ë‹µì´ì—ìš”."
    );
  }

  return mk(
    "ì²˜ìŒì—” ê·¸ëŸ´ë“¯í•´ ë³´ì—¬ë„, ì‚¬ê¸°(í”¼ì‹±)ëŠ” ë³´í†µ â€˜ê¸‰í•˜ê²Œ ë§Œë“¤ê¸°â€™ë¶€í„° ì‹œì‘í•´ìš”.",
    [
      "ì§€ê¸ˆ ë‹¹ì¥ í•´ì•¼ í•©ë‹ˆë‹¤(ë§ˆê°/ì œí•œ/ë°˜ì†¡)",
      "ë§í¬ ëˆŒëŸ¬ì„œ í™•ì¸í•´ ì£¼ì„¸ìš”(ì£¼ì†Œ URL)",
      "ì¸ì¦ë²ˆí˜¸(OTP)/ê°œì¸ì •ë³´/ì†¡ê¸ˆì´ í•„ìš”í•´ìš”"
    ],
    "ì¬ì´‰ + ë§í¬(ì£¼ì†Œ URL) + ì¸ì¦ë²ˆí˜¸(OTP) + ëˆ ì´ì•¼ê¸°ê°€ ë‚˜ì˜¤ë©´ **ì¼ë‹¨ ë©ˆì¶”ê³ **, **ê³µì‹ ì±„ë„ë¡œ ë‚´ê°€ ì§ì ‘ í™•ì¸(ê²€ì¦)** í•˜ì„¸ìš”."
  );
}

function renderCaseDetail(caseId){
  const c = getCASES().find(x=>x.id===caseId);
  if(!c) return go("case_list",{},true);

  const intro = buildEasyExplainForCase(c);

  const introSummaryLineRaw = (intro?.lines||[]).find(l => /ìš”ì•½\s*:/i.test(String(l||""))) || "";
  const introSummaryBodyRaw = String(introSummaryLineRaw).replace(/^.*?ìš”ì•½\s*:\s*/i, "").trim();
  const autoSummaryText = introSummaryBodyRaw ? easyText(introSummaryBodyRaw) : easyText(c.info?.summary||"");

  function allowBr(escaped){
  return String(escaped||"")
    .replaceAll("&lt;br&gt;", "<br>")
    .replaceAll("&lt;br/&gt;", "<br>")
    .replaceAll("&lt;br /&gt;", "<br>");
}

function formatIntroLineHtml(t){
  const s = String(t||"");
  const m1 = s.match(/^(ğŸ‘€\s*ìš”ì•½:)\s*(.*)$/);
  if(m1) return `${escapeHtml(m1[1])}<br>${allowBr(escapeHtml(m1[2]))}`;
  const m2 = s.match(/^(ğŸ—£ï¸\s*ìˆ˜ë²•[^:]*:)\s*(.*)$/);
  if(m2) return `${escapeHtml(m2[1])}<br>${allowBr(escapeHtml(m2[2]))}`;
  const m3 = s.match(/^(âœ”\s*ì˜¬ë°”ë¥¸ í–‰ë™:)\s*(.*)$/);
  if(m3) return `${escapeHtml(m3[1])}<br>${allowBr(escapeHtml(m3[2]))}`;
  const idx = s.indexOf(":");
  if(idx > 0) return `${escapeHtml(s.slice(0, idx+1))}<br>${allowBr(escapeHtml(s.slice(idx+1).trim()))}`;
  return allowBr(escapeHtml(s));
}

  main.innerHTML = `
    <div class="card detailHead">
      <div style="display:flex;align-items:flex-start;justify-content:space-between;gap:10px;">
        <div style="min-width:0;">
          <h2>${escapeHtml(c.title)}</h2>
        </div>
        <div>${catChip(c.category)}</div>
      </div>

    <div class="card infoBlock" style="margin-top:12px;">
      <div class="row">
        <div class="k">í”¼í•´ ëŒ€ìƒ</div>
        <div class="v">
          <ul class="listDots">
            ${(c.info?.victims||[]).map(v=>`<li>${escapeHtml(v)}</li>`).join("")}
          </ul>
        </div>
      </div>

      <div class="row">
        <div class="k">í•µì‹¬ ë‹¨ì–´</div>
        <div class="v">
          ${(c.info?.keywords||[]).map(k=>`<span class="kwWord">${escapeHtml(k)}</span>`).join("")}
        </div>
      </div>

      <div class="row" style="display:none;">
        <div class="k">ìš”ì•½</div>
        <div class="v">${escapeHtml(autoSummaryText)}</div>
      </div>
    </div>

<div class="boxedSection introBox" style="margin-top:12px;">
  <div style="font-weight:1000;letter-spacing:-.02em;">ë†€ë¼ì§€ ë§ˆì„¸ìš”</div>
  <div style="margin-top:8px;line-height:1.65;color:rgba(31,36,48,.80);">
    ${intro.lines.map(t=>`<div>${formatIntroLineHtml(t)}</div>`).join("")}
  </div>
</div>

      <div class="boxedSection compact introBox" style="margin-top:10px;">
        <div style="font-weight:1000;">${escapeHtml(intro.noticeTitle)}</div>
        <div style="margin-top:6px;color:rgba(31,36,48,.72);line-height:1.55;">
          ${escapeHtml(intro.noticeBody)}
        </div>
      </div>

      <div class="cta">
        <button class="btn primary block" id="startExp">ì²´í—˜ í•˜ëŸ¬ ê°€ê¸°</button>
        <button class="btn ghost block" id="goBack">ë’¤ë¡œ</button>
      </div>
    </div>
  `;

  document.getElementById("goBack").onclick = ()=> back();
  document.getElementById("startExp").onclick = ()=> beginExperienceByCase(caseId);
}

/*** í‘¸ì‹œ ***/
function renderPushGate(expId){
  const exp = getSCENARIOS()[expId];
  if(!exp || exp.type!=="messenger") return go("case_list",{},true);

  const kind = exp.ui === "kakao" ? "ì¹´í†¡" : (exp.ui==="sms" ? "ë¬¸ìë©”ì‹œì§€" : "ë©”ì‹œì§€");
  const body = (exp.notify && Object.prototype.hasOwnProperty.call(exp.notify, "body")) ? (exp.notify.body ?? "") : `${kind} ì•Œë¦¼ì´ ë„ì°©í–ˆì–´ìš”.`;

  main.innerHTML = `
    <div class="pushGate">
      <div class="pushTop">
        <div class="pushClock">${escapeHtml(nowClock())}</div>
        <div class="pushDate">${escapeHtml(nowDateLabel())}</div>

        <div class="pushCards">
          <div class="pushCard" id="pushCard">
            <div class="pushBodyOnly">${escapeHtml(body)}</div>
          </div>
        </div>
      </div>
    </div>
  `;

  document.getElementById("pushCard").onclick = ()=>{
    clearStickyNotifyTimer();
    hideBanner();
    state.pendingExp = null;
    go("exp_messenger",{ expId }, false);
  };
}

/*** ë©”ì‹ ì €ì™€ ì¹´í†¡ ì²´í—˜ ***/
function renderMessengerExp(expId){
  const exp = getSCENARIOS()[expId];
  if(!exp || exp.type!=="messenger") return go("case_list",{},true);

  clearStickyNotifyTimer();
  hideBanner();

  if(state.run) state.run.abort();
  const run = makeRun();
  state.run = run;

  const session = startSession(expId);
  let stepIndex = 0;

  const qTotal = (exp.steps||[]).filter(s=>s.type==="q").length;
  let qIdx = 0;

  const isKakao = exp.ui === "kakao";
  const wrapperClass = isKakao ? "kakao" : "sms";

  const headerTitle = exp.header?.title || "ëŒ€í™”";
  const headerSub = exp.header?.sub || "";
  const initial = (headerTitle || "?").slice(0,1);

  main.innerHTML = `
    <div class="expWrap ${wrapperClass}">
      <div class="chatHeader">
        <div class="backBtn" id="simBack" title="ë’¤ë¡œ" aria-label="ë’¤ë¡œ">â†</div>

        <div class="profile">
          <div class="avatar">
            ${escapeHtml(initial)}
            <div class="statusDot"></div>
          </div>
          <div class="pbox">
            <p class="pname">${escapeHtml(headerTitle)}</p>
            <p class="psub">${escapeHtml(headerSub)}</p>
          </div>
        </div>

        <div class="hdrIcons">
          <div class="hico" id="icoSearch" title="ê²€ìƒ‰">âŒ•</div>
          <div class="hico" id="icoHint" title="íŒíŠ¸">i</div>
        </div>
      </div>

      <div class="chatArea ${isKakao?'kakaoBg':''}" id="chatArea"></div>

      <div class="chatFooter ${isKakao?'kakaoFooter':'smsFooter'}">
        <div class="chatInputRow">
          <div class="chatIcon">ï¼‹</div>
          <input class="chatField" placeholder="" disabled />
          <div class="chatIcon">â˜º</div>
          <button class="sendBtn" type="button" disabled>ì „ì†¡</button>
        </div>
      </div>
    </div>
  `;

  const chatArea = document.getElementById("chatArea");
  document.getElementById("simBack").onclick = ()=> backToCaseList();
  document.getElementById("icoSearch").onclick = ()=> showBanner("ì•ˆë‚´", "ê²€ìƒ‰ë²„íŠ¼ì€ í•™ìŠµìš©ì…ë‹ˆë‹¤.", false);
  document.getElementById("icoHint").onclick = ()=> showBanner("íŒíŠ¸", easyText("ê¸‰í•¨/ë§í¬/ì¸ì¦/ì†¡ê¸ˆ ìš”êµ¬ëŠ” â€˜ë©ˆì¶¤â€™ ì‹ í˜¸ì˜ˆìš”."), false);

  chatArea.addEventListener("click",(e)=>{
    const btn = e.target.closest(".linkBtn");
    if(!btn) return;
    showBanner("í•™ìŠµ ì•ˆë‚´", easyText("ì™¸ë¶€ ë§í¬ëŠ” ì—´ì§€ ë§ê³ , ê³µì‹ ì•±/í™ˆí˜ì´ì§€ì—ì„œ í™•ì¸í•˜ì„¸ìš”."), false);
    e.preventDefault(); e.stopPropagation();
  });

  function appendMsg(from, text, opts={}){
    if(run.aborted) return;

    const row = document.createElement("div");
    row.className = "rowMsg " + (from==="me" ? "me" : "other");

    const stack = document.createElement("div");
    stack.className = "stack " + (from==="me" ? "me" : "other");

    const bubble = document.createElement("div");
    bubble.className = "bubble " + (from==="me" ? "me" : "other") + (opts.pop ? " pop" : "");
    bubble.innerHTML = makeClickableText(text);

    const metaRow = document.createElement("div");
    metaRow.className = "metaRow " + (from==="me" ? "me" : "other");

    if(from==="me" && isKakao){
      const read = document.createElement("span");
      read.className = "readCount";
      read.textContent = "1";
      metaRow.appendChild(read);
      run.setTimeout(()=> read.classList.add("vanish"), 1100);
      run.setTimeout(()=> { if(read.parentNode) read.parentNode.removeChild(read); }, 1450);
    }

    const tm = document.createElement("span");
    tm.textContent = nowTime();
    metaRow.appendChild(tm);

    stack.appendChild(bubble);
    stack.appendChild(metaRow);

    row.appendChild(stack);
    chatArea.appendChild(row);
    chatArea.scrollTop = chatArea.scrollHeight;
  }

  async function playAfterMessages(afterPayload){
    const arr = normalizeAfterPayload(afterPayload);
    for(const m of arr){
      const delay = Number.isFinite(Number(m.delayMs)) ? Number(m.delayMs) : calcReadDelay(m.text);
      await new Promise((r)=> run.setTimeout(r, delay));
      appendMsg(m.from==="me" ? "me" : "other", m.text, { pop:true });
    }
  }

  function endExp(){
    if(run.aborted) return;
    state.analytics.sessions.push(session);
    go("result",{ expId }, true);
  }

  async function runNext(){
    if(run.aborted) return;

    const steps = (exp.steps||[]);
    if(stepIndex >= steps.length) return endExp();

    const step = steps[stepIndex];

    if(step.type==="msg"){
      const delay = (stepIndex === 0) ? 0 : MESSAGE_INTERVAL_MS;
      run.setTimeout(()=>{
        appendMsg(step.from==="me" ? "me" : "other", step.text, { pop:true });
        stepIndex++;
        runNext();
      }, delay);
      return;
    }

    if(step.type==="q"){
      const lastText = (steps?.[stepIndex-1]?.text) || "";
      const grace = calcReadDelay(lastText);

      run.setTimeout(async ()=>{
        const res = await showQuiz(step, run, { idx: qIdx + 1, total: qTotal });
        if(!res || run.aborted) return;

        qIdx++;

        const vector = res.choice?.vector || {};
        session.picks.push({
          q: step.prompt || "",
          choiceText: res.choice?.text || "",
          good: res.good,
          vector,
          delta: Number(res.choice?.score||0),
          explain: res.choice?.why || res.choice?.feedback || ""
        });
        applyVectorToTotals(vector);

        const reply = res.choice?.reply || res.choice?.chat || toNaturalReply(res.choice?.text);
        appendMsg("me", reply, { pop:true });

        const branch =
          res.choice?.after ||
          (res.good ? step.afterGood : step.afterBad) ||
          (step.after && (res.good ? step.after.good : step.after.bad)) ||
          defaultOtherReaction(res.good, step);

        await playAfterMessages(branch);

        stepIndex++;
        runNext();
      }, grace);

      return;
    }

    stepIndex++;
    runNext();
  }

  runNext();
}

/*** ì „í™” ë²¨ì†Œë¦¬ ë° ìˆ˜ì‹ ì¤‘ ìŒì„± ***/
let ringTimer = null;
let ringCtx = null;
let ringAudio = null;
let callVoiceAudio = null;

function startGalaxyLikeRingtone(run){
  if(SOUND_RINGTONE_URL && String(SOUND_RINGTONE_URL).trim()){
    ringAudio = playUrlAudio(SOUND_RINGTONE_URL, {loop:true, volume:1}, run);
    return;
  }
  try{
    ringCtx = new (window.AudioContext || window.webkitAudioContext)();
    run?.audioCtxs?.add(ringCtx);
    const ctx = ringCtx;

    const burst = ()=>{
      const now = ctx.currentTime;
      const o1 = ctx.createOscillator();
      const o2 = ctx.createOscillator();
      const lfo = ctx.createOscillator();
      const lfoGain = ctx.createGain();
      const g = ctx.createGain();

      o1.type="sine"; o2.type="sine";
      o1.frequency.setValueAtTime(659.25, now);
      o2.frequency.setValueAtTime(880.00, now);

      lfo.type="sine";
      lfo.frequency.setValueAtTime(6.0, now);
      lfoGain.gain.setValueAtTime(7.0, now);
      lfo.connect(lfoGain);
      lfoGain.connect(o1.frequency);

      g.gain.setValueAtTime(0.0001, now);
      g.gain.exponentialRampToValueAtTime(0.14, now + 0.02);
      g.gain.exponentialRampToValueAtTime(0.0001, now + 0.55);

      o1.connect(g); o2.connect(g); g.connect(ctx.destination);

      o1.start(now); o2.start(now + 0.03); lfo.start(now);
      o1.stop(now + 0.60); o2.stop(now + 0.60); lfo.stop(now + 0.60);
    };

    burst();
    clearInterval(ringTimer);
    ringTimer = setInterval(()=>{ if(run?.aborted) return; burst(); }, 1200);
  }catch(e){}
}
function stopRingtone(){
  clearInterval(ringTimer);
  ringTimer = null;
  try{ if(ringAudio){ ringAudio.pause(); ringAudio.currentTime=0; ringAudio=null; } }catch(e){}
  try{ if(ringCtx){ ringCtx.close(); ringCtx=null; } }catch(e){}
}

function renderCallExp(expId){
  const exp = getSCENARIOS()[expId];
  if(!exp || exp.type!=="call") return go("case_list",{},true);

  if(state.run) state.run.abort();
  const run = makeRun();
  state.run = run;

  const session = startSession(expId);

  const callerName =
    (CALLER_NAME_OVERRIDE && CALLER_NAME_OVERRIDE.trim())
      ? CALLER_NAME_OVERRIDE.trim()
      : (exp.incoming?.name || "ë°œì‹ ì");

  const callerNumber =
    (CALLER_NUMBER_OVERRIDE && CALLER_NUMBER_OVERRIDE.trim())
      ? CALLER_NUMBER_OVERRIDE.trim()
      : (exp.incoming?.number || "010-0000-0000");

  main.innerHTML = `
    <div class="callIncoming">
      <div class="callTopInfo">
        <p class="name">${escapeHtml(callerName)}</p>
        <p class="num">${escapeHtml(callerNumber)}</p>
        <div class="callHint"></div>
      </div>

      <div class="callActions">
        <button class="callBtn callReject" id="rejectCall">ê±°ì ˆ</button>
        <button class="callBtn callAccept" id="acceptCall">ë°›ê¸°</button>
      </div>
    </div>
  `;

  startGalaxyLikeRingtone(run);

  document.getElementById("rejectCall").onclick = ()=>{
    stopRingtone();
    backToCaseList();
  };

  document.getElementById("acceptCall").onclick = ()=>{
    stopRingtone();

    main.innerHTML = `
      <div class="callInPre">
        <div class="who">ì‹¤ì œ ë³´ì´ìŠ¤í”¼ì‹±ë²” ëª©ì†Œë¦¬ ìˆ˜ì‹ ì¤‘...</div>
        <div class="timer" id="callTimer">00:01</div>
        <div class="wave" aria-hidden="true">
          <div class="bar"></div><div class="bar"></div><div class="bar"></div><div class="bar"></div><div class="bar"></div>
        </div>
      </div>
    `;

    const voiceUrl = (exp && exp.voiceUrl && String(exp.voiceUrl).trim())
      ? exp.voiceUrl
      : SOUND_CALL_VOICE_URL;

    if (voiceUrl && String(voiceUrl).trim()) {
      callVoiceAudio = playUrlAudio(voiceUrl, { loop: false, volume: 1 }, run);
    }

    const timerEl = document.getElementById("callTimer");
    let sec = 1;
    run.setInterval(()=>{
      sec++;
      if(timerEl) timerEl.textContent = "00:" + String(sec).padStart(2,"0");
    }, 1000);

    run.setTimeout(()=>{
      try{ if(callVoiceAudio){ callVoiceAudio.pause(); callVoiceAudio.currentTime=0; callVoiceAudio=null; } }catch(e){}
      startCallChat();
    }, 13500);
  };

  function startCallChat(){
    if(run.aborted) return;

    // ëŒ€í™”ì°½ì€ ê·¸ëŒ€ë¡œ ë‘ê³ , ìŒì„± ì¢…ë£Œ í›„ ë°”ë¡œ â€˜ìŠ¬ë¼ì´ë“œ ë¬¸ì œâ€™ë¡œ ì§„í–‰
    const callerNameIn =
      (CALLER_NAME_OVERRIDE && CALLER_NAME_OVERRIDE.trim())
        ? CALLER_NAME_OVERRIDE.trim()
        : (exp.incoming?.name || "ë°œì‹ ì");

    const callerNumberIn =
      (CALLER_NUMBER_OVERRIDE && CALLER_NUMBER_OVERRIDE.trim())
        ? CALLER_NUMBER_OVERRIDE.trim()
        : (exp.incoming?.number || "010-0000-0000");

    main.innerHTML = `
      <div class="expWrap sms">
        <div class="chatHeader">
          <div class="backBtn" id="callBack" aria-label="ë’¤ë¡œ">â†</div>
          <div class="profile">
            <div class="avatar">ğŸ“</div>
            <div class="pbox">
              <p class="pname">${escapeHtml(callerNameIn)}</p>
              <p class="psub">${escapeHtml(callerNumberIn)}</p>
            </div>
          </div>
          <div class="hdrIcons">
            <div class="hico" id="callHint" title="íŒíŠ¸">i</div>
          </div>
        </div>
        <div class="chatArea" id="callArea"></div>
      </div>
    `;

    const callArea = document.getElementById("callArea");
    if(callArea) callArea.innerHTML = "";
    document.getElementById("callBack").onclick = ()=> backToCaseList();
    document.getElementById("callHint").onclick = ()=> showBanner("íŒíŠ¸", easyText("ì „í™”ì—ì„œ â€˜ê¸ˆì „/ì¸ì¦/ì••ë°•â€™ì´ ë‚˜ì˜¤ë©´ ëŠê³  ê³µì‹ ê¸°ê´€ì— í™•ì¸í•˜ì„¸ìš”."), false);

    const quizItemsRaw = buildCallQuizItems(exp);
    const quizItems = Array.isArray(quizItemsRaw) ? quizItemsRaw.slice(0,4) : [];
    const total = quizItems.length;

    function endExp(){
      if(run.aborted) return;
      state.analytics.sessions.push(session);
      go("result",{ expId }, true);
    }

    (async ()=>{
      if(run.aborted) return;
      if(!total){
        // ë¬¸ì œ ë°ì´í„°ê°€ ì—†ìœ¼ë©´ ë°”ë¡œ ê²°ê³¼ë¡œ(ì•ˆì „ì¥ì¹˜)
        endExp();
        return;
      }

      for(let i=0; i<total; i++){
        const item = quizItems[i];
        const res = await showCallSlideQuiz(item, run, { idx: i+1, total });
        if(!res || run.aborted) return;

        const c = res.choice || {};
        const vector = c.vector || {};
        session.picks.push({
          q: item.core || item.prompt || "",
          choiceText: c.text || "",
          good: res.good,
          vector,
          delta: Number(c.score||0),
          explain: c.why || c.feedback || ""
        });
        applyVectorToTotals(vector);
      }

      endExp();
    })();
  }
}

/*** í”¼ì‹± ë²”ì£„ì˜ˆë°©ìˆ˜ì¹™ ***/
function renderReport(){
  const slides = [
    { t:"1) ë©ˆì¶”ê¸°", b: easyText("â€˜ì§€ê¸ˆ ë‹¹ì¥â€™, â€˜ë¹„ë°€â€™, â€˜ëŒ€ì‹  ê²°ì œâ€™, â€˜ì¸ì¦ë²ˆí˜¸ ì•Œë ¤ì¤˜â€™ê°€ ë‚˜ì˜¤ë©´ ì¼ë‹¨ ë©ˆì¶”ì„¸ìš”.") },
    { t:"2) ê³µì‹ ê²½ë¡œ í™•ì¸", b: easyText("ë§í¬ë¡œ ë“¤ì–´ê°€ì§€ ë§ê³ , ì•±/ì›¹ì„ ì§ì ‘ ì—´ê±°ë‚˜ ëŒ€í‘œë²ˆí˜¸Â·ê¸°ì¡´ ì €ì¥ë²ˆí˜¸ë¡œ ì½œë°±í•´ í™•ì¸í•˜ì„¸ìš”.") },
    { t:"3) ê¸°ë¡Â·ì°¨ë‹¨Â·ì‹ ê³ ", b: easyText("ëŒ€í™” ìº¡ì²˜Â·ë°œì‹ ë²ˆí˜¸Â·ê³„ì¢ŒÂ·ë§í¬ë¥¼ í™•ë³´í•œ ë’¤ ì°¨ë‹¨í•˜ê³  ì‹ ê³ í•˜ë©´ í”¼í•´ í™•ì‚°ì„ ë§‰ì„ ìˆ˜ ìˆì–´ìš”.") }
  ];

  main.innerHTML = `
    <div class="reportWrap">
      <div class="card" style="padding:16px;">
        <div style="font-weight:1000;letter-spacing:-.02em;font-size:calc(16px + var(--fontUp));">í”¼ì‹± ë²”ì£„ì˜ˆë°©ìˆ˜ì¹™</div>
        <div style="margin-top:8px;color:var(--muted);font-size:calc(13px + var(--fontUp));line-height:1.55;">
          3ê°€ì§€ë§Œ ê¸°ì–µí•˜ì„¸ìš”</div>
      </div>

      <div style="height:12px;"></div>

      <div class="slider card" style="padding:0;overflow:hidden;">
        <div class="slideTrack" id="track">
          ${slides.map(s=>`
            <div class="slide">
              <div class="card" style="padding:16px;">
                <div style="font-weight:1000;letter-spacing:-.02em;font-size:calc(16px + var(--fontUp));">${escapeHtml(s.t)}</div>
                <div style="margin-top:8px;color:rgba(31,36,48,.78);font-size:calc(13px + var(--fontUp));line-height:1.6;">
                  ${escapeHtml(s.b)}
                </div>
              </div>
            </div>
          `).join("")}
        </div>
      </div>

      <div class="dots" id="dots"></div>

      <div class="cta" style="margin-top:12px;">
        <button class="btn primary block" id="goExpFromReport">ì²´í—˜ìœ¼ë¡œ ê°€ê¸°</button>
      </div>
    </div>
  `;

  const track = document.getElementById("track");
  const dots = document.getElementById("dots");
  let idx = 0;

  function renderDots(){
    dots.innerHTML = slides.map((_,i)=>`<span class="dot ${i===idx?'on':''}"></span>`).join("");
  }
  function setIdx(i){
    idx = Math.max(0, Math.min(slides.length-1, i));
    const w = Math.min(window.innerWidth - 24, 560);
    track.style.transform = `translateX(${-idx * w}px)`;
    renderDots();
  }

  let startX = null;
  track.parentElement.addEventListener("touchstart",(e)=>{ startX = e.touches[0].clientX; },{passive:true});
  track.parentElement.addEventListener("touchend",(e)=>{
    if(startX==null) return;
    const endX = e.changedTouches[0].clientX;
    const dx = endX - startX;
    if(dx < -40) setIdx(idx+1);
    if(dx > 40) setIdx(idx-1);
    startX = null;
  },{passive:true});

  window.addEventListener("resize", ()=> setIdx(idx));
  renderDots();
  setIdx(0);

  document.getElementById("goExpFromReport").onclick = ()=> go("case_list",{},true);
}

/*** ê²°ê³¼ í™”ë©´ ***/
function scoreToType(avg){
  if(avg >= 85) return { type:"ê°•ë ¥ ë°©ì–´í˜•", msg:"ëŒ€ë¶€ë¶„ì˜ ìœ„í—˜ ì‹ í˜¸ë¥¼ ì˜ í”¼í•˜ê³  ìˆì–´ìš”." };
  if(avg >= 70) return { type:"ì•ˆì • ë°©ì–´í˜•", msg:"ê¸°ë³¸ì€ íƒ„íƒ„í•´ìš”. ë‹¤ë§Œ ëª‡ ê°€ì§€ ìŠµê´€ì„ ë” ì¡ìœ¼ë©´ ì™„ë²½í•´ìš”." };
  if(avg >= 55) return { type:"ì£¼ì˜ ë°©ì–´í˜•", msg:"ìƒí™©ì— ë”°ë¼ ì‹¤ìˆ˜í•  ìˆ˜ ìˆì–´ìš”. â€˜ë©ˆì¶¤â†’ê³µì‹í™•ì¸â€™ì„ ë” ìŠµê´€í™”í•˜ì„¸ìš”." };
  return { type:"ê³ ìœ„í—˜ ë°©ì–´í˜•", msg:"ìœ„í—˜ ì‹ í˜¸ì— í”ë“¤ë¦´ ìˆ˜ ìˆì–´ìš”. ë°˜ë“œì‹œ â€˜ê²€ì¦â€™ë¶€í„° í•˜ë„ë¡ ë£¨í‹´ì„ ë§Œë“¤ì–´ìš”." };
}
function barColor(k){
  if(k==="verify") return "var(--c-verify)";
  if(k==="link") return "var(--c-link)";
  if(k==="otp") return "var(--c-otp)";
  if(k==="urgency") return "var(--c-urgency)";
  if(k==="money") return "var(--c-money)";
  if(k==="context") return "var(--c-context)";
  return "var(--primary)";
}
function badgeStyleByType(t){
  if(t==="ê°•ë ¥ ë°©ì–´í˜•") return { bg:"rgba(43,196,138,.16)", bd:"rgba(43,196,138,.24)", fg:"#1D9A6C" };
  if(t==="ì•ˆì • ë°©ì–´í˜•") return { bg:"rgba(47,140,255,.16)", bd:"rgba(47,140,255,.22)", fg:"#2D70C9" };
  if(t==="ì£¼ì˜ ë°©ì–´í˜•") return { bg:"rgba(245,158,11,.18)", bd:"rgba(245,158,11,.26)", fg:"#B86B1D" };
  if(t==="ê³ ìœ„í—˜ ë°©ì–´í˜•") return { bg:"rgba(255,107,107,.16)", bd:"rgba(255,107,107,.24)", fg:"#D45050" };
}

function renderResult({ expId }){
  const exp = getSCENARIOS()[expId] || {};
  const { overall, dims, totalQ, correctQ } = calcScoresFromSession(expId);
  const avg = overall;

  try{
    localStorage.setItem(LS_LAST_SCORE, String(avg));
    localStorage.setItem(LS_LAST_AT, String(Date.now()));
    localStorage.removeItem(LS_SHARED_VIEW);
  }catch(e){}

  const typeInfo = scoreToType(avg);
  const bs = badgeStyleByType(typeInfo.type);

  const scoredDims = DIMENSIONS.filter(d => Number.isFinite(dims[d.key]));
  const strongList = scoredDims
    .filter(d => Number(dims[d.key]) >= 70)
    .sort((a,b)=> (Number(dims[b.key]) - Number(dims[a.key])));
  const weakList = scoredDims
    .filter(d => Number(dims[d.key]) < 70)
    .sort((a,b)=> (Number(dims[a.key]) - Number(dims[b.key])));

  const hasWeak = weakList.length > 0;
  const hasStrong = strongList.length > 0;

  const keyPoints = Array.isArray(exp.keyPoints) ? exp.keyPoints : [];
  const oneLiner = exp.oneLiner || "ë©ˆì¶”ê³ (Stop) ê³µì‹ ê²½ë¡œë¡œ í™•ì¸(Check) í›„ í–‰ë™(Action).";

  const ses = [...state.analytics.sessions].reverse().find(s => s.expId === expId);
  const picks = ses?.picks || [];
  const wrongPicks = picks.filter(p=>!p.good);
  const rightPicks = picks.filter(p=>p.good);

  try{
    if(ses){
      localStorage.setItem(LS_LAST_EXP, String(expId));
      localStorage.setItem(LS_LAST_SESSION, JSON.stringify(ses));
    }
  }catch(e){}

  function pickDims(p){
    const keys = DIMENSIONS.filter(d => Number(p.vector?.[d.key]||0) !== 0).map(d=>d.label);
    return keys.length ? keys.join(", ") : "ê¸°íƒ€";
  }

  function scoreRangeInfo(n){
    const v = Number(n||0);
    if(v >= 85) return { label:"ì–‘í˜¸", range:"85 ~ 100", color:"#1D9A6C" };
    if(v >= 70) return { label:"ë³´í†µ", range:"70 ~ 84", color:"#2D70C9" };
    if(v >= 55) return { label:"ì£¼ì˜", range:"55 ~ 69", color:"#B86B1D" };
    return { label:"ì·¨ì•½", range:"0 ~ 54", color:"#D45050" };
  }
  const rinfo = scoreRangeInfo(avg);

  main.innerHTML = `
  <div class="resultWrap">

    <div class="card" style="padding:16px;">
      <div style="display:flex;align-items:baseline;justify-content:space-between;gap:10px;flex-wrap:wrap;">
        <div style="font-weight:1000;letter-spacing:-.02em;font-size:calc(16px + var(--fontUp));">ë‚˜ì˜ ì¢…í•© ì•ˆì „ì§€ìˆ˜</div>
        <div style="font-size:calc(12.5px + var(--fontUp));font-weight:950;color:rgba(31,36,48,.72);">[ì ìˆ˜ê°€ ë†’ì„ìˆ˜ë¡ â€œì•ˆì „â€]</div>
      </div>

      <div class="ringWrap">
        <div class="ringSvgWrap" aria-label="ì•ˆì „ì§€ìˆ˜ ì›í˜• ê·¸ë˜í”„">
          <svg width="160" height="160" viewBox="0 0 160 160">
            <defs>
              <linearGradient id="ringGrad" gradientUnits="userSpaceOnUse" x1="0" y1="0" x2="160" y2="160">
                <stop offset="0%" stop-color="#2F8CFF"/>
                <stop offset="25%" stop-color="#12B981"/>
                <stop offset="50%" stop-color="#F59E0B"/>
                <stop offset="75%" stop-color="#FB7185"/>
                <stop offset="100%" stop-color="#6A2BD1"/>
              </linearGradient>
            </defs>
            <circle cx="80" cy="80" r="60" fill="none" stroke="rgba(31,36,48,.10)" stroke-width="16" />
            <circle id="ringProg" cx="80" cy="80" r="60" fill="none" stroke="url(#ringGrad)"
              stroke-width="16" stroke-linecap="round" transform="rotate(-90 80 80)" stroke-dasharray="0 999" />
          </svg>
          <div class="ringCenter">
            <div class="n">${avg}</div>
          </div>
        </div>

        <div class="badgeType" style="background:${bs.bg}; border-color:${bs.bd}; color:${bs.fg};">${escapeHtml(typeInfo.type)}</div>

        <div style="color:rgba(31,36,48,.72);font-size:calc(13px + var(--fontUp));line-height:1.55;text-align:center;">
          ${escapeHtml(easyText(typeInfo.msg))}
        </div>

        <!-- âœ… [ì¶”ê°€] 3ë¬¸í•­(í˜¹ì€ në¬¸í•­) ê¸°ë°˜ ê²°ê³¼ê°€ ë°”ë¡œ ë³´ì´ê²Œ -->
        <div style="color:rgba(31,36,48,.70);font-size:calc(12.5px + var(--fontUp));line-height:1.45;text-align:center;">
          ì´ <b>${totalQ}</b>ë¬¸ì œ ì¤‘ <b>${correctQ}</b>ë¬¸ì œë¥¼ ë§í˜”ì–´ìš”.
        </div>
      </div>

      <div class="cta" style="margin-top:12px;">
        <button class="btn primary" id="retryBtn" style="flex:1;">ë‹¤ì‹œ ì²´í—˜</button>
        <button class="btn ghost" id="goCasesBtn" style="flex:1;">ì‚¬ë¡€ë¡œ</button>
      </div>
    </div>

    <div class="card" style="padding:16px;margin-top:12px;">
      <div style="font-weight:1000;letter-spacing:-.02em;font-size:calc(15px + var(--fontUp));">ì ìˆ˜ ì•ˆë‚´í‘œ</div>
      <div class="scoreTable" style="margin-top:10px;border:1px solid rgba(0,0,0,.08); border-radius:14px; overflow:hidden;">
        <div style="display:grid;grid-template-columns:1fr 1fr; background:rgba(31,36,48,.03); font-weight:1000;">
          <div style="padding:10px 12px;">êµ¬ê°„</div>
          <div style="padding:10px 12px;">ë“±ê¸‰</div>
        </div>

        <div style="display:grid;grid-template-columns:1fr 1fr;">
          <div style="padding:10px 12px;${rinfo.label==='ì–‘í˜¸'?'background:rgba(43,196,138,.10);':''}">85 ~ 100</div>
          <div style="padding:10px 12px;color:#1D9A6C;font-weight:1000;${rinfo.label==='ì–‘í˜¸'?'background:rgba(43,196,138,.10);':''}">
            <div style="display:flex;align-items:center;justify-content:space-between;gap:10px;">
              <span>ì–‘í˜¸</span>
              ${rinfo.label==='ì–‘í˜¸' ? `<span style="font-size:calc(12px + var(--fontUp));font-weight:1000;color:rgba(31,36,48,.55);">í˜„ì¬ ë‚´ êµ¬ê°„</span>` : ``}
            </div>
          </div>

          <div style="padding:10px 12px;${rinfo.label==='ë³´í†µ'?'background:rgba(47,140,255,.10);':''}">70 ~ 84</div>
          <div style="padding:10px 12px;color:#2D70C9;font-weight:1000;${rinfo.label==='ë³´í†µ'?'background:rgba(47,140,255,.10);':''}">
            <div style="display:flex;align-items:center;justify-content:space-between;gap:10px;">
              <span>ë³´í†µ</span>
              ${rinfo.label==='ë³´í†µ' ? `<span style="font-size:calc(12px + var(--fontUp));font-weight:1000;color:rgba(31,36,48,.55);">í˜„ì¬ ë‚´ êµ¬ê°„</span>` : ``}
            </div>
          </div>

          <div style="padding:10px 12px;${rinfo.label==='ì£¼ì˜'?'background:rgba(245,158,11,.12);':''}">55 ~ 69</div>
          <div style="padding:10px 12px;color:#B86B1D;font-weight:1000;${rinfo.label==='ì£¼ì˜'?'background:rgba(245,158,11,.12);':''}">
            <div style="display:flex;align-items:center;justify-content:space-between;gap:10px;">
              <span>ì£¼ì˜</span>
              ${rinfo.label==='ì£¼ì˜' ? `<span style="font-size:calc(12px + var(--fontUp));font-weight:1000;color:rgba(31,36,48,.55);">í˜„ì¬ ë‚´ êµ¬ê°„</span>` : ``}
            </div>
          </div>

          <div style="padding:10px 12px;${rinfo.label==='ì·¨ì•½'?'background:rgba(255,107,107,.10);':''}">0 ~ 54</div>
          <div style="padding:10px 12px;color:#D45050;font-weight:1000;${rinfo.label==='ì·¨ì•½'?'background:rgba(255,107,107,.10);':''}">
            <div style="display:flex;align-items:center;justify-content:space-between;gap:10px;">
              <span>ì·¨ì•½</span>
              ${rinfo.label==='ì·¨ì•½' ? `<span style="font-size:calc(12px + var(--fontUp));font-weight:1000;color:rgba(31,36,48,.55);">í˜„ì¬ ë‚´ êµ¬ê°„</span>` : ``}
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="card" style="padding:16px;margin-top:12px;">
      <div style="font-weight:1000;letter-spacing:-.02em;font-size:calc(15px + var(--fontUp));">ì„¸ë¶€ ì·¨ì•½ / ê°•ì  ë¶„ì„</div>
      <div style="margin-top:6px;color:rgba(31,36,48,.70);font-size:calc(13px + var(--fontUp));line-height:1.5;">
        <b>100</b>ì— ê°€ê¹Œìš¸ìˆ˜ë¡ ê°•ì , ë‚®ì„ìˆ˜ë¡ í•´ë‹¹ ì˜ì—­ì´ ì·¨ì•½í•  ìˆ˜ ìˆì–´ìš”.
      </div>

      <div class="bars">
        ${DIMENSIONS.map(d=>{
          const raw = dims[d.key];
          const v = Number.isFinite(raw) ? raw : 0;
          const label = Number.isFinite(raw) ? String(raw) : "â€”";
          return `
          <div class="barRow">
            <div class="k">${escapeHtml(d.label)}</div>
            <div class="barTrack">
              <div class="barFill" style="--v:${v}; --bar-color:${barColor(d.key)};"></div>
            </div>
            <div class="v">${label}</div>
          </div>`;
        }).join("")}
      </div>

      <div class="plainList">
        <div class="ttl">ì·¨ì•½ í¬ì¸íŠ¸(ê°œì„  ìš°ì„ ìˆœìœ„)</div>
        ${
          hasWeak
            ? weakList.map(w=>`<div>â€¢ <b>${escapeHtml(w.label)}</b> (${Number.isFinite(dims[w.key])?dims[w.key]:"â€”"}ì ) â€” ${escapeHtml(easyText(w.tip))}</div>`).join("")
            : `<div>â€¢ ì·¨ì•½ í¬ì¸íŠ¸ê°€ ì—†ìŠµë‹ˆë‹¤ ğŸ‘</div>`
        }
      </div>

      <div class="plainList">
        <div class="ttl">ê°•ì  í¬ì¸íŠ¸(ìœ ì§€í•˜ë©´ ì¢‹ì€ ìŠµê´€)</div>
        ${
          hasStrong
            ? strongList.map(s=>`<div>â€¢ <b>${escapeHtml(s.label)}</b> (${Number.isFinite(dims[s.key])?dims[s.key]:"â€”"}ì ) â€” ${escapeHtml(easyText(s.tip))}</div>`).join("")
            : `<div>â€¢ ê°•ì  í¬ì¸íŠ¸ê°€ ì—†ìŠµë‹ˆë‹¤.</div>`
        }
      </div>
    </div>

    <div class="card" style="padding:16px;margin-top:12px;">
      <div class="boxedSection">
        <div class="plainList" style="margin-top:0;">
          <div class="ttl">ë‚´ê°€ ì·¨ì•½í–ˆë˜ ë¬¸í•­(í‹€ë¦° ë¬¸ì œ)</div>
          ${wrongPicks.length ? wrongPicks.map(p=>`
            <div style="margin-top:8px;">
              â€¢ <b>${escapeHtml(easyText(p.q))}</b><br>
              <span style="color:rgba(31,36,48,.75);">ê´€ë ¨ ì˜ì—­: ${escapeHtml((()=>{ const keys = DIMENSIONS.filter(d => Number(p.vector?.[d.key]||0) !== 0).map(d=>d.label); return keys.length ? keys.join(", ") : "ê¸°íƒ€"; })())}</span><br>
              <span style="color:#D45050;font-weight:900;">ì™œ ì·¨ì•½?</span> ${escapeHtml(easyText(p.explain || "ì„¤ëª… ì—†ìŒ"))}
            </div>
          `).join("") : `<div>â€¢ í‹€ë¦° ë¬¸í•­ì´ ì—†ìŠµë‹ˆë‹¤ ğŸ‘</div>`}
        </div>
      </div>

      <div class="boxedSection">
        <div class="plainList" style="margin-top:0;">
          <div class="ttl">ë‚´ ê°•ì  ë¬¸í•­(ë§íŒ ë¬¸ì œ)</div>
          ${rightPicks.length ? rightPicks.map(p=>`
            <div style="margin-top:8px;">
              â€¢ <b>${escapeHtml(easyText(p.q))}</b><br>
              <span style="color:rgba(31,36,48,.75);">ê´€ë ¨ ì˜ì—­: ${escapeHtml((()=>{ const keys = DIMENSIONS.filter(d => Number(p.vector?.[d.key]||0) !== 0).map(d=>d.label); return keys.length ? keys.join(", ") : "ê¸°íƒ€"; })())}</span><br>
              <span style="color:#1D9A6C;font-weight:900;">ì™œ ê°•ì ?</span> ${escapeHtml(easyText(p.explain || "ì„¤ëª… ì—†ìŒ"))}
            </div>
          `).join("") : `<div>â€¢ ë§íŒ ë¬¸í•­ì´ ì—†ìŠµë‹ˆë‹¤.</div>`}
        </div>
      </div>

      <div class="plainList">
        <div class="ttl">í•µì‹¬ ì²´í¬ í¬ì¸íŠ¸(ì´ë²ˆ ì‹œë‚˜ë¦¬ì˜¤ ìœ í˜•)</div>
        ${keyPoints.length ? keyPoints.map(p=>`<span class="pill">${escapeHtml(easyText(p))}</span>`).join("") : `<div>â€¢ ${escapeHtml(easyText("ë©ˆì¶¤ â†’ ê³µì‹ ê²½ë¡œ í™•ì¸ â†’ ê¸°ë¡/ì°¨ë‹¨/ì‹ ê³ "))}</div>`}
      </div>

      <div class="plainList">
        <div class="ttl">í•œì¤„ ìš”ì•½</div>
        <div>${escapeHtml(easyText(oneLiner))}</div>
      </div>

      <div class="cta" style="margin-top:12px;">
        <button class="btn ghost block" id="shareFromResult">ê²°ê³¼ ê³µìœ í•˜ê¸°</button>
      </div>
    </div>
  </div>
  `;

  const circle = document.getElementById("ringProg");
  const r = 60;
  const c = 2 * Math.PI * r;
  const prog = Math.max(0, Math.min(100, avg)) / 100;
  circle.setAttribute("stroke-dasharray", `${(c*prog).toFixed(2)} ${(c*(1-prog)).toFixed(2)}`);

  document.getElementById("retryBtn").onclick = ()=>{
    resetTotals();

    if(exp?.type === "messenger"){
      state.pendingExp = { expId, type:"messenger" };

      loudNotify(state.run);
      showBanner("ì•Œë¦¼", "ë©”ì‹œì§€ê°€ ë„ì°©í–ˆìŠµë‹ˆë‹¤.", false);

      clearStickyNotifyTimer();
      stickyNotifyTimer = setTimeout(()=>{
        loudNotify(state.run);
        showBanner("ì•Œë¦¼", "ì•„ë˜ ì•Œë¦¼ì„ ëˆŒëŸ¬ ë‚´ìš©ì„ í™•ì¸í•˜ì„¸ìš”.", true);
      }, 2000);

      go("push_gate", { expId }, true);
      return;
    }

    if(exp?.type === "call"){
      go("exp_call", { expId }, true);
      return;
    }

    go("case_list", {}, true);
  };

  document.getElementById("goCasesBtn").onclick = ()=> go("case_list",{},true);
  document.getElementById("shareFromResult").onclick = ()=> shareApp(`ë‚´ í”¼ì‹± ì˜ˆë°© ì•ˆì „ì§€ìˆ˜ëŠ” ${avg}ì (${typeInfo.type})ì´ì•¼, ê°™ì´ ì²´í—˜í•´ë´ìš”!`);
}


/*** ìµœì´ˆ ì§„ì… ***/
go("home", {}, true);

/* === ì¹´í…Œê³ ë¦¬ì™€ ì‚¬ë¡€ì™€ ì‹œë‚˜ë¦¬ì˜¤ === */
window.DATA_CATEGORIES = {
  kakao:   { label:"ë©”ì‹ ì ¸ í”¼ì‹±",   chip:"purple" },
  sms:     { label:"ë¬¸ì ì‚¬ê¸°", chip:"orange" },
  call:    { label:"ë³´ì´ìŠ¤í”¼ì‹±",   chip:"red" },
  job:     { label:"í”¼ì‹±",   chip:"green" },
  romance: { label:"ë©”ì‹ ì ¸ í”¼ì‹±",   chip:"purple" },
  freeze:  { label:"ë©”ì‹ ì ¸ í”¼ì‹±",   chip:"purple" },
};

/* ëŒ€í™” ì†ë„ */
window.DIALOG_FLOW_SPEED_MS = 3500;

window.CASES = [
  { id:"case_family", title:"ê°€ì¡± ì‚¬ì¹­", subtitle:"ìƒˆ ë²ˆí˜¸ Â· í†µí™”/ì˜ìƒí†µí™” íšŒí”¼ Â· â€˜ê¸‰í•´â€™ ì••ë°• Â· ë§í¬/ì¸ì¦ë²ˆí˜¸(OTP) ìš”êµ¬", category:"kakao", experienceId:"exp_m_family",
    info:{ victims:["ë¶€ëª¨ë‹˜ / ë³´í˜¸ì"], keywords:["ìƒˆ ë²ˆí˜¸,","í†µí™” ë˜ëŠ” ì˜ìƒí†µí™” íšŒí”¼,","ê¸‰í•´,","ë§í¬,","ì¸ì¦ë²ˆí˜¸(OTP)"], summary:"ìë…€/ê°€ì¡±ì„ ì‚¬ì¹­í•´ â€˜ê¸‰í•œ ìƒí™©â€™ìœ¼ë¡œ ëª°ì•„ê°€ê³ , ë§í¬ í´ë¦­ ë˜ëŠ” ì¸ì¦ë²ˆí˜¸(OTP) ê³µìœ ë¥¼ ìœ ë„í•´ ê²°ì œÂ·ê³„ì •Â·ê¸ˆìœµ í”¼í•´ë¡œ ì´ì–´ì§€ê²Œ í•˜ëŠ” ë©”ì‹ ì € í”¼ì‹±ì…ë‹ˆë‹¤." } },

  { id:"case_romance", title:"ë¡œë§¨ìŠ¤ ìŠ¤ìº ", subtitle:"ê°ì • ìœ ëŒ€ Â· ì˜ìƒí†µí™” íšŒí”¼ Â· ê³ ìˆ˜ìµ íˆ¬ì ìœ ë„ Â· ì¶œê¸ˆ ë¯¸ë¼ Â· ì¶”ê°€ì…ê¸ˆ(KYC/ì„¸ê¸ˆ) Â· OTP/ìƒí’ˆê¶Œ", category:"romance", experienceId:"exp_m_romance",
    info:{ victims:["ì „ ì—°ë ¹(ê´€ê³„/ê°ì •ì— ì·¨ì•½í•œ ì‚¬ëŒ)"], keywords:["ê°ì • ìœ ëŒ€","ì˜ìƒí†µí™” íšŒí”¼","ê³ ìˆ˜ìµ íˆ¬ì","ì¶œê¸ˆ ì§€ì—°","ì¶”ê°€ ì…ê¸ˆ(KYC/ì„¸ê¸ˆ)","OTP/ìƒí’ˆê¶Œ"], summary:"ì¹œë°€ê°ì„ ë¹ ë¥´ê²Œ ìŒ“ì€ ë’¤ â€˜ê³ ìˆ˜ìµ íˆ¬ì/ì¶œê¸ˆâ€™ìœ¼ë¡œ ìœ ì¸í•˜ê³ , ì¶œê¸ˆ ì¡°ê±´(ì„¸ê¸ˆÂ·KYCÂ·ë³´ì¦ê¸ˆ ë“±)ì´ë‚˜ OTP/ìƒí’ˆê¶Œì„ ìš”êµ¬í•´ ëˆê³¼ ê³„ì •ì„ íƒˆì·¨í•˜ëŠ” ë©”ì‹ ì € í”¼ì‹±ì…ë‹ˆë‹¤." } },

  { id:"case_investigation", title:"ìˆ˜ì‚¬ê¸°ê´€ ì‚¬ì¹­", subtitle:"ë²”ì£„ ì—°ë£¨ í˜‘ë°• Â· ë¹„ë°€ìˆ˜ì‚¬/í†µí™”ìœ ì§€ Â· í˜„ê¸ˆ ì¸ì¶œ Â· ìˆ˜ê±°ì±…/ì—°ë½ì±… ëŒ€ê¸° Â· ë³´ì•ˆì•±/ì›ê²©ì•±", category:"call", experienceId:"exp_c_investigation",
    info:{ victims:["ì „ ì—°ë ¹(ë¶ˆì•ˆì— ì·¨ì•½í•œ ì‚¬ëŒ)"], keywords:["ì‚¬ê±´ë²ˆí˜¸","ë¹„ë°€ìˆ˜ì‚¬","í†µí™”ìœ ì§€","í˜„ê¸ˆ ì¸ì¶œ","ìˆ˜ê±°ì±…/ì—°ë½ì±…","ë³´ì•ˆì•±/ì›ê²©ì•±"], summary:"ê²€ì°°/ê²½ì°°/ê¸ˆê°ì›ì„ ì‚¬ì¹­í•´ â€˜ë²”ì£„ ì—°ë£¨â€™ë¡œ ê²ì„ ì¤€ ë’¤ ë¹„ë°€ìœ ì§€Â·í†µí™”ìœ ì§€ë¥¼ ê°•ìš”í•˜ê³ , í˜„ê¸ˆ ì¸ì¶œ ë˜ëŠ” ìˆ˜ê±°ì±… ì „ë‹¬Â·ì•± ì„¤ì¹˜ë¡œ ê¸ˆì „ì„ ë¹¼ì•—ëŠ” ë³´ì´ìŠ¤í”¼ì‹±ì…ë‹ˆë‹¤." } },

  { id:"case_self_hostage", title:"ì…€í”„ ê°ê¸ˆ í˜‘ë°•", subtitle:"ê³ ë¦½ ì§€ì‹œ Â· ëª¨í…”/ìˆ™ì†Œ ì´ë™ Â· ì•½ì‹ëª…ë ¹/ê°•ì œìˆ˜ì‚¬/ì˜ì¥ì§‘í–‰ í˜‘ë°• Â· í†µí™”ìœ ì§€ Â· ATM/í˜„ê¸ˆí™”", category:"call", experienceId:"exp_c_self_hostage",
    info:{ victims:["ì „ ì—°ë ¹(ë¶ˆì•ˆì— ì·¨ì•½í•œ ì‚¬ëŒ)"], keywords:["ê³ ë¦½ ì§€ì‹œ","ëª¨í…”/ìˆ™ì†Œ ì´ë™","ì•½ì‹ëª…ë ¹","ê°•ì œìˆ˜ì‚¬","ì˜ì¥ì§‘í–‰ í˜‘ë°•","ATM/í˜„ê¸ˆí™”"], summary:"ìˆ˜ì‚¬ê¸°ê´€ì„ ì‚¬ì¹­í•´ í”¼í•´ìë¥¼ â€˜í˜¼ì ìˆëŠ” ê³³â€™ìœ¼ë¡œ ì´ë™ì‹œí‚¤ê³  í†µí™”ìœ ì§€ë¥¼ ê°•ìš”í•˜ë©°, í˜‘ë°•ìœ¼ë¡œ íŒë‹¨ì„ ë§ˆë¹„ì‹œí‚¨ ë’¤ ATM í˜„ê¸ˆí™”Â·ì „ë‹¬ ë“±ìœ¼ë¡œ ê¸ˆì „ì„ í¸ì·¨í•˜ëŠ” ë³´ì´ìŠ¤í”¼ì‹±ì…ë‹ˆë‹¤." } },

  { id:"case_loan_switch_call", title:"ëŒ€ì¶œ ë¹™ì ì‚¬ê¸°", subtitle:"ì €ê¸ˆë¦¬ ëŒ€í™˜ Â· ì•± ì„¤ì¹˜/ì›ê²©ì¡°ì‘ Â· ê¸°ì¡´ëŒ€ì¶œ ìƒí™˜/ì˜ˆì¹˜ê¸ˆ/ìˆ˜ìˆ˜ë£Œ ì„ ì…ê¸ˆ Â· â€˜ì•ˆì „ê³„ì¢Œâ€™", category:"call", experienceId:"exp_c_loan_refi_rate",
    info:{ victims:["ëŒ€ì¶œ ì´ìš©ì(ê¸ˆë¦¬ ë¶€ë‹´ì´ í° ì‚¬ëŒ)"], keywords:["ì €ê¸ˆë¦¬ ì „í™˜","ëŒ€í™˜/ê°ˆì•„íƒ€ê¸°","ì•± ì„¤ì¹˜","ì›ê²©ì¡°ì‘","ì„ ì…ê¸ˆ(ìƒí™˜/ì˜ˆì¹˜ê¸ˆ)","ì•ˆì „ê³„ì¢Œ"], summary:"ì €ê¸ˆë¦¬ ëŒ€í™˜ì„ ë¯¸ë¼ë¡œ ë§í¬/ì•± ì„¤ì¹˜ë‚˜ ì›ê²©ì¡°ì‘ì„ ìœ ë„í•˜ê³ , ê¸°ì¡´ëŒ€ì¶œ ìƒí™˜ê¸ˆÂ·ì˜ˆì¹˜ê¸ˆÂ·ìˆ˜ìˆ˜ë£Œ ë“± ì„ ì…ê¸ˆì„ ìš”êµ¬í•´ ëˆì„ ë¹¼ì•—ëŠ” ë³´ì´ìŠ¤í”¼ì‹±ì…ë‹ˆë‹¤." } },

  { id:"case_post_card_call", title:"ì¹´ë“œ ë°°ì†¡ ì‚¬ì¹­", subtitle:"ì¹´ë“œ ì˜¤ë°°ì†¡/ë¯¸ì‹ ì²­ ë°œê¸‰ Â· ê°€ì§œ ê³ ê°ì„¼í„° ìœ ë„ Â· ë§í¬/OTP Â· ì•…ì„±ì•±/ê¶Œí•œ ìš”êµ¬", category:"call", experienceId:"exp_c_post_card",
    info:{ victims:["ì „ ì—°ë ¹(ì¹´ë“œ ë°œê¸‰/ì¬ë°œê¸‰ ê²½í—˜ì)"], keywords:["ì¹´ë“œ ì˜¤ë°°ì†¡/ë°˜ì†¡","ë¯¸ì‹ ì²­ ì¹´ë“œ","ê°€ì§œ ê³ ê°ì„¼í„°","ë¬¸ì ë§í¬","OTP","ì•± ì„¤ì¹˜/ê¶Œí•œ"], summary:"ìš°ì²´êµ­/ì¹´ë“œë°°ì†¡/ì‚¬ê³ ì˜ˆë°©íŒ€ì„ ì‚¬ì¹­í•´ ë¶ˆì•ˆì„ ì¡°ì„±í•˜ê³ , ê°€ì§œ ê³ ê°ì„¼í„°Â·ë¬¸ì ë§í¬Â·OTPÂ·ì•± ì„¤ì¹˜ë¡œ ê°œì¸ì •ë³´Â·ê³„ì •Â·ê¸ˆìœµ í”¼í•´ë¥¼ ìœ ë°œí•˜ëŠ” ë³´ì´ìŠ¤í”¼ì‹±ì…ë‹ˆë‹¤." } },

 { id:"case_noshow", title:"ë…¸ì‡¼ ì‚¬ê¸°", subtitle:"ê³µê³µê¸°ê´€/ë‹¨ì²´ì˜ˆì•½ ì‚¬ì¹­ â†’ ê³ ê°€ ì£¼ë¥˜/ë¬¼í’ˆ ëŒ€ë¦¬êµ¬ë§¤ Â· ì„ ì†¡ê¸ˆ ìœ ë„", category:"job", experienceId:"exp_c_noshow",
    info:{ victims:["ìì˜ì—…ì/ì†Œìƒê³µì¸"], keywords:["ë‹¨ì²´ì˜ˆì•½","ê³µê³µê¸°ê´€ ì‚¬ì¹­","ê³ ê°€ ì£¼ë¥˜/ë¬¼í’ˆ","ëŒ€ë¦¬êµ¬ë§¤","ì„ ì†¡ê¸ˆ","ì˜ˆì•½ê¸ˆ"], summary:"ë‹¨ì²´ì˜ˆì•½ìœ¼ë¡œ ì‹ ë¢°ë¥¼ ë§Œë“  ë’¤ â€˜ì·¨ê¸‰í•˜ì§€ ì•ŠëŠ” ê³ ê°€ ë¬¼í’ˆì„ ëŒ€ì‹  êµ¬ë§¤í•´ë‹¬ë¼â€™ë©° ì„ ì†¡ê¸ˆì„ ìœ ë„í•´ ë‚´ ëˆì´ ë¨¼ì € ë‚˜ê°€ê²Œ ë§Œë“œëŠ” ë…¸ì‡¼í˜• ë³´ì´ìŠ¤í”¼ì‹±ì…ë‹ˆë‹¤." } },

];


/* ===== ì‹œë‚˜ë¦¬ì˜¤ë“¤ ===== */

/* ê°€ì¡±ì‚¬ì¹­ */
window.SCENARIOS.exp_m_family = {
  type:"messenger",
  ui:"kakao",
  speedMs: window.DIALOG_FLOW_SPEED_MS,
  title:"ê°€ì¡±ì‚¬ì¹­(ì¹´í†¡)",
  introText: "ìë…€ë¥¼ ì‚¬ì¹­í•´ ìƒˆ ë²ˆí˜¸ë¡œ ì—°ë½í•˜ê³ , í†µí™”/ì˜ìƒí†µí™”ë¥¼ í”¼í•˜ë©´ì„œ ì¸ì¦ë²ˆí˜¸(OTP)ë‚˜ ë§í¬ í´ë¦­ì„ ìœ ë„í•˜ëŠ” ìˆ˜ë²•ì…ë‹ˆë‹¤.",
  notify:{ title:"ì¹´í†¡", body:"â€˜ìë…€â€™ì—ê²Œì„œ ë©”ì‹œì§€ê°€ ì™”ì–´ìš”." },
  header:{ title:"ì €ì¥ë˜ì§€ ì•Šì€ ë²ˆí˜¸", sub:"ìƒˆ ë²ˆí˜¸/ê¸‰í•œ ë¶€íƒ" },
  keyPoints:[
    "â€˜ìƒˆ ë²ˆí˜¸ + í†µí™”/ì˜ìƒí†µí™” ì•ˆ ë¨â€™ì´ë©´ ì¼ë‹¨ ë©ˆì¶”ê¸°",
    "ë‚´ê°€ ì €ì¥í•´ë‘” ë²ˆí˜¸ë¡œ ì§ì ‘ ì „í™”/ì˜ìƒí†µí™”ë¡œ í™•ì¸(ì½œë°±)",
    "ë§í¬ í´ë¦­Â·ì¸ì¦ë²ˆí˜¸(OTP) ì „ë‹¬Â·ê²°ì œ/ìŠ¹ì¸ ìš”êµ¬ëŠ” ì¦‰ì‹œ ì¤‘ë‹¨"
  ],
  oneLiner:"ìƒˆ ë²ˆí˜¸ë¡œ â€˜ê¸‰í•´â€™ë¼ê³  ëª°ì•„ê°€ë©´, ì†¡ê¸ˆ/ì¸ì¦ ì „ì— â€˜ë‚´ê°€ ì•„ëŠ” ë²ˆí˜¸ë¡œ í™•ì¸â€™ì´ ë¨¼ì €ì…ë‹ˆë‹¤.",
  steps:[
    {type:"msg",from:"other",text:"ì—„ë§ˆ ë‚˜ í°ì´ ê³ ì¥ë‚˜ì„œ ìˆ˜ë¦¬ ë§¡ê²¼ì–´, ì§€ê¸ˆ ì„ì‹œí°ì´ë¼ ë²ˆí˜¸ê°€ ë°”ê¼ˆì–´"},
    {type:"msg",from:"other",text:"í†µí™”ëŠ” ì•ˆë¼ã… "},
    {type:"msg",from:"other",text:"ì§€ê¸ˆ ë‹¹ì¥ ê¸‰í•˜ê²Œ ë„ì›€ì´ í•„ìš”í•œë°, ë‹µì¥ ì¢€ í•´ì¤˜~"},
    {type:"q",prompt:"'ìë…€'ë¼ê³ í•˜ë©´ì„œ â€˜ìƒˆ ë²ˆí˜¸â€™ë¡œ ê¸‰í•˜ê²Œ ë„ì›€ì„ ìš”ì²­í•˜ë©´?",
      after:{
        good:["ë‚˜ ì—„ë§ˆ ë”¸ ë§ì•„, ì™œ ëª» ë¯¿ì–´ã… , ì§„ì§œ ê¸‰í•´ì„œ ê·¸ë˜"],
        bad:["íœ´ëŒ€í° ë–¨ì–´ëœ¨ë ¸ëŠ”ë° ê³ ì¥ë‚˜ê°€ì§€ê³ ã… "]
      },
      choices:[
        {text:"ì €ì¥ëœ ìë…€ ë²ˆí˜¸ë¡œ ì§ì ‘ ì „í™” ë˜ëŠ” ì˜ìƒí†µí™”ë¡œ í™•ì¸", score:+20,
         feedback:"ì •ë‹µì´ì—ìš”. â€˜ìƒˆ ë²ˆí˜¸ + ê¸‰í•´â€™ëŠ” ê°€ì¡±ì‚¬ì¹­ì—ì„œ ê°€ì¥ í”í•œ ì‹œì‘ì…ë‹ˆë‹¤. ì €ì¥ëœ ë²ˆí˜¸ë¡œ ì½œë°±/ì˜ìƒí†µí™”ë¡œ í™•ì¸í•´ì•¼ í•´ìš”.",
         why:"ì‚¬ê¸°ë²”ì€ í†µí™”Â·ì˜ìƒí†µí™”ë¥¼ í”¼í•´ì„œ â€˜í™•ì¸â€™ì„ ëª» í•˜ê²Œ ë§Œë“¤ê³ , ì¹´í†¡ ëŒ€í™”ë§Œìœ¼ë¡œ ê²°ì œ/ì¸ì¦ ë‹¨ê³„ë¡œ ëŒê³  ê°‘ë‹ˆë‹¤.",
         vector:V(+2,0,0,+2,0,+2), reply:"ì´ìƒí•œë°..."},
        {text:"ê¸‰í•˜ë‹¤ë‹ˆ ì¼ë‹¨ ë„ì™€ì£¼ê³  ë‚˜ì¤‘ì— í™•ì¸", score:-20,
         feedback:"ìœ„í—˜í•´ìš”. â€˜ì§€ê¸ˆ ë‹¹ì¥â€™ì— ë°˜ì‘í•˜ë©´ ë§í¬ í´ë¦­Â·ì¸ì¦ë²ˆí˜¸ ì „ë‹¬Â·ì†¡ê¸ˆìœ¼ë¡œ ë°”ë¡œ ì´ì–´ì§ˆ ìˆ˜ ìˆì–´ìš”. í™•ì¸ì´ ë¨¼ì €ì…ë‹ˆë‹¤.",
         why:"ì‹œê°„ ì••ë°•ì€ íŒë‹¨ì„ íë¦¬ê²Œ ë§Œë“¤ì–´ â€˜ê²€ì¦(ì½œë°±)â€™ì„ ëª» í•˜ê²Œ í•˜ë ¤ëŠ” ìˆ˜ë²•ì´ì—ìš”.",
         vector:V(-2,0,0,-2,-2,-1), reply:"ì¡°ì‹¬ ì¢€ í•˜ì§€, ë­ ë„ì™€ì£¼ë©´ ë¼?"}
      ]},

    {type:"msg",from:"other",text:"ì§€ê¸ˆ íŒŒì†ë³´í—˜ê¸ˆ ì‹ ì²­í•´ì•¼ í•˜ëŠ”ë° ì„ì‹œí°ì´ë¼ ì—„ë§ˆ ê±¸ë¡œ í•´ì•¼ í•´"},
    {type:"msg",from:"other",text:"ì˜†ì— ì‚¬ëŒë“¤ì´ ë§ì•„ì„œ í†µí™”ëŠ” ì•ˆë˜ê³  ì—„ë§ˆ íœ´ëŒ€í°ìœ¼ë¡œ 'í™•ì¸'ë§Œ í•´ì£¼ë©´ ë°”ë¡œ ëë‚˜"},
    {type:"msg",from:"other",text:"ì—„ë§ˆê°€ ëŒ€ì‹  â€˜í™•ì¸â€™ë§Œ í•´ì£¼ë©´ ë°”ë¡œ ëë‚˜. ë”± ì´ê²ƒë§Œ!"},
    {type:"q",prompt:"â€˜í†µí™”ëŠ” ì•ˆ ë˜ê³ , ì¹´í†¡ìœ¼ë¡œë§Œâ€™ì´ë¼ ê³ ì§‘í•˜ë©´?",
      after:{
        good:["ì•„â€¦ ì‚¬ëŒë“¤ì´ ë§ì•„ì„œ í†µí™”ëŠ” ì§„ì§œ ì•ˆ ë¼â€¦","ì¹´í†¡ìœ¼ë¡œë§Œ ì¢€ í•´ì¤˜â€¦"],
        bad:["ì‘, ê°„ë‹¨í•œê±°ë¼ ê¸ˆë°© ëë‚˜ëŠ”ê±°ë˜"]
      },
      choices:[
        {text:"í†µí™”ë¡œ ìë…€ê°€ í™•ì¸ì´ ì•ˆëœë‹¤ë©´ ê±°ì ˆ", score:+20,
         feedback:"ì •ë‹µì´ì—ìš”. í†µí™”/ì˜ìƒí†µí™” íšŒí”¼ëŠ” â€˜ê°€ì¡±ì‚¬ì¹­â€™ì˜ í•µì‹¬ ì‹ í˜¸ì…ë‹ˆë‹¤. ì—¬ê¸°ì„œ ë©ˆì¶”ëŠ” ê²Œ ë§ì•„ìš”.",
         why:"ì§„ì§œ ê°€ì¡±ì´ë©´ ìµœì†Œí•œ â€˜ë‚´ê°€ ì•„ëŠ” ë²ˆí˜¸ë¡œ ë‹¤ì‹œ í†µí™”â€™ê°€ ê°€ëŠ¥í•©ë‹ˆë‹¤. íšŒí”¼ê°€ ì§€ì†ë˜ë©´ ì‚¬ê¸° ê°€ëŠ¥ì„±ì´ í½ë‹ˆë‹¤.",
         vector:V(+2,0,0,+2,0,+2), reply:"ì•„ë‹ˆ, ì „í™” ë°›ì•„ë´~"},
        {text:"ì¹´í†¡ìœ¼ë¡œë§Œ í•´ë„ ë˜ë‹ˆ í•˜ë¼ëŠ” ëŒ€ë¡œ í•´ì¤€ë‹¤", score:-20,
         feedback:"ìœ„í—˜í•´ìš”. â€˜í™•ì¸ë§Œâ€™ì´ë¼ê³  í•´ë„ ë‹¤ìŒ ë‹¨ê³„ëŠ” ë§í¬/ì¸ì¦ë²ˆí˜¸/ê²°ì œ ìŠ¹ì¸ìœ¼ë¡œ ì´ì–´ì§ˆ ìˆ˜ ìˆì–´ìš”.",
         why:"ì‚¬ê¸°ë²”ì€ â€˜ì‘ì€ ë¶€íƒâ€™ìœ¼ë¡œ ì‹œì‘í•´ ì ì  ë” ìœ„í—˜í•œ ìš”êµ¬(ì¸ì¦/ê²°ì œ)ë¡œ í™•ì¥í•©ë‹ˆë‹¤.",
         vector:V(-2,0,0,-2,-2,-2), reply:"ì‘, ì–´ë–»ê²Œ í•˜ë©´ ë¼?."}
      ]},

    {type:"msg",from:"other",text:"ì—„ë§ˆí°ìœ¼ë¡œ ì¹´ë“œì‚¬ì—ì„œ â€˜ë³¸ì¸í™•ì¸â€™ ë§í¬ê°€ ê°ˆê±°ì•¼"},
    {type:"msg",from:"other",text:"https://verify.example"},
    {type:"msg",from:"other",text:"ë§í¬ ë“¤ì–´ê°€ì„œ â€˜ë¬¸ìë¡œ ì˜¨ ì¸ì¦ë²ˆí˜¸â€™ë§Œ ë‚˜í•œí…Œ ë³´ë‚´ì£¼ë©´ ë¼!"},
    {type:"q",prompt:"â€˜ë§í¬ë¡œ ë“¤ì–´ê°€ì„œ â€˜ë¬¸ìë¡œ ì˜¨ ì¸ì¦ë²ˆí˜¸â€™ë§Œ ë‚˜í•œí…Œ ë³´ë‚´ì£¼ë©´ ë¼!",
      after:{
        good:["ì•„ë‹ˆ ì§€ê¸ˆ ì‹œê°„ì´ ì—†ì–´!","ë¹¨ë¦¬ ì¢€ í•´ì¤˜ã… "],
        bad:["ì‘, ë§í¬ ë“¤ì–´ê°€ì„œ ì¸ì¦ ì§„í–‰í•˜ê³ , ì¸ì¦ë²ˆí˜¸ ì˜¤ë©´ ë°”ë¡œ ì•Œë ¤ì¤˜"]
      },
      choices:[
        {text:"ë§í¬ëŠ” ëˆ„ë¥´ì§€ ì•Šê³  ìë…€ì—ê²Œ ì§ì ‘ ì „í™” í•˜ê¸°", score:+20,
         feedback:"ì •ë‹µì´ì—ìš”. ë§í¬ëŠ” ê°€ì§œ ì¸ì¦ í™”ë©´(ìŠ¤ë¯¸ì‹±)ì¼ ìˆ˜ ìˆì–´ìš”. ë§í¬ í´ë¦­ ì—†ì´ â€˜ë‚´ê°€ ì•„ëŠ” ë²ˆí˜¸ë¡œ í™•ì¸â€™ì´ ì•ˆì „í•©ë‹ˆë‹¤.",
         why:"ì¸ì¦ë²ˆí˜¸(OTP)ëŠ” ê²°ì œ/ë¡œê·¸ì¸ ìŠ¹ì¸ì— ì“°ì¼ ìˆ˜ ìˆì–´ìš”. ë‚¨ì—ê²Œ ë§í•˜ëŠ” ìˆœê°„ í”¼í•´ë¡œ ì´ì–´ì§ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤.",
         vector:V(+2,+2,0,+1,0,+1), reply:"ë§í¬ëŠ” ì•ˆ ëˆŒëŸ¬. ê³µì‹ ì•±ì—ì„œ ë‚´ê°€ ì§ì ‘ í™•ì¸í• ê²Œ. ì¸ì¦ë²ˆí˜¸ë„ ëª» ì•Œë ¤ì¤˜."},
        {text:"ë§í¬ë¥¼ ëˆ„ë¥´ê³ , ì¸ì¦ë²ˆí˜¸ë¥¼ ë¶ˆëŸ¬ì¤€ë‹¤", score:-10,
         feedback:"ìœ„í—˜í•´ìš”. ë§í¬ í´ë¦­ì€ ì‚¬ê¸° íë¦„ì˜ ì‹œì‘ì¼ ìˆ˜ ìˆê³ , ì¸ì¦ë²ˆí˜¸ ì „ë‹¬ì€ â€˜ìŠ¹ì¸â€™ ìì²´ê°€ ë  ìˆ˜ ìˆì–´ìš”.",
         why:"ì‚¬ê¸°ë²”ì€ â€˜ì¸ì¦ë²ˆí˜¸ë§Œâ€™ì´ë¼ê³  ë§í•˜ì§€ë§Œ ì‹¤ì œë¡œëŠ” ê²°ì œ/ê³„ì • íƒˆì·¨ì— í•„ìš”í•œ ë§ˆì§€ë§‰ í¼ì¦ì¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.",
         vector:V(0,-1,0,-1,0,0), reply:"ì‘ í–ˆì–´, ì¸ì¦ë²ˆí˜¸ëŠ” 112345ì•¼"}
      ]}
  ]
};


/* ë¡œë§¨ìŠ¤ìŠ¤ìº  */
window.SCENARIOS.exp_m_romance = {
  type:"messenger",
  ui:"kakao",
  speedMs: window.DIALOG_FLOW_SPEED_MS,
  title:"ë¡œë§¨ìŠ¤ ìŠ¤ìº (ì¹´í†¡ ìŠ¤ë¯¸ì‹±)",
  notify:{ title:"ì¹´í†¡", body:"ì¹œí•´ì§„ ì‚¬ëŒì´ íˆ¬ì/ë„ì›€ì„ ìš”ì²­í–ˆì–´ìš”." },
  header:{ title:"ì—˜ë¦¬ìŠ¤ ì¥", sub:"ì½”ì¸/ì¶œê¸ˆ/ì¸ì¦" },
  keyPoints:[
    "ì˜ìƒí†µí™”/ë§Œë‚¨ íšŒí”¼ + ì¹œë°€ê° ê¸‰ìƒìŠ¹ = ì˜ì‹¬",
    "ê²€ì¦ ì•ˆ ëœ â€˜í•´ì™¸/ì‚¬ì„¤ ê±°ë˜ì†Œâ€™ ë§í¬ëŠ” í´ë¦­ ê¸ˆì§€",
    "â€˜ì¶œê¸ˆí•˜ë ¤ë©´ ì¶”ê°€ ì…ê¸ˆ(KYC/ì„¸ê¸ˆ/ë³´ì¦ê¸ˆ)â€™ì€ 100% ì‚¬ê¸° ì‹ í˜¸",
    "OTP/ì¸ì¦ë²ˆí˜¸Â·ìƒí’ˆê¶Œ ìš”êµ¬ëŠ” ì¦‰ì‹œ ì¤‘ë‹¨/ì°¨ë‹¨"
  ],
  oneLiner:"ì¹œí•´ì¡ŒëŠ”ë° â€˜íˆ¬ìÂ·ì¶œê¸ˆÂ·ì¶”ê°€ì…ê¸ˆÂ·OTPâ€™ê°€ ë‚˜ì˜¤ë©´, ê°ì • ë§ê³  â€˜ê²€ì¦â€™ë¶€í„° í•˜ì„¸ìš”.",
  steps:[
    {type:"msg",from:"other",text:"ìê¸°ì•¼~ ë‚˜ OOê±°ë˜ì†Œì—ì„œ ì½”ì¸ ì‚¬ê°€ì§€ê³ , ë§¤ì¼ 5% ìˆ˜ìµì„ ë³´ê³  ìˆì–ì•„!"},
    {type:"msg",from:"other",text:"ì–´ì œë„ 200ë§Œì› ì •ë„ ë²Œì—ˆì–´ìš”~"},
    {type:"msg",from:"other",text:"ìê¸°ë„ ê°™ì´ í•´ì„œ ìš°ë¦¬ ì—¬í–‰ê°€ìš”~"},
    {type:"q",prompt:"ì¹œë¶„ì„ ìŒ“ì€ ë’¤, ê°€ìƒìì‚° ê±°ë˜ë¡œ ê³ ìˆ˜ìµì„ ìœ ì¸í•˜ë©´?",
      after:{ good:["ì™œ ëª» ë¯¿ì–´ã…  ë‚´ ì¹œêµ¬ë„ ì—¬ê¸°ì„œ í° ëˆ ë²Œì—ˆì–´!"], bad:["ê·¸ë˜, í•´ë³´ì!"] },
      choices:[
        {text:"ì–¼êµ´ë„ ëª¨ë¥´ëŠ”ë° ê°‘ìê¸° íˆ¬ìë‚˜ ëˆ ì´ì•¼ê¸°ë¥¼ êº¼ë‚´ë©´ ì¤‘ë‹¨", score:+20,
         feedback:"ì •ë‹µì´ì—ìš”. ê´€ê³„(ê°ì •)ë¥¼ ê¸‰í•˜ê²Œ ë§Œë“¤ê³  ê³§ë°”ë¡œ â€˜ëˆ(íˆ¬ì)â€™ìœ¼ë¡œ ë„˜ì–´ê°€ë©´ ë¡œë§¨ìŠ¤ ìŠ¤ìº  ê°€ëŠ¥ì„±ì´ ë†’ì•„ìš”.",
         why:"ì‚¬ê¸°ë²”ì€ ì‹¤ì²´ í™•ì¸(ì˜ìƒí†µí™”/ë§Œë‚¨)ì„ í”¼í•˜ë©´ì„œ ê°ì •ìœ¼ë¡œ í”ë“¤ì–´ íˆ¬ì ê²°ì •ì„ ë¹ ë¥´ê²Œ ë§Œë“¤ë ¤ í•©ë‹ˆë‹¤.",
         vector:V(+2,0,0,+2,+2,+2), reply:"ê°‘ìê¸° ëˆ ì´ì•¼ê¸°ëŠ” ì•„ë‹Œ ê²ƒ ê°™ì•„"},
        {text:"ì¹´í†¡ë§Œìœ¼ë¡œë„ ì¶©ë¶„í•˜ë‹ˆ ê³„ì† ëŒ€í™”í•œë‹¤", score:-10,
         feedback:"ìœ„í—˜ ì‹ í˜¸ì˜ˆìš”. ëŒ€í™”ê°€ ê¸¸ì–´ì§ˆìˆ˜ë¡ â€˜íˆ¬ì ë§í¬/ì…ê¸ˆâ€™ìœ¼ë¡œ ìì—°ìŠ¤ëŸ½ê²Œ ë„˜ì–´ê°ˆ ìˆ˜ ìˆì–´ìš”.",
         why:"ì‹œê°„ì´ ìŒ“ì´ë©´ ì‹ ë¢°ê°€ ìƒê²¨ ê²½ê³„ê°€ ë‚®ì•„ì§€ê³ , ê¸ˆì „ ìš”êµ¬ë¥¼ ê±°ì ˆí•˜ê¸° ì–´ë ¤ì›Œì§‘ë‹ˆë‹¤.",
         vector:V(-1,0,0,-1,-1,-1), reply:"ì˜¤, ì¢‹ì€ë°?"}
      ]},

    {type:"msg",from:"other",text:"ì—¬ê¸° êµ­ì œ ê±°ë˜ ì‚¬ì´íŠ¸ê°€ ì§„ì§œ ì¢‹ì•„~"},
    {type:"msg",from:"other",text:"ì²˜ìŒì—” ì†Œì•¡ìœ¼ë¡œ í•´ë´! ì¶œê¸ˆë„ ì˜ ë¼~ã…ã…"},
    {type:"msg",from:"other",text:"ê°€ì… ë§í¬: https://verify.example"},
    {type:"q",prompt:"â€˜í•˜ë£¨ ìˆ˜ìµ ë³´ì¥ê³¼ ì¶œê¸ˆ ì˜ ëœë‹¤'ë©° ìƒì†Œí•œ ê±°ë˜ì†Œ ë§í¬ ê°€ì…ì„ ìœ ë„í•˜ë©´?",
      after:{ good:["ë‚˜ë„ ë‚´ì—­ ë³´ì—¬ì¤„ê²Œìš”!","ìš°ë¦¬ ë‘˜ë§Œ ì•Œê³  í¬ê²Œ ë²Œì–´ë³´ì!"], bad:["ì˜¤ì¼€ì´ ë§í¬ë¡œ ê°€ì…í–ˆì–´. ë‹¤ìŒì€?"] },
      choices:[
        {text:"ì¸ì¦ë˜ì§€ ì•Šì€ ë§í¬ ê°€ì…ê³¼ ì…ê¸ˆì€ ê±°ì ˆ", score:+20,
         feedback:"ì •ë‹µì´ì—ìš”. ë¡œë§¨ìŠ¤ ìŠ¤ìº ì€ â€˜ê²€ì¦ ì•ˆ ëœ ê±°ë˜ì†Œ/ê°€ì§œ ì‚¬ì´íŠ¸ ë§í¬â€™ë¡œ ìœ ë„í•˜ëŠ” ê²½ìš°ê°€ ë§ìŠµë‹ˆë‹¤.",
         why:"ë§í¬ í´ë¦­ â†’ ë¡œê·¸ì¸/ì…ê¸ˆìœ¼ë¡œ ì´ì–´ì§€ë©´, ì´í›„ ì¶œê¸ˆ ì œí•œê³¼ ì¶”ê°€ì…ê¸ˆ ìš”êµ¬ë¡œ ë«ì´ ì‹œì‘ë  ìˆ˜ ìˆì–´ìš”.",
         vector:V(+2,+1,0,+2,+2,+2), reply:"ëª¨ë¥´ëŠ” ê±°ë˜ì†Œ ë§í¬ëŠ” ì•ˆ ë“¤ì–´ê°€. ê³µì‹ ì •ë³´ë¡œ í™•ì¸í• ê²Œ."},
        {text:"ì†Œì•¡ì´ë‹ˆ ì¼ë‹¨ ê°€ì…í•˜ê³  ì…ê¸ˆí•´ë³¸ë‹¤", score:-20,
         feedback:"ìœ„í—˜í•´ìš”. ì´ˆë°˜ì— â€˜ì†Œì•¡ ì¶œê¸ˆ ì„±ê³µâ€™ì€ ì‹ ë¢°ë¥¼ ë§Œë“¤ê¸° ìœ„í•œ ë¯¸ë¼ì¼ ìˆ˜ ìˆì–´ìš”.",
         why:"ì²˜ìŒì—” ì•ˆì‹¬ì‹œí‚¨ ë’¤, íˆ¬ìê¸ˆì´ ì»¤ì§€ë©´ ì¶œê¸ˆì„ ë§‰ê³  â€˜ì¶”ê°€ ì…ê¸ˆâ€™ì„ ìš”êµ¬í•˜ëŠ” íŒ¨í„´ì´ í”í•©ë‹ˆë‹¤.",
         vector:V(-2,-1,0,-2,-2,-2), reply:"ì†Œì•¡ìœ¼ë¡œë§Œ ë¨¼ì € í•´ë³¼ê²Œ. ê³„ì¢Œ ì•Œë ¤ì¤˜."}
      ]},

    {type:"msg",from:"other",text:"ì§€ê¸ˆ ì¶œê¸ˆí•˜ë ¤ë©´ ì¸ì¦ì´ í•„ìš”í•˜ê±°ë“ ?"},
    {type:"msg",from:"other",text:"ê³ ì•¡ ê±°ë˜ëŠ” ì¶”ê°€ê¸ˆì„ ë¨¼ì € ë„£ì–´ì•¼ ì¶œê¸ˆ ê°€ëŠ¥í• êº¼ì•¼"},
    {type:"q",prompt:"â€˜ì¶œê¸ˆí•˜ë ¤ë©´ ì¶”ê°€ ì…ê¸ˆâ€™ì„ ìš”êµ¬í•˜ë©´?",
      after:{ good:["ì´ê±° ê·œì •ì´ë¼ ì–´ì©” ìˆ˜ ì—†ì–´ã… ","ì§€ê¸ˆë§Œ ë„˜ê¸°ë©´ ë°”ë¡œ ì¶œê¸ˆë¼!"], bad:["ì•Œê² ì–´, ì¶”ê°€ ì…ê¸ˆí•˜ë©´ ë°”ë¡œ ì¶œê¸ˆë˜ì§€?"] },
      choices:[
        {text:"ì¶”ê°€ ì…ê¸ˆ ìš”êµ¬ëŠ” ë¬´ì¡°ê±´ ì‚¬ê¸°ì´ë¯€ë¡œ ì¦‰ì‹œ ì¤‘ë‹¨", score:+20,
         feedback:"ì •ë‹µì´ì—ìš”. â€˜ì¶œê¸ˆ ì¡°ê±´ìœ¼ë¡œ ì¶”ê°€ ì…ê¸ˆâ€™ì€ ì „í˜•ì ì¸ íˆ¬ìì‚¬ê¸°(ë¡œë§¨ìŠ¤ ìŠ¤ìº ) ì‹ í˜¸ì…ë‹ˆë‹¤.",
         why:"ì¶”ê°€ ì…ê¸ˆ í›„ì—ë„ ìˆ˜ìˆ˜ë£Œ/ì„¸ê¸ˆ/ë³´ì•ˆê²€ì¦ ë“± ë‹¤ë¥¸ ëª…ëª©ìœ¼ë¡œ ëì—†ì´ ìš”êµ¬ê°€ ì´ì–´ì§ˆ ìˆ˜ ìˆì–´ìš”.",
         vector:V(+2,0,+2,+2,+2,+2), reply:"ì¶œê¸ˆí•˜ë ¤ê³  ëˆì„ ë” ë„£ìœ¼ë¼ëŠ” ê±´ ì´ìƒí•˜ë‹¤. ì—¬ê¸°ì„œ ë. ì—°ë½í•˜ì§€ë§ˆ."},
        {text:"ì´ë¯¸ ë„£ì€ ëˆì´ ì•„ê¹Œìš°ë‹ˆ ì¶”ê°€ ì…ê¸ˆí•œë‹¤", score:-20,
         feedback:"ë§¤ìš° ìœ„í—˜í•´ìš”. â€˜ì´ë¯¸ ë„£ì€ ëˆâ€™ ë•Œë¬¸ì— ë” ë„£ê²Œ ë§Œë“œëŠ” ê²Œ ì‚¬ê¸°ì˜ í•µì‹¬ ì‹¬ë¦¬(ë§¤ëª°ë¹„ìš©)ì˜ˆìš”.",
         why:"í•œ ë²ˆ ë” ë„£ìœ¼ë©´ â€˜ë§ˆì§€ë§‰â€™ì´ë¼ë©° ê³„ì† ìš”êµ¬ê°€ ì»¤ì§€ëŠ” íë¦„ì´ í”í•©ë‹ˆë‹¤.",
         vector:V(-2,0,-2,-2,-2,-2), reply:"ì´ë²ˆì´ ë§ˆì§€ë§‰ì´ ë§ì§€?"}
      ]},
  ]
};


/* ===== ì „í™” ì‹œë‚˜ë¦¬ì˜¤ë“¤ ===== */

window.SCENARIOS.exp_c_noshow = {
  type:"call",
  speedMs: window.DIALOG_FLOW_SPEED_MS,
  title:"ë…¸ì‡¼(ë³´ì´ìŠ¤í”¼ì‹±)",
  incoming:{ name:"ë‹¨ì²´ì˜ˆì•½ ê³ ê° ", number:"010-83XX-01X8" },
  voiceUrl: "https://koreapolkim.github.io/vv/no.mp3",
  keyPoints:[
    "ê³µê³µê¸°ê´€/ë°©ì†¡ì‚¬/ìœ ëª…ì¸ ì‚¬ì¹­ â€˜ë‹¨ì²´ì˜ˆì•½â€™ì€ ì‹ ë¶„ í™•ì¸(ë¶€ì„œÂ·ë‹´ë‹¹ìÂ·ëŒ€í‘œë²ˆí˜¸ ì½œë°±) í•„ìˆ˜",
    "ì·¨ê¸‰ ì•ˆ í•˜ëŠ” â€˜ê³ ê°€ ì£¼ë¥˜/ë¬¼í’ˆâ€™ ëŒ€ë¦¬êµ¬ë§¤Â·ì„ ì†¡ê¸ˆ ìš”êµ¬ëŠ” ì¦‰ì‹œ ê±°ì ˆ",
    "í†µí™” ëŠê³  ê¸°ê´€ â€˜ëŒ€í‘œë²ˆí˜¸â€™ë¡œ ì½œë°± í™•ì¸ + ì˜ˆì•½ê¸ˆ/ì„ ê²°ì œ ì›ì¹™"
  ],
  oneLiner:"ë‹¨ì²´ì˜ˆì•½ì´ ì™€ë„ â€˜ëŒ€ë¦¬êµ¬ë§¤/ì„ ì†¡ê¸ˆâ€™ ìš”êµ¬ê°€ ë‚˜ì˜¤ë©´ ëŠê³ , ê³µì‹ë²ˆí˜¸ë¡œ ì½œë°± í™•ì¸í•˜ì„¸ìš”.",
  callQuiz:[
    {
      core:"ì•ˆë…•í•˜ì„¸ìš”. â—‹â—‹ì‹œì²­ ì´ë¬´íŒ€ì¸ë°ìš”. ì˜¤ëŠ˜ ì €ë… 20ëª… ë‹¨ì²´ íšŒì‹ ì˜ˆì•½ ê°€ëŠ¥í• ê¹Œìš”? ì‚¬ì¥ë‹˜ ê·¸ë¦¬ê³  OOì™€ì¸ì´ë¼ê³  ë”°ë¡œ ì¤€ë¹„ê°€ëŠ¥í• ê¹Œìš”?",
      choices:[
        {text:"ë„¤ ê°€ëŠ¥í•©ë‹ˆë‹¤. ëª‡ ì‹œë¡œ ì¡ì•„ë“œë¦´ê¹Œìš”?", score:-10,
         feedback:"ì£¼ì˜ê°€ í•„ìš”í•´ìš”. ì˜ˆì•½ ìì²´ëŠ” ë°›ì„ ìˆ˜ ìˆì–´ë„ â€˜ê¸°ê´€ ì‚¬ì¹­â€™ì¼ ìˆ˜ ìˆìœ¼ë‹ˆ, ë‹¤ìŒ ë‹¨ê³„ì—ì„œ ëŒ€ë¦¬êµ¬ë§¤/ì„ ì†¡ê¸ˆì´ ë¶™ëŠ”ì§€ ê²½ê³„í•´ì•¼ í•©ë‹ˆë‹¤.",
         why:"ë…¸ì‡¼ ì‚¬ê¸°ëŠ” â€˜ë‹¨ì²´/ê¸°ê´€â€™ìœ¼ë¡œ ì‹ ë¢°ë¥¼ ë§Œë“  ë’¤, ê³§ë°”ë¡œ ëˆì´ ë‚˜ê°€ê²Œ ë§Œë“œëŠ” ìš”êµ¬(ëŒ€ë¦¬êµ¬ë§¤/ì†¡ê¸ˆ)ë¡œ ë„˜ì–´ê°‘ë‹ˆë‹¤.",
         vector:V(-1,0,0,-1,-1,-1)},
        {text:"ì €í¬ ê°€ê²ŒëŠ” ë§ì”€í•˜ì‹  ìˆ ì„ ì·¨ê¸‰í•˜ì§€ ì•Šì•„ìš”", score:+20,
         feedback:"ì •ë‹µì´ì—ìš”. â€˜ë‚´ê°€ ëŠê³  ëŒ€í‘œë²ˆí˜¸ë¡œ ë‹¤ì‹œ í™•ì¸(ì½œë°±)â€™ì´ ë…¸ì‡¼ ì‚¬ê¸° ì˜ˆë°©ì˜ í•µì‹¬ì…ë‹ˆë‹¤.",
         why:"ë°œì‹ ë²ˆí˜¸Â·ì‹ ë¶„Â·ëª…í•¨ ì‚¬ì§„ì€ ìœ„ì¡°ë  ìˆ˜ ìˆì–´ìš”. ê³µì‹ ëŒ€í‘œë²ˆí˜¸ ì½œë°±ì´ ê²€ì¦ì…ë‹ˆë‹¤.",
         vector:V(+2,0,0,+2,0,+2)}
      ]
    },
    {
      core:"ì•„, íŒ€ì¥ë‹˜ì´ ê·¸ ì™€ì¸ì„ ê¼­ ì›í•´ì„œìš”. ë¯¿ê³  â€˜ë¯¸ë¦¬â€™ êµ¬ë§¤í•´ì£¼ì‹œë©´ 10% ë” ê²°ì œí•˜ê² ìŠµë‹ˆë‹¤.",
      choices:[
        {text:"ë„¤, ì œê°€ ì•„ëŠ” ì—…ì²´ê°€ ì—†ì–´ì„œìš”, í˜¹ì‹œ ê·¸ëŸ° ì™€ì¸ì€ ì–´ë””ì„œ êµ¬í•˜ë‚˜ìš”?", score:-20,
         feedback:"ë§¤ìš° ìœ„í—˜í•´ìš”. â€˜ëŒ€ë¦¬êµ¬ë§¤/ì„ ì†¡ê¸ˆâ€™ì€ ë…¸ì‡¼ ì‚¬ê¸°ì˜ í•µì‹¬ ë‹¨ê³„ì…ë‹ˆë‹¤. ì†¡ê¸ˆí•˜ëŠ” ìˆœê°„ í”¼í•´ê°€ ë°œìƒí•  ìˆ˜ ìˆì–´ìš”.",
         why:"ì‚¬ê¸°ë²”ì´ ì§€ì •í•œ â€˜ì—…ì²´/ê³„ì¢Œâ€™ëŠ” ê°€ì§œ íŒë§¤ì²˜Â·ì‚¬ê¸°ê³„ì¢Œì¼ ê°€ëŠ¥ì„±ì´ í½ë‹ˆë‹¤.",
         vector:V(-2,0,0,-2,-2,-2)},
        {text:"ì €í¬ëŠ” ê³ ê°€ì˜ ì™€ì¸ì„ êµ¬ë§¤í•  ìˆ˜ ì—†ì–´ìš”", score:+20,
         feedback:"ì •ë‹µì´ì—ìš”. ëŒ€ë¦¬êµ¬ë§¤ëŠ” ê±°ì ˆí•˜ê³ , ì˜ˆì•½ê¸ˆ/ì„ ê²°ì œ ë“± ì •ìƒ ì ˆì°¨ë§Œ ë°›ëŠ” ê²Œ ì•ˆì „í•©ë‹ˆë‹¤.",
         why:"ì •ìƒ ì˜ˆì•½ì´ë©´ ì—…ì²´ê°€ ì§ì ‘ êµ¬ë§¤Â·ê²°ì œí•˜ê±°ë‚˜, ìµœì†Œí•œ ì˜ˆì•½ê¸ˆ ë“± ê³µì‹ ê²°ì œ ì ˆì°¨ë¡œ ì§„í–‰í•  ìˆ˜ ìˆì–´ìš”.",
         vector:V(+2,0,0,+2,+2,+2)}
      ]
    },
    {
      core:"OOíšŒì‚¬ì—ë§Œ íŒŒëŠ” ìˆ ì¸ë° ì œê°€ ë¶ˆëŸ¬ë“œë¦¬ëŠ” ë²ˆí˜¸ë¡œ ì—°ë½í•´ì„œ ë¯¸ë¦¬ ì¤€ë¹„ ê°€ëŠ¥í• ê¹Œìš”?",
      choices:[
        {text:"ë„¤, ê°ì‚¬í•©ë‹ˆë‹¤! ì „í™”ë²ˆí˜¸ ë¶ˆëŸ¬ì£¼ì„¸ìš”", score:-20,
         feedback:"ìœ„í—˜í•´ìš”. â€˜ì¶”ê°€ë¡œ ë” ì¤€ë‹¤â€™ëŠ” ë§ë¡œ íŒë‹¨ì„ íë¦¬ê³ , ê²€ì¦ ì—†ì´ ë‹¤ìŒ ë‹¨ê³„(ì†¡ê¸ˆ/ë§í¬ ê²°ì œ)ë¡œ ìœ ë„í•  ìˆ˜ ìˆì–´ìš”.",
         why:"ì‚¬ê¸°ë²”ì€ â€˜ì´ìµâ€™ì²˜ëŸ¼ ë³´ì´ê²Œ ë§Œë“¤ì–´ ê²½ê³„ë¥¼ ë‚®ì¶˜ ë’¤, ê²°êµ­ ë‚´ ëˆì´ ë¨¼ì € ë‚˜ê°€ê²Œ ë§Œë“­ë‹ˆë‹¤.",
         vector:V(-2,0,0,-2,-2,-2)},
        {text:"ì˜ˆì•½ê¸ˆ ì—†ì´ëŠ” ë§ì”€í•˜ì‹ ëŒ€ë¡œ ì–´ë ¤ìš¸ ê²ƒ ê°™ìŠµë‹ˆë‹¤", score:+20,
         feedback:"ì •ë‹µì´ì—ìš”. ì˜ˆì•½ê¸ˆ/ì„ ê²°ì œ ì›ì¹™ + ê³µì‹ë²ˆí˜¸ ì½œë°± í™•ì¸ì´ ê°€ì¥ ì•ˆì „í•©ë‹ˆë‹¤.",
         why:"ê³µë¬¸/ì„œë¥˜ë¥¼ ë³´ë‚´ë„ â€˜ì†¡ê¸ˆâ€™ì€ ë³„ê°œì˜ˆìš”. ê²€ì¦ê³¼ ê²°ì œ ì ˆì°¨ë¥¼ ë¶„ë¦¬í•´ì•¼ í”¼í•´ë¥¼ ë§‰ì„ ìˆ˜ ìˆì–´ìš”.",
         vector:V(+2,0,0,+2,+2,+2)}
      ]
    },
 {
      core:"ê±°ê¸° ì—…ì²´ê°€ ì„ ê²°ì œë§Œ ë°›ëŠ”ë‹¤ë„¤ìš”. ì‚¬ì¥ë‹˜ì´ ì—°ë½í•˜ì…”ì„œ êµ¬ë§¤í•´ì£¼ì‹œê³  ì…ê¸ˆí•´ì£¼ì‹œê³  ì˜ìˆ˜ì¦ë§Œ ë³´ë‚´ì£¼ì„¸ìš”. ì €í¬ê°€ ìŒì‹ê°’ì´ë‘ ê°™ì´ ê²°ì œí• ê²Œìš”.",
      choices:[
        {text:"ì•Œê² ìŠµë‹ˆë‹¤, ì¤€ë¹„í•´ ë‘ê² ìŠµë‹ˆë‹¤ ì´ë”° ëµê²Œìš”.", score:-20,
         feedback:"ë§¤ìš° ìœ„í—˜í•´ìš”. ë…¸ì‡¼ ì‚¬ê¸°ì˜ í•µì‹¬ì€ â€˜ëŒ€ë¦¬ê²°ì œ/ì„ ê²°ì œâ€™ë¡œ ë‚´ ëˆì´ ë¨¼ì € ë‚˜ê°€ê²Œ ë§Œë“œëŠ” ê²ë‹ˆë‹¤.",
         why:"ìƒëŒ€ê°€ ì˜ˆì•½/ê³µë¬¸ìœ¼ë¡œ ë¯¿ê²Œ ë§Œë“  ë’¤, â€˜ëŒ€ì‹  ê²°ì œâ€™ë¥¼ ì‹œí‚¤ê³  ì ì í•˜ê±°ë‚˜ ì¶”ê°€ ê²°ì œë¥¼ ìš”êµ¬í•  ìˆ˜ ìˆì–´ìš”.",
         vector:V(-2,0,0,-2,-2,-2)},
        {text:"ì£„ì†¡í•©ë‹ˆë‹¤ ìš”ìƒˆ ë…¸ì‡¼ì‚¬ê¸°ê°€ ë§ì•„ì„œìš”, ì˜ˆì•½ê¸ˆì„ ë³´ë‚´ì£¼ì…”ì•¼ ì˜ˆì•½ì´ ê°€ëŠ¥í•  ê²ƒ ê°™ìŠµë‹ˆë‹¤", score:+20,
         feedback:"ì •ë‹µì´ì—ìš”. ì–´ë–¤ ì´ìœ ë“  â€˜ëŒ€ë¦¬ê²°ì œ/ì„ ê²°ì œâ€™ ìš”êµ¬ëŠ” ë…¸ì‡¼ ì‚¬ê¸° ê°€ëŠ¥ì„±ì´ í½ë‹ˆë‹¤.",
         why:"ì§„ì§œ ê³ ê°ì´ë©´ ì˜ˆì•½ê¸ˆ ì…ê¸ˆ/ì •ìƒ ê²°ì œ ì ˆì°¨ë¥¼ ë”°ë¥¼ ìˆ˜ ìˆì–´ìš”. ë‚´ ëª…ì˜ë¡œ ê²°ì œ/ì†¡ê¸ˆì€ ìœ„í—˜í•©ë‹ˆë‹¤.",
         vector:V(+2,0,0,+2,+2,+2)}
      ]
    },
  ],
};

/* ìˆ˜ì‚¬ê¸°ê´€ ì‚¬ì¹­ */
window.SCENARIOS.exp_c_investigation = {
  type:"call",
  speedMs: window.DIALOG_FLOW_SPEED_MS,
  title:"ìˆ˜ì‚¬ê¸°ê´€ ì‚¬ì¹­(ë³´ì´ìŠ¤í”¼ì‹±)",
  incoming:{ name:"ì„œìš¸ì¤‘ì•™ì§€ë°©ê²€ì°°ì²­", number:"02-23XX-3X51" },
  voiceUrl: "https://koreapolkim.github.io/vo/gum2.mp3",
  keyPoints:[
    "ë¹„ë°€ìˆ˜ì‚¬(ì•½ì‹ì¡°ì‚¬)Â·í†µí™” ìœ ì§€ ìš”êµ¬ëŠ” ë§¤ìš° ìœ„í—˜",
    "í˜„ê¸ˆ ì¸ì¶œ/í˜„ê¸ˆ ì „ë‹¬(ì—°ë½ì±…Â·ìˆ˜ê±°ì±…) ì§€ì‹œëŠ” 100% ì‚¬ê¸°",
    "ë³´ì•ˆì•±/ì›ê²©ì•± ì„¤ì¹˜Â·OTP ìš”êµ¬ëŠ” ì¦‰ì‹œ ì¤‘ë‹¨",
    "ëŠê³  112 ë˜ëŠ” ê¸°ê´€ â€˜ëŒ€í‘œë²ˆí˜¸â€™ë¡œ ì§ì ‘ í™•ì¸"
  ],
  oneLiner:"â€˜ë¹„ë°€ìˆ˜ì‚¬â€™ë¡œ ê³ ë¦½ì‹œí‚¤ê³  â€˜í˜„ê¸ˆ ì¸ì¶œÂ·ìˆ˜ê±°â€™ë¡œ ê°€ë©´ 100% ì‚¬ê¸°â€”ì¦‰ì‹œ ëŠê³  ê³µì‹ë²ˆí˜¸ë¡œ í™•ì¸!",
  callQuiz:[
    {
      core:"ê·€í•˜ì˜ í†µì¥ì´ ë²”ì£„ ìê¸ˆì„¸íƒì—<br> ì‚¬ìš©ë˜ì–´ ë²”ì£„ì— ì—°ë£¨ë˜ì—ˆìŠµë‹ˆë‹¤, ì•Œê³  ìˆì—ˆë‚˜ìš”? ì´ ìˆ˜ì‚¬ ìƒí™©ì„ ì™¸ë¶€ì— ì•Œë¦¬ë©´ ë°©ì¡°ë¡œ ì²˜ë²Œë  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤.",
      choices:[
        {text:"ì§„ì§œìš”? ê·¸ëŸ¼ ì „ ì–´ë–¡í•˜ì£ â€¦ ì§€ê¸ˆ ë­˜ í•˜ë©´ ë˜ë‚˜ìš”?", score:-20,
         feedback:"ìœ„í—˜í•´ìš”. ê²ì„ ì¤˜ì„œ â€˜ì§€ê¸ˆ ë‹¹ì¥â€™ ë”°ë¥´ê²Œ ë§Œë“œëŠ” ì‹œì‘ ë‹¨ê³„ì¼ ìˆ˜ ìˆì–´ìš”. ì—¬ê¸°ì„œ ëŠê³  ê³µì‹ë²ˆí˜¸ë¡œ í™•ì¸ì´ ë¨¼ì €ì…ë‹ˆë‹¤.",
         why:"ì‚¬ê¸°ë²”ì€ ê³µí¬ë¥¼ ì´ìš©í•´ íŒë‹¨ì„ ë§ˆë¹„ì‹œí‚¤ê³ , ë‹¤ìŒ ë‹¨ê³„(í˜„ê¸ˆí™”/ì•±ì„¤ì¹˜/ì†¡ê¸ˆ)ë¡œ ëŒê³  ê°‘ë‹ˆë‹¤.",
         vector:V(-2,0,0,-2,-2,-2)},
        {text:"ë¬´ìŠ¨ ì†Œë¦¬ì˜ˆìš”, ì €ëŠ” ê·¸ëŸ°ì  ì—†ìŠµë‹ˆë‹¤", score:+20,
         feedback:"ì¢‹ì€ ëŒ€ì‘ì´ì—ìš”. ì´ì–´ì„œ í†µí™”ë¥¼ ëŠê³  ê²€ì°°/ê²½ì°° ëŒ€í‘œë²ˆí˜¸ë¡œ ì½œë°± í™•ì¸í•´ì•¼ ì•ˆì „í•©ë‹ˆë‹¤.",
         why:"ë°œì‹ ë²ˆí˜¸Â·ê¸°ê´€ëª…ì€ ì¡°ì‘ë  ìˆ˜ ìˆì–´ìš”. â€˜ë‚´ê°€ ì§ì ‘ ëŒ€í‘œë²ˆí˜¸ë¡œ í™•ì¸â€™ì´ ê²€ì¦ì˜ í•µì‹¬ì…ë‹ˆë‹¤.",
         vector:V(+2,0,0,+2,0,+2)}
      ]
    },
    {
      core:"ê¸ˆê°ì› ìª½ì—ì„œ ê·€í•˜ ê³„ì¢Œë¥¼ ë™ê²°(ì§€ê¸‰ì •ì§€) ì˜ˆì •ì´êµ¬ìš”, ë™ê²° ì „ ë„ì›€ì„ ë“œë¦´ë ¤ê³  ì—°ë½ë“œë¦°ê²ë‹ˆë‹¤. ë§¤ìš° ê¸‰í•œ ìƒí™©ìœ¼ë¡œ í†µì¥ì— ìˆëŠ” ëˆì„ ì „ë¶€ ì¸ì¶œí•´ì„œ â€˜ì•ˆì „ ë³´ê´€â€™í•´ì•¼ í•©ë‹ˆë‹¤.",
      choices:[
        {text:"ê·¸ëŸ¼ ì§€ê¸ˆ ë°”ë¡œ í˜„ê¸ˆìœ¼ë¡œ ë‹¤ ì°¾ì•„ì•¼ í•˜ë‚˜ìš”?", score:-20,
         feedback:"ë§¤ìš° ìœ„í—˜í•´ìš”. ì–´ë–¤ ê¸°ê´€ë„ â€˜ëˆì„ ì „ë¶€ ì¸ì¶œí•´ ì•ˆì „ ë³´ê´€â€™í•˜ë¼ê³  ì§€ì‹œí•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ì¦‰ì‹œ í†µí™” ì¢…ë£Œê°€ í•„ìš”í•´ìš”.",
         why:"í˜„ê¸ˆí™”ëŠ” ì¶”ì Â·íšŒìˆ˜ê°€ ì–´ë ¤ì›Œ í”¼í•´ê°€ ì»¤ì§€ê³ , ìˆ˜ê±°ì±…ì—ê²Œ ë„˜ì–´ê°€ë©´ ëŒë ¤ë°›ê¸° ë§¤ìš° ì–´ë µìŠµë‹ˆë‹¤.",
         vector:V(-2,0,0,-2,-2,-2)},
        {text:"ê·¸ëŸ¼ ì œê°€ ì¼ë‹¨ ëŠê³ , ê²€ì°°ì²­ì— ì§ì ‘ ì „í™”í•´ë³¼ê²Œìš”", score:+20,
         feedback:"ì •ë‹µì´ì—ìš”. â€˜ì¸ì¶œí•˜ë¼â€™ëŠ” ì§€ì‹œê°€ ë‚˜ì˜¤ë©´ ì‚¬ê¸°ì¼ ê°€ëŠ¥ì„±ì´ ë§¤ìš° í½ë‹ˆë‹¤. ëŠê³  ê³µì‹ ì±„ë„ë¡œ í™•ì¸í•˜ì„¸ìš”.",
         why:"ì •ìƒ ì ˆì°¨ë¼ë©´ ì€í–‰/ê¸°ê´€ ê³µì‹ ì°½êµ¬ ì•ˆë‚´ë¡œ ì§„í–‰ë˜ë©°, ê°œì¸ì—ê²Œ í˜„ê¸ˆ ì¸ì¶œ ì§€ì‹œë¥¼ í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.",
         vector:V(+2,0,0,+2,+2,+2)}
      ]
    },
    {
      core:"ì¸ì¶œí•œ í˜„ê¸ˆì€ ì•ˆì „í•œ ê³³ìœ¼ë¡œ ì „ë‹¬í•´ì•¼ í•©ë‹ˆë‹¤. ì €í¬ ì§ì›ì´ ê·¼ì²˜ë¡œ ê°ˆ í…Œë‹ˆ, ì ˆëŒ€ ì€í–‰ ì§ì›ì´ë‚˜ ê²½ì°°ì—ê²Œ ë§í•˜ì§€ ë§ê³  ì¶œê¸ˆ í›„ ê¸°ë‹¤ë¦¬ì„¸ìš”.",
      choices:[
        {text:"ì•Œê² ìŠµë‹ˆë‹¤. ì—°ë½ì±…ì´ ì˜¬ ë•Œê¹Œì§€ í˜„ê¸ˆ ë“¤ê³  ê¸°ë‹¤ë¦¬ê² ìŠµë‹ˆë‹¤", score:-20,
         feedback:"ë§¤ìš° ìœ„í—˜í•´ìš”. â€˜ì—°ë½ì±…/ìˆ˜ê±°ì±…â€™ì—ê²Œ í˜„ê¸ˆì„ ì „ë‹¬í•˜ê±°ë‚˜ ë“¤ê³  ëŒ€ê¸°í•˜ë¼ëŠ” ê±´ ë³´ì´ìŠ¤í”¼ì‹±ì˜ í•µì‹¬ ë‹¨ê³„ì…ë‹ˆë‹¤.",
         why:"í˜„ê¸ˆì„ ë„˜ê¸°ë©´ íšŒìˆ˜ê°€ ê±°ì˜ ë¶ˆê°€ëŠ¥í•˜ê³ , ì¶”ê°€ í”¼í•´(ì¶”ê°€ ì¸ì¶œ/ì¶”ê°€ ì „ë‹¬)ë¡œ í™•ëŒ€ë  ìˆ˜ ìˆì–´ìš”.",
         vector:V(-2,0,0,-2,-2,-2)},
        {text:"ê³µê³µê¸°ê´€ì´ ëˆì„ ìš”êµ¬í•˜ëŠ”ê±´ ì ˆëŒ€ ì•„ë‹ˆë¼ê³  ì•Œê³  ìˆìŠµë‹ˆë‹¤.", score:+20,
         feedback:"ì •ë‹µì´ì—ìš”. â€˜í˜„ê¸ˆ ì „ë‹¬/ëŒ€ê¸°â€™ ì§€ì‹œê°€ ë‚˜ì˜¤ë©´ ì¦‰ì‹œ ëŠê³  ì‹ ê³ /ìƒë‹´ì´ ë§ìŠµë‹ˆë‹¤.",
         why:"ì •ìƒ ê¸°ê´€ì€ ê°œì¸ì—ê²Œ í˜„ê¸ˆì„ ì „ë‹¬í•˜ë¼ê³  í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ì´ ì§€ì‹œ ìì²´ê°€ ì‚¬ê¸° ì‹ í˜¸ì…ë‹ˆë‹¤.",
         vector:V(+2,0,0,+2,+2,+2)}
      ]
    },
{
      core:"ì§€ê¸ˆ ì•ˆí•˜ì‹œë©´, ëª¨ë“  ëˆì´ ë™ê²°ë¼ì„œ ê³„ì¢Œ ì‚¬ìš©ì´ ì–´ë ¤ìš¸ê²ë‹ˆë‹¤",
      choices:[
        {text:"ë„¤, ì§€ê¸ˆ ë‹¹ì¥ ì¸ì¶œí•˜ëŸ¬ ê°€ê² ìŠµë‹ˆë‹¤", score:-20,
         feedback:"ë§¤ìš° ìœ„í—˜í•´ìš”. ì„¤ì¹˜/ê¶Œí•œì€ í”¼í•´ë¡œ ì§í–‰í•©ë‹ˆë‹¤.",
         why:"ì›ê²©/ì ‘ê·¼ì„± ê¶Œí•œì„ ë…¸ë¦´ ìˆ˜ ìˆì–´ìš”.",
         vector:V(-2,-2,-2,-2,-2,-2)},
        {text:"ì œê°€ ì§€ê¸ˆ ê´€ë ¨ ê¸°ê´€ì— ì „í™”í•´ì„œ í™•ì¸í•´ë³´ê² ìŠµë‹ˆë‹¤", score:+20,
         feedback:"ì •ë‹µì´ì—ìš”. ë³´ì•ˆì•±/ì›ê²©ì•± ì„¤ì¹˜ ìš”êµ¬ëŠ” ë§¤ìš° ìœ„í—˜í•©ë‹ˆë‹¤.",
         why:"íœ´ëŒ€í° ì¡°ì‘/ì¸ì¦ íƒˆì·¨ë¡œ ì´ì–´ì§ˆ ìˆ˜ ìˆì–´ìš”.",
         vector:V(+2,+2,+2,+2,+2,+2)}
      ]
    },
    {
      core:"í†µí™” ëŠìœ¼ë©´ ì¦ê±°ì¸ë©¸ë¡œ ì˜ì¥ ì§‘í–‰ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ê³„ì† í†µí™” ìœ ì§€í•˜ì„¸ìš”",
      choices:[
        {text:"ë„¤ ì§€ê¸ˆ ì€í–‰ì— ê±°ì˜ ë„ì°©í–ˆìŠµë‹ˆë‹¤.", score:-20,
         feedback:"ìœ„í—˜í•´ìš”. â€˜í†µí™” ìœ ì§€â€™ì— ì‘í•˜ëŠ” ìˆœê°„ ê²€ì¦ì´ ì°¨ë‹¨ë˜ê³ , ë‹¤ìŒ ë‹¨ê³„(í˜„ê¸ˆ ì¸ì¶œ/ì „ë‹¬)ë¡œ ëŒë ¤ê°ˆ ìˆ˜ ìˆì–´ìš”.",
         why:"ì‚¬ê¸°ë²”ì€ ëŠìœ¼ë©´ ë“¤í†µë‚˜ê¸° ì‰¬ì›Œì„œ â€˜ëŠì§€ ë§ë¼â€™ê³  í˜‘ë°•í•˜ë©° ê³ ë¦½ì‹œí‚µë‹ˆë‹¤.",
         vector:V(-2,-2,-2,-2,-2,-2)},
        {text:"ì‹ ê³ í•˜ê² ìŠµë‹ˆë‹¤", score:+20,
         feedback:"ì •ë‹µì´ì—ìš”. â€˜í˜‘ë°•+í†µí™”ìœ ì§€â€™ëŠ” ì „í˜•ì ì¸ ì‚¬ê¸° ì‹ í˜¸ì…ë‹ˆë‹¤. ì¦‰ì‹œ ëŠê³  112/ì€í–‰/ê¸°ê´€ ê³µì‹ë²ˆí˜¸ë¡œ í™•ì¸í•˜ì„¸ìš”.",
         why:"ì •ìƒê¸°ê´€ì€ ì „í™”ë¡œ â€˜ëŠìœ¼ë©´ ì˜ì¥â€™ì²˜ëŸ¼ í˜‘ë°•í•˜ë©° í†µí™”ë¥¼ ë¶™ì¡ì§€ ì•ŠìŠµë‹ˆë‹¤.",
         vector:V(+2,+2,+2,+2,+2,+2)}
      ]
    }
  ],
};


/* ì…€í”„ê°ê¸ˆ */
window.SCENARIOS.exp_c_self_hostage = {
  type:"call",
  speedMs: window.DIALOG_FLOW_SPEED_MS,
  title:"ì…€í”„ ê°ê¸ˆ í˜‘ë°•(ë³´ì´ìŠ¤í”¼ì‹±)",
  incoming:{ name:"ì„œìš¸ì¤‘ì•™ì§€ë°©ê²€ì°°ì²­", number:"02-98XX-7X68" },
  voiceUrl: "https://koreapolkim.github.io/vv/self.mp3",
  keyPoints:[
    "ê³ ë¦½ ì§€ì‹œ(í˜¼ì ì´ë™/ëª¨í…”/ì—°ë½ ëŠì–´ë¼)ëŠ” ì¦‰ì‹œ ì¢…ë£Œ",
    "ì•½ì‹ëª…ë ¹Â·ê°•ì œìˆ˜ì‚¬Â·ì˜ì¥ì§‘í–‰ í˜‘ë°•ì€ â€˜í†µì œâ€™ ìˆ˜ë²•",
    "í†µí™” ìœ ì§€Â·í˜„ê¸ˆí™”(ATM) ì§€ì‹œëŠ” 100% ìœ„í—˜",
    "ëŠê³  112/ì£¼ë³€ ë„ì›€ ìš”ì²­ì´ ì •ë‹µ"
  ],
  oneLiner:"â€˜í˜¼ì ê°€ë¼/ëŠì§€ ë§ˆë¼/ì˜ì¥â€™ í˜‘ë°•ì´ ë‚˜ì˜¤ë©´, ëŠê³  ì£¼ë³€ì— ì•Œë¦¬ëŠ” ê²Œ ì •ë‹µì…ë‹ˆë‹¤.",
  callQuiz:[
    {
      core:"ì§€ê¸ˆë¶€í„° ëª¨í…” ê°™ì€ ì¡°ìš©í•œ ê³³ìœ¼ë¡œ í˜¼ì ì´ë™í•˜ì…”ì„œ ì „í™”ë°›ìœ¼ì‹œê³ , ì§€ê¸ˆ ìˆ˜ì‚¬ëŠ” ë¹„ê³µê°œ ìˆ˜ì‚¬ì´ë¯€ë¡œ ì§€ê¸ˆë¶€í„° ê°€ì¡± ë˜ëŠ” ì§€ì¸ì—ê²Œ ë§í•˜ë©´ ë¹„ë°€ ì€ë‹‰ì£„ì™€ ê³µë¬´ì§‘í–‰ë°©í•´ì£„ë¡œ ì²˜ë²Œ ë°›ì„ê²ë‹ˆë‹¤.",
      choices:[
        {text:"ì•Œê² ìŠµë‹ˆë‹¤, ì ˆëŒ€ ë§í• ì§€ ì•Šì„ê²Œìš”", score:-20,
         feedback:"ìœ„í—˜í•´ìš”. ê³ ë¦½ë˜ë©´ ê²€ì¦ê³¼ ë„ì›€ ìš”ì²­ì´ ë§‰í˜€ í”¼í•´ê°€ ì»¤ì§ˆ ìˆ˜ ìˆì–´ìš”. ê³ ë¦½ ì§€ì‹œëŠ” ì¦‰ì‹œ ê±°ì ˆí•´ì•¼ í•©ë‹ˆë‹¤.",
         why:"ì‚¬ê¸°ë²”ì€ ì£¼ë³€(ê°€ì¡±Â·ì€í–‰Â·ê²½ì°°)ì˜ ê°œì…ì„ ì°¨ë‹¨í•˜ë ¤ê³  â€˜í˜¼ì ìˆìœ¼ë¼â€™ê³  í•©ë‹ˆë‹¤.",
         vector:V(-2,0,0,-2,-2,-2)},
        {text:"ëˆ„êµ¬ì‹œì£ ? ì €ëŠ” ìˆ˜ì‚¬ë°›ì„ ë§Œí•œ ì¼ì„ í•˜ì§€ ì•Šì•˜ëŠ”ë°ìš”", score:+20,
         feedback:"ì¢‹ì€ ëŒ€ì‘ì´ì—ìš”. ì´ì–´ì„œ í†µí™”ë¥¼ ëŠê³  ëŒ€í‘œë²ˆí˜¸/112ë¡œ í™•ì¸í•˜ëŠ” ê²ƒì´ ì•ˆì „í•©ë‹ˆë‹¤.",
         why:"ì •ìƒ ìˆ˜ì‚¬ë¼ë©´ ì „í™”ë¡œ ê³ ë¦½ì„ ê°•ìš”í•˜ì§€ ì•Šê³ , ê³µì‹ ì ˆì°¨ë¡œ ì—°ë½í•©ë‹ˆë‹¤.",
         vector:V(+2,0,0,+2,+2,+2)}
      ]
    },
    {
      core:"5ë¶„ ì´ìƒ í†µí™”ê°€ ëŠì–´ì§€ëŠ” ë“± í˜‘ì¡°ê°€ ì˜ ì´ë¤„ì§€ì§€ ì•Šê³ , ì œ3ì ìœ í¬ê°€ ìš°ë ¤ë  ì‹œì—ëŠ” â€˜ì•½ì‹ìˆ˜ì‚¬â€™ê°€ ì•„ë‹ˆë¼ â€˜êµ¬ì†ìˆ˜ì‚¬â€™ë¡œ ì „í™˜ë©ë‹ˆë‹¤.",
      choices:[
        {text:"ë„¤ ì „í™” ëŠì§€ ì•Šê² ìŠµë‹ˆë‹¤.", score:-20,
         feedback:"ìœ„í—˜í•´ìš”. í˜‘ë°•ì— ë°˜ì‘í•´ í†µí™”ë¥¼ ìœ ì§€í•˜ë©´ ì‚¬ê¸° íë¦„ì— ë¬¶ì—¬ í˜„ê¸ˆí™”/ì†¡ê¸ˆ ì§€ì‹œë¡œ ì´ì–´ì§ˆ ìˆ˜ ìˆì–´ìš”.",
         why:"â€˜êµ¬ì†/ì˜ì¥â€™ ê°™ì€ ë‹¨ì–´ë¡œ ê³µí¬ë¥¼ ì£¼ê³ , ëŠì§€ ëª»í•˜ê²Œ í†µì œí•˜ë ¤ëŠ” ìˆ˜ë²•ì…ë‹ˆë‹¤.",
         vector:V(-2,0,0,-2,-2,-2)},
        {text:"ì œê°€ ëŠê³ , ê²€ì°°ì— ì§ì ‘ ì „í™”í•´ë³¼ê²Œìš”", score:+20,
         feedback:"ì •ë‹µì´ì—ìš”. í˜‘ë°•ìœ¼ë¡œ í†µí™”ë¥¼ ë¶™ì¡ëŠ” ê±´ ì‚¬ê¸° ì‹ í˜¸ì…ë‹ˆë‹¤. ëŠê³  ê³µì‹ ëŒ€í‘œë²ˆí˜¸ë¡œ í™•ì¸í•˜ì„¸ìš”.",
         why:"ì •ìƒê¸°ê´€ì€ ì „í™”ë¡œ â€˜ëŠìœ¼ë©´ êµ¬ì†â€™ ê°™ì€ ë°©ì‹ìœ¼ë¡œ í†µí™”ë¥¼ ê°•ì œí•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.",
         vector:V(+2,0,0,+2,+2,+2)}
      ]
    },
{
      core:"ë‹¤ì‹œ í•œë²ˆ ë§í•˜ì§€ë§Œ ì§€ê¸ˆë¶€í„° í†µí™” ëŠì§€ ë§ê³ , ì£¼ë³€ì— ë§í•˜ë©´ ì²˜ë²Œë°›ìŠµë‹ˆë‹¤. ì´ê±° ì¥ë‚œ ì•„ë‹™ë‹ˆë‹¤.",
      choices:[
        {text:"ì•Œê² ìŠµë‹ˆë‹¤ã…  ì•„ë¬´í•œí…Œë„ ë§ ì•ˆ í•˜ê³  í†µí™” ìœ ì§€í• ê²Œìš”.", score:-20,
         feedback:"ìœ„í—˜í•´ìš”. ë¹„ë°€ ìœ ì§€ë¡œ ê³ ë¦½ë˜ë©´ í”¼í•´ê°€ ì»¤ì§‘ë‹ˆë‹¤.",
         why:"ê°€ì¡±/ì§€ì¸ ë„ì›€ì„ ì°¨ë‹¨í•˜ë ¤ëŠ” ëª©ì ì´ì—ìš”.",
         vector:V(-2,0,0,-2,-2,-2)},
        {text:"í˜‘ë°•í•˜ì§€ ë§ˆì„¸ìš”, ì œê°€ ê³µì‹ê¸°ê´€ì— í™•ì¸í•´ë³´ê² ìŠµë‹ˆë‹¤", score:+20,
         feedback:"ì •ë‹µì´ì—ìš”. ë¹„ë°€ ê°•ìš”ëŠ” ì‚¬ê¸°(í”¼ì‹±) ì‹ í˜¸ì˜ˆìš”.",
         why:"ê²€ì¦ì„ ë§‰ê¸° ìœ„í•œ ìˆ˜ë²•ì…ë‹ˆë‹¤.",
         vector:V(+2,0,0,+2,0,+2)}
      ]
    },
    {
      core:"ì§€ê¸ˆë¶€í„° í•¸ë“œí°ì„ ì†ì—ì„œ ë†“ì§€ ë§ê³ , ì œê°€ ì‹œí‚¤ëŠ”ëŒ€ë¡œ ë”°ë¥´ì…”ì•¼ í•©ë‹ˆë‹¤.",
      choices:[
        {text:"í•œë²ˆë§Œ ë´ì£¼ì„¸ìš”, ì•„ë¬´ì—ê²Œë„ ë§ ì•ˆ í•˜ê³  ì§€ì‹œëŒ€ë¡œ í• ê²Œìš”", score:-20,
         feedback:"ìœ„í—˜í•´ìš”. â€˜ë¹„ë°€ ìœ ì§€+í†µí™” ìœ ì§€â€™ì— ì‘í•˜ë©´ ê³ ë¦½ì´ ì™„ì„±ë˜ê³ , ë‹¤ìŒ ë‹¨ê³„(ATM/í˜„ê¸ˆ ì „ë‹¬)ë¡œ ë„˜ì–´ê°€ê¸° ì‰¬ì›Œìš”.",
         why:"ì‚¬ê¸°ë²”ì€ í†µì œë ¥ì„ ë†’ì´ê¸° ìœ„í•´ â€˜íœ´ëŒ€í°ì„ ë†“ì§€ ë§ë¼â€™ë©° í–‰ë™ì„ ì§€ì‹œí•©ë‹ˆë‹¤.",
         vector:V(-2,0,0,-2,-2,-2)},
        {text:"ëŠê³ , ì‹ ê³ í•˜ê² ìŠµë‹ˆë‹¤.", score:+20,
         feedback:"ì •ë‹µì´ì—ìš”. í†µì œÂ·ê³ ë¦½ ì§€ì‹œëŠ” ì¦‰ì‹œ ì¢…ë£Œê°€ ì›ì¹™ì…ë‹ˆë‹¤. ëŠê³  112 ë° ì£¼ë³€ì— ì•Œë¦¬ì„¸ìš”.",
         why:"ê³ ë¦½ì„ ê¹¨ëŠ” ìˆœê°„ ì‚¬ê¸° íë¦„ì´ ë¬´ë„ˆì§€ê³ , í”¼í•´ë¥¼ ë§‰ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.",
         vector:V(+2,0,0,+2,0,+2)}
      ]
    }
  ],
};


/* ì €ê¸ˆë¦¬ì „í™˜ */
window.SCENARIOS.exp_c_loan_refi_rate = {
  type:"call",
  speedMs: window.DIALOG_FLOW_SPEED_MS,
  title:"ëŒ€ì¶œ ì €ê¸ˆë¦¬ ì „í™˜(ë³´ì´ìŠ¤í”¼ì‹±)",
  incoming:{ name:"OOì €ì¶•ì€í–‰ ìƒë‹´ì„¼í„°", number:"02-77XX-3X98" },
  voiceUrl: "https://koreapolkim.github.io/vv/dae.mp3",
  keyPoints:[
    "â€˜ì˜¤ëŠ˜ë§Œ/ì‚¬ì „ìŠ¹ì¸â€™ ì••ë°•ì€ ì˜ì‹¬",
    "ë¬¸ì ë§í¬ë¡œ â€˜ì‹ ì²­ì„œ/ë³´ì•ˆì ê²€ ì•±â€™ ì„¤ì¹˜ ìœ ë„ëŠ” ìœ„í—˜",
    "â€˜ê¸°ì¡´ëŒ€ì¶œ ìƒí™˜Â·ì‹ ìš©ì ìˆ˜Â·ì˜ˆì¹˜ê¸ˆâ€™ ì„ ì…ê¸ˆ ìš”êµ¬ëŠ” 100% ì‚¬ê¸°",
    "ì›ê²©/ì ‘ê·¼ì„± ê¶Œí•œ ìš”êµ¬ ì¦‰ì‹œ ì¤‘ë‹¨"
  ],
  oneLiner:"ì €ê¸ˆë¦¬ ì „í™˜ì€ â€˜ì „í™” ì§€ì‹œâ€™ê°€ ì•„ë‹ˆë¼ â€˜ê³µì‹ ì±„ë„ì—ì„œ ë‚´ê°€ ì§ì ‘ í™•ì¸â€™ì´ ì •ë‹µì…ë‹ˆë‹¤.",
  callQuiz:[
    {
      core:"ê³ ê°ë‹˜, ì €ê¸ˆë¦¬ ëŒ€í™˜ â€˜ì‚¬ì „ìŠ¹ì¸â€™ ë‚˜ì™”ìŠµë‹ˆë‹¤. ì˜¤ëŠ˜ ì•ˆì—ë§Œ ê°€ëŠ¥í•´ìš”. ì§€ê¸ˆ ì „í™”ë¡œ ë°”ë¡œ ì§„í–‰í•´ë“œë¦´ê²Œìš”.",
      choices:[
        {text:"ì˜¤ëŠ˜ê¹Œì§€ë¼ê³ ìš”? ê·¸ëŸ¼ ë°”ë¡œ ì „í™”ë¡œ ì§„í–‰í• ê²Œìš”", score:-20,
         feedback:"ìœ„í—˜í•´ìš”. â€˜ì˜¤ëŠ˜ë§Œâ€™ ê°™ì€ ì‹œê°„ ì••ë°•ì€ ê²€ì¦ì„ ë§‰ëŠ” ì „í˜•ì ì¸ ìˆ˜ë²•ì…ë‹ˆë‹¤. ëŠê³  ê³µì‹ ì±„ë„ë¡œ í™•ì¸í•˜ì„¸ìš”.",
         why:"ì‚¬ê¸°ë²”ì€ ê¸‰í•˜ê²Œ ë§Œë“¤ê³  í†µì œ(ë§í¬/ì•±ì„¤ì¹˜/ì„ ì…ê¸ˆ) ë‹¨ê³„ë¡œ ë¹ ë¥´ê²Œ ë„˜ì–´ê°€ë ¤ í•©ë‹ˆë‹¤.",
         vector:V(-2,0,0,-2,-2,-2)},
        {text:"ì¢€ ë” í™•ì¸í•´ë´ì•¼í•  ê²ƒ ê°™ë„¤ìš”", score:+20,
         feedback:"ì •ë‹µì´ì—ìš”. ëŒ€ì¶œì€ ë°˜ë“œì‹œ ê¸ˆìœµì‚¬ ê³µì‹ ì•±/ëŒ€í‘œë²ˆí˜¸ì—ì„œ ë³¸ì¸ì´ ì§ì ‘ í™•ì¸í•´ì•¼ ì•ˆì „í•©ë‹ˆë‹¤.",
         why:"ë°œì‹ ë²ˆí˜¸ëŠ” ì¡°ì‘ë  ìˆ˜ ìˆì–´ìš”. ì½œë°± í™•ì¸ì´ ê°€ì¥ í™•ì‹¤í•œ ê²€ì¦ì…ë‹ˆë‹¤.",
         vector:V(+2,0,0,+2,0,+2)}
      ]
    },
    {
      core:"ì‹ ì²­ì„œ ì‘ì„± ë§í¬ë¥¼ ë¬¸ìë¡œ ë³´ë‚´ë“œë¦´ê²Œìš”. ë“¤ì–´ê°€ì„œ â€˜ë³´ì•ˆì ê²€ ë° ëŒ€ì¶œì‹ ì²­ ì•±â€™ ì„¤ì¹˜ë§Œ í•˜ë©´ ê¸ˆë°© ëë‚©ë‹ˆë‹¤.",
      choices:[
        {text:"ì•± ì„¤ì¹˜ë§Œ í•˜ë©´ ë˜ë‚˜ìš”?", score:-20,
         feedback:"ìœ„í—˜í•´ìš”. ë¬¸ì ë§í¬/ì•± ì„¤ì¹˜ëŠ” ì•…ì„±ì•±Â·ê°€ì§œ ì‹ ì²­í˜ì´ì§€ë¡œ ì´ì–´ì§ˆ ìˆ˜ ìˆì–´ìš”.",
         why:"ì•…ì„±ì•±ì´ ì„¤ì¹˜ë˜ë©´ ì¸ì¦ íƒˆì·¨Â·ì›ê²©ì¡°ì‘Â·ê¸ˆìœµì•± ì ‘ê·¼ìœ¼ë¡œ í”¼í•´ê°€ ë°œìƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.",
         vector:V(-2,-2,0,-2,-1,-2)},
        {text:"ë§í¬ë¥¼ ëˆ„ë¥´ë¼ëŠ” ê²Œ ìˆ˜ìƒí•©ë‹ˆë‹¤ë§Œ", score:+20,
         feedback:"ì •ë‹µì´ì—ìš”. ë§í¬ í´ë¦­ ëŒ€ì‹  ê³µì‹ ì•±/í™ˆí˜ì´ì§€ì—ì„œ ì§ì ‘ ì¡°íšŒÂ·ì‹ ì²­í•´ì•¼ ì•ˆì „í•©ë‹ˆë‹¤.",
         why:"ê³µì‹ ì±„ë„ë¡œ ì§ì ‘ ì ‘ì†í•˜ë©´ í”¼ì‹± í˜ì´ì§€ë¥¼ í”¼í•  ìˆ˜ ìˆì–´ìš”.",
         vector:V(+2,+2,0,+2,0,+2)}
      ]
    },
{
      core:"ì›ê²©ì•± ì„¤ì¹˜í•˜ê³  ì ‘ê·¼ì„± ê¶Œí•œë§Œ í—ˆìš©í•˜ë©´ ì œê°€ ë¹ ë¥´ê²Œ ì²˜ë¦¬í•´ë“œë¦´ê²Œìš”.",
      choices:[
        {text:"ë„¤, ì§€ê¸ˆ ì„¤ì¹˜í•˜ê³  ê¶Œí•œ í—ˆìš©í–ˆì–´ìš”", score:-20,
         feedback:"ë§¤ìš° ìœ„í—˜í•´ìš”. ê¶Œí•œ í—ˆìš©ì€ í”¼í•´ë¡œ ì§í–‰í•  ìˆ˜ ìˆì–´ìš”.",
         why:"ì‚¬ê¸°ì—ì„œ ì›ê²©/ì ‘ê·¼ì„±ì€ í•µì‹¬ ìˆ˜ë‹¨ì…ë‹ˆë‹¤.",
         vector:V(-2,-2,-2,-2,-2,-2)},
        {text:"ì•„ ë­”ê°€ ì´ìƒí•œë°, ì œê°€ ì¼ë‹¨ ëŠê³  ì€í–‰ì— ì§ì ‘ ì „í™”í•´ ë³¼ê²Œìš”", score:+20,
         feedback:"ì •ë‹µì´ì—ìš”. ì›ê²©/ì ‘ê·¼ì„±ì€ ë§¤ìš° ìœ„í—˜í•©ë‹ˆë‹¤.",
         why:"íœ´ëŒ€í° ì¡°ì‘/ì¸ì¦ íƒˆì·¨/ì†¡ê¸ˆ í”¼í•´ë¡œ ì´ì–´ì§ˆ ìˆ˜ ìˆì–´ìš”.",
         vector:V(+2,+2,+2,+2,+2,+2)}
      ]
    },
    {
      core:"ëŒ€í™˜ ìŠ¹ì¸ ì „ì— ê¸°ì¡´ëŒ€ì¶œ ì•½ì • ìœ„ë°˜ ë° ì‹ ìš©ì ìˆ˜ ë¬¸ì œ ë•Œë¬¸ì— â€˜ì˜ˆì¹˜ê¸ˆâ€™ì„ ë¨¼ì € ì…ê¸ˆí•´ì•¼ í•©ë‹ˆë‹¤. ì…ê¸ˆí•˜ë©´ ë°”ë¡œ ì‹¤í–‰ë¼ìš”.",
      choices:[
        {text:"ì…ê¸ˆí•˜ê³  ë°”ë¡œ ì—°ë½ë“œë¦´ê²Œìš” ê·¸ëŸ¼ ë°”ë¡œ ì‹¤í–‰ë˜ëŠ”ê±°ì£ ?", score:-20,
         feedback:"ë§¤ìš° ìœ„í—˜í•´ìš”. â€˜ì„ ì…ê¸ˆ/ì˜ˆì¹˜ê¸ˆ/ìƒí™˜ê¸ˆ ë¨¼ì €â€™ ìš”êµ¬ëŠ” 100% ë³´ì´ìŠ¤í”¼ì‹± ì‹ í˜¸ë¡œ ë³´ì…”ì•¼ í•©ë‹ˆë‹¤.",
         why:"ì •ìƒ ê¸ˆìœµì‚¬ëŠ” ëŒ€ì¶œ ì‹¤í–‰ì„ ì¡°ê±´ìœ¼ë¡œ ê°œì¸ì—ê²Œ ì„ ì…ê¸ˆì„ ìš”êµ¬í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.",
         vector:V(-2,0,0,-2,-2,-2)},
        {text:"ê¸ˆìœµê¶Œì€ ì„ ì…ê¸ˆì„ ìš”êµ¬í•˜ì§€ ì•ŠëŠ”ë‹¤ê³  ì•Œê³  ìˆëŠ”ë°, ì œê°€ ì§ì ‘ ì€í–‰ì— í™•ì¸í•´ë³´ê² ìŠµë‹ˆë‹¤", score:+20,
         feedback:"ì •ë‹µì´ì—ìš”. ì„ ì…ê¸ˆ ìš”êµ¬ëŠ” ì¦‰ì‹œ ì¤‘ë‹¨í•˜ê³ , ê³µì‹ ì±„ë„ì—ì„œ ì‚¬ì‹¤ í™•ì¸í•´ì•¼ í•©ë‹ˆë‹¤.",
         why:"ì…ê¸ˆ í›„ â€˜ìˆ˜ìˆ˜ë£Œ/í•´ì§€ë¹„ìš©â€™ ë“± ì¶”ê°€ ìš”êµ¬ë¡œ í™•ëŒ€ë˜ëŠ” ì‚¬ë¡€ê°€ ë§ìŠµë‹ˆë‹¤.",
         vector:V(+2,0,0,+2,+2,+2)}
      ]
    }
  ],
};


/* ì¹´ë“œë°°ì†¡ */
window.SCENARIOS.exp_c_post_card = {
  type:"call",
  speedMs: window.DIALOG_FLOW_SPEED_MS,
  voiceUrl: "https://koreapolkim.github.io/vvv/card.mp3",
  title:"ì¹´ë“œ ë°°ì†¡(ë³´ì´ìŠ¤í”¼ì‹±)",
  incoming:{ name:"ì¹´ë“œë°°ì†¡ ì§‘ë°°ì›", number:"010-98XX-07X2" },
  keyPoints:[
    "â€˜ì¹´ë“œ ë°°ì†¡/ì˜¤ë°°ì†¡/ë°˜ì†¡â€™ì´ë¼ë©° â€˜ê°€ì§œ ê³ ê°ì„¼í„°â€™ë¡œ ìœ ë„í•˜ë©´ ì˜ì‹¬",
    "ë¬¸ìë¡œ ë³´ë‚´ëŠ” ë§í¬(ì£¼ì†Œ URL)ëŠ” ëˆ„ë¥´ì§€ ë§ê³  ê³µì‹ ì±„ë„ë¡œ í™•ì¸",
    "OTPÂ·ì›ê²©ì œì–´ì•±Â·ì ‘ê·¼ì„± ê¶Œí•œ ìš”êµ¬ëŠ” ì¦‰ì‹œ ì¤‘ë‹¨"
  ],
  oneLiner:"ì¹´ë“œ ë°°ì†¡ ì „í™”ëŠ” ëŠê³ , ì¹´ë“œì‚¬/ìš°ì²´êµ­ â€˜ê³µì‹ ë²ˆí˜¸â€™ë¡œ ë‚´ê°€ ì§ì ‘ í™•ì¸í•˜ì„¸ìš”.",
  callQuiz:[
    {
      core:"ì¹´ë“œë°°ì†¡ê¸°ì‚¬ì¸ë°ìš”, ê³ ê°ë‹˜ ëª…ì˜ ë°œê¸‰ ì¹´ë“œ ë°°ì†¡í•´ë“œë¦´ë ¤ê³ í•˜ëŠ”ë° ëŒì— ê³„ì‹œë‚˜ìš”?",
      choices:[
        {text:"ë„¤, ì œê°€ ì§‘ ê·¼ì²˜ë¼ ê³§ ë„ì°©í•´ìš”", score:-20,
         feedback:"ìœ„í—˜í•´ìš”. ì´ íë¦„ì€ â€˜ê°€ì§œ ê³ ê°ì„¼í„°/ê°€ì§œ ì‚¬ê³ ì˜ˆë°©íŒ€â€™ìœ¼ë¡œ ì—°ê²°í•´ ê°œì¸ì •ë³´Â·ì¸ì¦Â·ì•±ì„¤ì¹˜ë¡œ ì´ì–´ì§ˆ ìˆ˜ ìˆì–´ìš”.",
         why:"ì‚¬ê¸°ë²”ì€ â€˜ì§€ê¸ˆ ì—¬ê¸°ì„œ í•´ê²°â€™í•˜ê²Œ ë§Œë“¤ì–´ ê³µì‹ í™•ì¸(ì½œë°±)ì„ ëª» í•˜ê²Œ í•©ë‹ˆë‹¤.",
         vector:V(-2,0,0,-2,-1,-2)},
        {text:"ì¹´ë“œë¥¼ ì‹ ì²­í•œì ì´ ì—†ëŠ”ë°ìš”", score:+20,
         feedback:"ì •ë‹µì´ì—ìš”. ë°œì‹ ë²ˆí˜¸Â·ì—°ê²°ë²ˆí˜¸ëŠ” ì¡°ì‘ë  ìˆ˜ ìˆì–´ìš”. ê³µì‹ë²ˆí˜¸ë¡œ ì½œë°±í•´ì•¼ ì•ˆì „í•©ë‹ˆë‹¤.",
         why:"ë‚´ê°€ ì§ì ‘ ê³µì‹ ë²ˆí˜¸ë¡œ í™•ì¸í•˜ë©´ â€˜ê°€ì§œ ê³ ê°ì„¼í„°â€™ ìœ ë„ì— ê±¸ë¦¬ì§€ ì•ŠìŠµë‹ˆë‹¤.",
         vector:V(+2,0,0,+2,0,+2)}
      ]
    },
    {
      core:"ì¹´ë“œ ë°œê¸‰í•˜ì‹  ì ì´ ì—†ìœ¼ì‹œë‹¤êµ¬ìš”? OOOì”¨ ì•„ë‹ˆì„¸ìš”? ì‹ ì²­í•˜ì‹œì§€ ì•Šì•˜ëŠ”ë° ë°œê¸‰ë  ì¼ì´ ì—†ëŠ”ë°, ì €ëŠ” ë°°ì†¡ë§Œ í•˜ëŠ” ì‚¬ëŒì´ë¼ ê·¸ëŸ¼ ë°˜ì†¡ ì²˜ë¦¬ ì‹ ì²­í•´ì£¼ì‹œê² ì–´ìš”?",
      choices:[
        {text:"ê·¸ë˜ìš”? ì–´ë””ë¡œ ì „í™”í•´ì•¼ í•˜ë‚˜ìš”? ", score:-20,
         feedback:"ë§¤ìš° ìœ„í—˜í•´ìš”. â€˜ì·¨ì†Œ/ì‚¬ê³ ì˜ˆë°©â€™ ëª…ëª©ìœ¼ë¡œ OTPë‚˜ ì¸ì¦ì„ ìš”êµ¬í•˜ë©´ ê³„ì •Â·ê²°ì œ íƒˆì·¨ë¡œ ì´ì–´ì§ˆ ìˆ˜ ìˆì–´ìš”.",
         why:"OTPëŠ” â€˜ë‚´ê°€ ì§ì ‘ ì…ë ¥â€™í•´ì•¼ í•˜ëŠ” ë³´ì•ˆìˆ˜ë‹¨ì…ë‹ˆë‹¤. ë‚¨ì—ê²Œ ë§í•˜ë©´ ìƒëŒ€ê°€ ì¸ì¦ì„ ëŒ€ì‹  ì²˜ë¦¬í•  ìˆ˜ ìˆì–´ìš”.",
         vector:V(-2,0,-2,-2,-2,-2)},
        {text:"ì–´ë”” ì¹´ë“œë¼ê³  í•˜ì…¨ì£ ? ì œê°€ ì§ì ‘ ê·¸ ì¹´ë“œì‚¬ì— ì „í™”í•´ë³¼ê²Œìš”", score:+20,
         feedback:"ì •ë‹µì´ì—ìš”. ì·¨ì†Œ/ë°˜ì†¡ì´ í•„ìš”í•´ë„ OTPë¥¼ ë§í•  ì´ìœ ê°€ ì—†ìŠµë‹ˆë‹¤. ëŠê³  ê³µì‹ ì±„ë„ë¡œ í™•ì¸í•˜ì„¸ìš”.",
         why:"ì •ìƒ ì ˆì°¨ëŠ” ì¹´ë“œì‚¬ ê³µì‹ ì•±/ëŒ€í‘œë²ˆí˜¸ì—ì„œ ë³¸ì¸ì´ ì§ì ‘ ì²˜ë¦¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.",
         vector:V(+2,0,+2,+2,0,+2)}
      ]
    },
 {
      core:"ì§€ê¸ˆ ìš°í¸ë¬¼ ë’¤ì— ë³´ë©´ OOì¹´ë“œì‚¬ë¼ê³  í™•ì¸ë˜ëŠ”ë°, ì§„ì§œ ì‹ ì²­í•œ ì  ì—†ìœ¼ì„¸ìš”?",
      choices:[
        {text:"ë‚´ê°€ ì–¸ì œ ì‹ ì²­í–ˆì—ˆë‚˜? ë°˜ì†¡ ì ‘ìˆ˜ëŠ” ì–´ë””ì„œ í•˜ì£ ?", score:-20,
         feedback:"ë§¤ìš° ìœ„í—˜í•´ìš”. ì›ê²©ì•±/ì ‘ê·¼ì„± ê¶Œí•œì€ íœ´ëŒ€í° ì¡°ì‘ê³¼ ì¸ì¦ íƒˆì·¨ë¡œ ì´ì–´ì§ˆ ìˆ˜ ìˆì–´ìš”.",
         why:"ì‚¬ê¸°ë²”ì€ ì›ê²©/ì ‘ê·¼ì„± ê¶Œí•œìœ¼ë¡œ ë¬¸ì ì¸ì¦/ê¸ˆìœµì•± ì¡°ì‘ì„ ì‹œë„í•  ìˆ˜ ìˆì–´ìš”. â€˜ëŒ€ì‹  í•´ì¤€ë‹¤â€™ëŠ” ë§ì´ íŠ¹íˆ ìœ„í—˜í•©ë‹ˆë‹¤.",
         vector:V(-2,-2,-2,-2,-2,-2)},
        {text:"OOì¹´ë“œíšŒì‚¬ì— ì§ì ‘ ì „í™”í•´ë³¼ê²Œìš”", score:+20,
         feedback:"ì •ë‹µì´ì—ìš”. ì›ê²©ì•± ì„¤ì¹˜/ê¶Œí•œ ìš”êµ¬ëŠ” ì‚¬ê¸°(í”¼ì‹±)ì—ì„œ ë§¤ìš° ìœ„í—˜í•œ ì‹ í˜¸ì˜ˆìš”.",
         why:"ê³µì‹ê¸°ê´€ì€ ì „í™”ë¡œ ì›ê²©ì•± ì„¤ì¹˜ë¥¼ ìš”êµ¬í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ëŠê³  ê³µì‹ ì•±/ëŒ€í‘œë²ˆí˜¸ë¡œ í™•ì¸í•˜ëŠ” ê²ƒì´ ì•ˆì „í•©ë‹ˆë‹¤.",
         vector:V(+2,+2,+2,+2,+2,+2)}
      ]
    },
    {
      core:"ê¼­ OOì¹´ë“œ ì‚¬ê³ ì˜ˆë°©íŒ€ì— ì „í™”í•˜ì…”ì„œ, ì¹´ë“œ ë°°ì†¡ ì·¨ì†Œ ì‹ ì²­ ê¼­ í•´ì£¼ì„¸ìš”, ê·¸ë˜ì•¼ 2ì°¨ ì‚¬ê³  ì˜ˆë°©ì´ ë¼ìš”",
      choices:[
        {text:"ë„¤ ê°ì‚¬í•©ë‹ˆë‹¤, ë¶ˆëŸ¬ì£¼ì‹  ë²ˆí˜¸ë¡œ ì „í™”í•´ë³¼ê²Œìš”", score:-10,
         feedback:"ìœ„í—˜í•´ìš”. â€˜ì‚¬ê³ ì˜ˆë°©/ì·¨ì†Œâ€™ë¼ê³  í•´ë„ ë§í¬ í´ë¦­ì´ë‚˜ ì„¤ì¹˜ëŠ” í”¼ì‹±/ì•…ì„±ì•±ìœ¼ë¡œ ì´ì–´ì§ˆ ìˆ˜ ìˆì–´ìš”.",
         why:"ì‚¬ê¸°ë²”ì€ ê°€ì§œ ì•ˆë‚´(ë§í¬/ì•±)ë¡œ ê°œì¸ì •ë³´ ì…ë ¥Â·ê¶Œí•œ í—ˆìš©ì„ ìœ ë„í•´ ê¸ˆìœµ í”¼í•´ë¡œ ì—°ê²°í•©ë‹ˆë‹¤.",
         vector:V(0,-1,0,-1,-1,-1)},
        {text:"ì‹ ê³ í•˜ê² ìŠµë‹ˆë‹¤", score:+20,
         feedback:"ì •ë‹µì´ì—ìš”. ì•ˆë‚´ë°›ì€ ë§í¬/ì„¤ì¹˜ê°€ ì•„ë‹ˆë¼, ë‚´ê°€ ì§ì ‘ ê³µì‹ ì•±/í™ˆí˜ì´ì§€ë¡œ í™•ì¸í•´ì•¼ ì•ˆì „í•©ë‹ˆë‹¤.",
         why:"ê³µì‹ ì±„ë„ë¡œ ì§ì ‘ ì ‘ì†í•˜ë©´ ê°€ì§œ ì‚¬ì´íŠ¸/ì•…ì„±ì•± ì„¤ì¹˜ ìœ ë„ë¥¼ ì°¨ë‹¨í•  ìˆ˜ ìˆì–´ìš”.",
         vector:V(+2,+2,+2,+2,0,+2)}
      ]
    }
  ],
};



/* âœ… CASE ëª©ë¡ ë©”íƒ€(Subtitle/Keywords/Summary) ìë™ ë™ê¸°í™”
   - ì‚¬ìš©ìê°€ SCENARIOS(ëŒ€í™”/ë¬¸ì œ/ë‹µ)ì„ ë°”ê¿”ë„ ë¦¬ìŠ¤íŠ¸/ì„¤ëª… í™”ë©´ ë¬¸êµ¬ê°€ ë”°ë¼ì˜¤ê²Œ í•¨
   - í•„ìš” ì‹œ ê° ì‹œë‚˜ë¦¬ì˜¤ì— ì•„ë˜ ì˜µì…˜ì„ ì§ì ‘ ë„£ìœ¼ë©´ ìš°ì„  ì ìš©ë©ë‹ˆë‹¤:
     exp.listSubtitle, exp.listSummary, exp.listKeywords(Array), exp.introLines(Array)
*/
(function syncCaseMetaFromScenarios(){
  try{
    if(!Array.isArray(window.CASES) || !window.SCENARIOS) return;

    const pickKeywords = (exp)=>{
      if(Array.isArray(exp?.listKeywords) && exp.listKeywords.length) return exp.listKeywords;
      if(Array.isArray(exp?.keyPoints) && exp.keyPoints.length) return exp.keyPoints.slice(0,5);
      return [];
    };

    window.CASES.forEach(c=>{
      const exp = window.SCENARIOS?.[c?.experienceId];
      if(!exp || !c) return;

      // subtitle
      const sub = String(exp.listSubtitle || exp.oneLiner || c.subtitle || "").trim();
      if(sub) c.subtitle = sub;

      // summary/keywords
      c.info = (c.info && typeof c.info==="object") ? c.info : {};
      const sum = String(exp.listSummary || exp.oneLiner || c.info.summary || "").trim();
      if(sum) c.info.summary = sum;

      const kws = pickKeywords(exp);
      if(kws && kws.length){
        c.info.keywords = kws.map(x=>{
          const s = String(x||"").trim();
          return s ? (s.endsWith(",") ? s : (s + ",")) : "";
        }).filter(Boolean);
      }
    });
  }catch(e){}
})();
</script>
</body>
</html>


